
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: Time-And-Timing / ChucK</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for ChucK" href="/feeds/rss/book/chuck/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for ChucK" href="/feeds/atom/book/chuck/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter Time and Timing" href="/feeds/rss/chapter/chuck/chuck/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter Time and Timing" href="/feeds/atom/chapter/chuck/chuck/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/chuck/_draft/_v/1.0/time-and-timing/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>ChucK</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><a href="/chuck/_draft/_v/1.0/introduction/">Introduction</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/places/">Places</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/authors/">Authors</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/installation/">Installation</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/tutorials/">Tutorials</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/hello-chuck/">Hello ChucK</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/conventions/">Conventions</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/on-the-fly-programming/">On-the-fly Programming</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/modifying-basic-patches/">Modifying Basic Patches</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/lfos-and-blackholes/">LFOs and Blackholes</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/working-with-midi/">Working with MIDI</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/writing-to-disk/">Writing to Disk</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/stereo/">Stereo</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/using-osc-in-chuck/">Using OSC in ChucK</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/reference/">Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/overview/">Overview</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/the-chuck-compiler-and-virtual-machine/">The ChucK Compiler and Virtual Machine</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/on-the-fly-commands/">On-the-fly Commands</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/types-values-and-variables/">Types, Values and Variables</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/operators-and-operations/">Operators and Operations</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/time-and-timing/">Time and Timing</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/concurrency-and-shreds/">Concurrency and Shreds</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/events/">Events</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/control-structures/">Control Structures</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/functions/">Functions</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/objects/">Objects</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/arrays/">Arrays</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/unit-analyzers/">Unit Analyzers</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/standard-libraries/">Standard Libraries</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/event-reference/">Event Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/other-objects-reference/">Other Objects Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/ugenreference/">UgenReference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/unit-generators/">Unit Generators</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/ugens-oscillators/">Ugens: Oscillators</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/ugens-stkinstruments/">Ugens: STKInstruments</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/unit-analyzer-reference/">Unit Analyzer Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/extending-chuck/">Extending ChucK</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/lick-library-for-chuck/">LiCK: Library for ChucK</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <html lang="en"><head><title>Time and Timing</title></head><body><h1>Time and Timing
</h1>
<p>ChucK is a strongly-timed language, meaning that time is fundamentally embedded in the lan- guage. ChucK allows the programmer to explicitly reason about time from the code. This gives extremely &#64258;exible and precise control over time and (therefore) sound synthesis.
</p>
<p>In ChucK:
</p>
<ul><li>Time and duration are native types in the language </li>
  <li>Keyword now holds the current logical time</li>
  <li>Time is advanced (and can only be advanced) by explicitly manipulating now</li>
  <li>You have &#64258;exible and precise control</li>
</ul><h2>Time and Duration
</h2>
<p>Time and duration are native types in ChucK. time represents an absolute point in time (from the beginning of ChucK time). dur represents a duration (with the same logical units as time).
</p>
<pre>// a duration of one second
1::second =&gt; dur foo;

// a point in time (duration of foo from now)
now + foo =&gt; time later;</pre>
<p>Later in this section, we outline the various arithmetic operations to perform on time and duration.
</p>
<p>Durations can be used to construct new durations, which then be used to inductively construct yet other durations. For example:
</p>
<pre>// .5 second is a quarter
.5::second =&gt; dur quarter;

// 4 quarters is whole
4::quarter =&gt; dur whole;</pre>
<p>By default, ChucK provides these preset duration values:
</p>
<ul><li>samp : duration of 1 sample in ChucK time</li>
  <li>ms : duration of 1 millisecond</li>
  <li>second : duration of 1 second</li>
  <li>minute : 1 minute</li>
  <li>hour : 1 hour</li>
  <li>day : 1 day</li>
  <li>week : 1 week</li>
</ul><p>Use these to represent any duration.
</p>
<pre>// the duration of half a sample
.5::samp =&gt; dur foo;

// 20 weeks
20::week =&gt; dur waithere;

// use in combination
2::minute + 30::second =&gt; dur bar;

// same value as above
2.5::minute =&gt; dur bar; </pre>
<h2>Operations on Time and Duration (Arithmetic)
</h2>
<p>In ChucK, there are well-de&#64257;ned arithmetic operations on values of type time and dur.
</p>
<p>Example 1 (time offset):
</p>
<pre>// time + dur yields time
now + 10::second =&gt; time later;</pre>
<p>Example 2 (time subtraction):
</p>
<pre>// time - time yields dur
later - now =&gt; dur D;</pre>
<p>example 3 (addition):
</p>
<pre>// dur + dur yields dur
10::second + 100::samp =&gt; dur foo;</pre>
<p>Example 4 (subtraction):
</p>
<pre>// dur - dur yields dur
10::second - 100::samp =&gt; dur bar; </pre>
<p>Example 5 (division):
</p>
<pre>// dur / dur yields float
10::second / 20::ms =&gt; float n;</pre>
<p>Example 6 (time mod):
</p>
<pre>// time mod dur yields dur
now % 1::second =&gt; dur remainder;</pre>
<p>Example 7 (synchronize to period):
</p>
<pre>// synchronize to period of .5 second
.5::second =&gt; dur T;
T - (now % T) =&gt; now; </pre>
<p>Example 8 (comparison on time):
</p>
<pre>// compare time and time
if( t1 &lt; t2 )
  // do something...
</pre>
<p>Example 9 (comparison on duration):
</p>
<pre>// compare dur and dur
if( 900::ms &lt; 1::second )
  &lt;&lt;&lt; "yay!" &gt;&gt;&gt;; </pre>
<h2>The Keyword &#8216;now&#8217;
</h2>
<p>The keyword now is the key to reasoning about and controlling time in ChucK.
</p>
<p>Some properties of now include:
</p>
<ul><li>now is a special variable of type time</li>
  <li>now holds the current ChucK time (when read)</li>
  <li>Modifying now has the side effects of:</li>
  <li>advancing time (see below);</li>
  <li>suspending the current process (called shred) until the desired time is reached - allowing other shreds and audio synthesis to compute;</li>
  <li>The value of now only changes when it is explicitly modi&#64257;ed.</li>
</ul><p>For more detail see the Advancing Time section.
</p>
<p>Example:
</p>
<pre>// compute value that represents "5 seconds from now"
now + 5::second =&gt; time later;

// while we are not at later yet...
while( now &lt; later )
{
  // print out value of now
  &lt;&lt;&lt; now &gt;&gt;&gt;;

  // advance time by 1 second
  1::second =&gt; now;
}
</pre>
<h2>Advancing Time
</h2>
<p>Advancing time allows other shreds (processes) to run and allows audio to be computed in a controlled manner. There are three ways of advancing time in ChucK:
</p>
<ul><li>chucking (=&gt; ) a duration to now: this will advance time by that duration.</li>
  <li>chucking (=&gt; ) a time to now: this will advance time to that point. (note that the desired time must be later than the current time, or at least be equal to it.)</li>
  <li>chucking (=&gt; ) an Event to now: time will advance until the event is triggered. (also see event)</li>
</ul><h3>Advancing Time by Duration
</h3>
<pre>// advance time by 1 second
1::second =&gt; now;

// advance time by 100 millisecond
100::ms =&gt; now;

// advance time by 1 samp (every sample)
1::samp =&gt; now;

// advance time by less than 1 samp
.024::samp =&gt; now; </pre>
<h3>Advancing Time by Absolute Time
</h3>
<pre>// figure out when
now + 4::hour =&gt; time later;

// advance time to later
later =&gt; now; </pre>
<p>A time chucked to now will have ChucK wait until the appointed time. ChucK never misses an appointment (unless it crashes)! Again, the time chucked to now must be greater than or equal to now, otherwise an exception is thrown.
</p>
<h3>Advancing Time by Event
</h3>
<pre>// wait on event
e =&gt; now;</pre>
<p>See events for a more complete discussion of using events!
</p>
<p>The advancement of time can occur at any point in the code.
</p>
<pre>// our patch: sine oscillator -&gt; dac
SinOsc s =&gt; dac;

// infinite time loop
while( true )
{
  // randomly choose frequency from 30 to 1000
  Std.rand2f( 30, 1000 ) =&gt; s.freq;

  // advance time by 100 millisecond
  100::ms =&gt; now;
} </pre>
<p>Furthermore, there are no restrictions (other than underlying &#64258;oating point precision) on how much time is advanced. So it is possible to advance time by a microsecond, a samp, 2 hours, or 10 years. The system will behave accordingly and deterministically.
</p>
<p>This mechanism allows time to be controlled at any desired rate, according to any programmable pattern. With respect to sound synthesis, it is possible to control any unit generator at literally any rate, even sub-sample rate.
</p>
<p>The power of the timing mechanism is extended by the ability to write parallel code, which is discussed in concurrency and shreds.
</p>

</body></html>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

