
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: Operators-And-Operations / ChucK</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for ChucK" href="/feeds/rss/book/chuck/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for ChucK" href="/feeds/atom/book/chuck/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter Operators and Operations" href="/feeds/rss/chapter/chuck/chuck/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter Operators and Operations" href="/feeds/atom/chapter/chuck/chuck/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/chuck/_draft/_v/1.0/operators-and-operations/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>ChucK</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><a href="/chuck/_draft/_v/1.0/introduction/">Introduction</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/places/">Places</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/authors/">Authors</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/installation/">Installation</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/tutorials/">Tutorials</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/hello-chuck/">Hello ChucK</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/conventions/">Conventions</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/on-the-fly-programming/">On-the-fly Programming</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/modifying-basic-patches/">Modifying Basic Patches</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/lfos-and-blackholes/">LFOs and Blackholes</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/working-with-midi/">Working with MIDI</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/writing-to-disk/">Writing to Disk</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/stereo/">Stereo</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/using-osc-in-chuck/">Using OSC in ChucK</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/reference/">Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/overview/">Overview</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/the-chuck-compiler-and-virtual-machine/">The ChucK Compiler and Virtual Machine</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/on-the-fly-commands/">On-the-fly Commands</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/types-values-and-variables/">Types, Values and Variables</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/operators-and-operations/">Operators and Operations</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/time-and-timing/">Time and Timing</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/concurrency-and-shreds/">Concurrency and Shreds</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/events/">Events</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/control-structures/">Control Structures</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/functions/">Functions</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/objects/">Objects</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/arrays/">Arrays</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/unit-analyzers/">Unit Analyzers</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/standard-libraries/">Standard Libraries</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/event-reference/">Event Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/other-objects-reference/">Other Objects Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/ugenreference/">UgenReference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/unit-generators/">Unit Generators</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/ugens-oscillators/">Ugens: Oscillators</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/ugens-stkinstruments/">Ugens: STKInstruments</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/unit-analyzer-reference/">Unit Analyzer Reference</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/extending-chuck/">Extending ChucK</a></li>
    
   
    
      <li><a href="/chuck/_draft/_v/1.0/lick-library-for-chuck/">LiCK: Library for ChucK</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <html lang="en"><head><title>Operators and Operations</title></head><body><h1>Operators and Operations
</h1>
<p>Operations on data are achieved through operators. This sections de&#64257;nes how operators behave on various datatypes. You may have seen many of the operators in other programming languages (C/Java). Some others are native to ChucK. We start with the family of ChucK operators.
</p>
<p>
</p>
<p>The ChucK operator (=&gt; ) is a massively overloaded operator that, depending on the types involved, performs various actions. It denotes action, can be chained, and imposes and clari&#64257;es order (always goes from left to right). The ChucK operator is the means by which work is done in ChucK. Furthermore, the ChucK operator is not a single operator, but a family of operators.
</p>
<h2>=&gt; (foundational ChucK operator)
</h2>
<p>
</p>
<p>We start with the standard, plain-vanilla ChucK operator (=&gt; ). It is left-associative (all ChucK operators are), which allows us to specify any ordered &#64258;ow of data/tasks/modules (such as unit generator connection) from left-to-right, as in written (English) text. What =&gt; does depends on the context. It always depends on the type of the entity on the left (the chucker) and the one on the right (the chuckee), and it sometimes also depends on the nature of the entity (such as whether it is a variable or not).
</p>
<p>Some examples:
</p>
<pre>// a unit generator patch - the signal flow is apparent
// (in this case, =&gt; connects two unit generators)
SinOsc b =&gt; Gain g =&gt; BiQuad f =&gt; dac;

// add 4 to foo, chuck result to new &#8217;int&#8217; variable &#8217;bar&#8217;
// (in this case, =&gt; assigns a value to a variable (int)
4 + foo =&gt; int bar;

// chuck values to a function == function call
// (same as Math.rand2f( 30, 1000))
( 30, 1000 ) =&gt; Math.rand2f;</pre>
<p>There are many other well-de&#64257;ned uses of the ChucK operator, depending on the context.
</p>
<h2>@=&gt; (explicit assignment ChucK operator)
</h2>
<p>In ChucK, there is no standard assignment operator (=), found in many other programming languages. Assignment is carried out using ChucK operators. In the previous examples, we have used =&gt; for assignment:
</p>
<pre>// assign 4 to variable foo
4 =&gt; int foo;

// assign 1.5 to variable bar
1.5 =&gt; float bar;

// assign duration of 100 millisecond to duh
100::ms =&gt; dur duh;

// assign the time "5 second from now" to later
5::second + now =&gt; time later;

// assign a value to a string
"Hello!" =&gt; string greeting;
<p></p></pre>
<p>The @=&gt; explicit assignment ChucK operator behaves exactly the same for the above types (int, &#64258;oat, dur, time). However, the difference is that @=&gt; can also be used for reference assignments of objects (see objects and classes) whereas =&gt; only does assignment on primitive types (int, &#64258;oat, dur, time, string). The behavior of =&gt; on objects is completely context-dependent.
</p>
<pre>// using @=&gt; is same as =&gt; for primitive types
4 @=&gt; int foo;

// assign 1.5 to variable bar
1.5 @=&gt; float bar;

// (only @=&gt; can perform reference assignment on objects)
// reference assign moe to larry
// (such that both moe and larry reference the same object)
Object moe @=&gt; Object @ larry;

// array initialization
[ 1, 2 ] @=&gt; int ar[];

// using new
new Object @=&gt; moe;</pre>
<p>While somewhat unusual thas has the advantage of there being no ambiguity between assignment (@=&gt; or <code>&gt; ) and testing for equality (=</code>). In fact the following is not a valid ChucK statement:
</p>
<pre>// not a valid ChucK statement!
int foo = 4; </pre>
<h2>+=&gt; -=&gt; *=&gt; /=&gt; etc. (arithmetic ChucK operators)
</h2>
<p>These operators are used with variables (using &#8217;int&#8217; and &#8217;&#64258;oat&#8217;) to perform one operation with assignment.
</p>
<pre>// add 4 to foo and assign result to foo
foo + 4 =&gt; foo;

// add 4 to foo and assign result to foo
4 +=&gt; foo;

// subtract 10 from foo and assign result to foo
// remember this is (foo-10), not (10-foo)
10 -=&gt; foo;

// 2 times foo assign result to foo
2 *=&gt; foo;

// divide 4 into foo and assign result to foo
// again remember this is (foo/4), not (4/foo)
4 /=&gt; foo;</pre>
<p>It is important to note the relationship between the value and variable when using -=&gt;and /=&gt;, since these operations are not commutative.
</p>
<pre>// mod foo by T and assign result to foo
T %=&gt; foo;

// bitwise AND 0xff and bar and assign result to bar
0xff &amp;=&gt; bar;

// bitwise OR 0xff and bar and assign result to bar
0xff |=&gt; bar;</pre>
<p>That&#8217;s probably enough operator abuse for now.
</p>
<h2>+ - * / (arithmetic)
</h2>
<p>Can you add, subtract, multiply and divide? So can ChucK!
</p>
<pre>// divide (and assign)
16 / 4 =&gt; int four;

// multiply
2 * 2 =&gt; four;

// add
3 + 1 =&gt; four;

// subtract
93 - 89 =&gt; four;

//minus (negative) works as you'd expect it to
-4 +=&gt; foo;

 </pre>
<h2>Casting
</h2>
<p>ChucK implicitly casts int values to &#64258;oat when &#64258;oat is expected, but not the other around. The latter could result in a loss of information and requires an explicit cast.
</p>
<pre>// adding float and int produces a float
9.1 + 2 =&gt; float result;

// however, going from float to int requires cast
4.8 $ int =&gt; int foo; // foo == 4

// this function expects two floats
Math.rand2f( 30.0, 1000.0 );

// this is ok because of implicit cast
Math.rand2f( 30, 1000 ); </pre>
<h2>% (modulo)
</h2>
<p>The modulo operator % computes the remainder after division for the primitives int, float, dur and time.
</p>
<pre>// 7 mod 4 (should yield 3)
7 % 4 =&gt; int result;

// 7.3 mod 3.2 floating point mod (should yield .9)
7.3 % 3.2 =&gt; float resultf;

// duration mod
5::second % 2::second =&gt; dur foo;

// time/duration mod
now % 5::second =&gt; dur bar;</pre>
<p>The latter (time/duration mod) is one of many ways to dynamically synchronize timing in shreds. the examples otf 01.ck through otf 07.ck (see under examples) make use of this to on-the-&#64258;y syn- chronize its various parts, no matter when each shred is added to the virtual machine:
</p>
<pre>// define period (agreed upon by several shreds)
.5::second =&gt; dur T;

// compute the remainder of the current period ...
// and advance time by that amount
T - (now % T) =&gt; now;

// when we reach this point, we are synchronized to T period boundary
// the rest of the code
// ... </pre>
<p>This is one of many ways to compute and reason about time in ChucK. The appropriate solution(s) in each case depends on the intended functionality. Have fun!
</p>
<h2>&amp;&amp; || <code>= </code> &lt;= &gt; &gt;= ! (logic)
</h2>
<p>Logical operators - these need two operands with the exception of "!". The result is an integer value of 0 or 1.
</p>
<ul><li>&amp;&amp; : and</li>
  <li>|| : or</li>
  <li>== : equals</li>
  <li>!= : does not equal</li>
  <li>&gt; : greater than</li>
  <li>&gt;= : greater than or equal to</li>
  <li>&lt; : less than</li>
  <li>&lt;= : less than or equal to</li>
  <li>! : logical invert</li>
</ul><pre>// test some universal truths
if( 1 &lt;= 4 &amp;&amp; true )
&lt;&lt;&lt;"hooray!"&gt;&gt;&gt;;

// logical invert
if( !true == false )
&lt;&lt;&lt;"yes"&gt;&gt;&gt;; </pre>
<p>These operate on integers with 0 evaluating to false and anything else to true. Note that the reserved keywords "true" and "false" themselves evaluate to the integers 1 and 0, respectively
</p>
<h2>&gt;&gt; &lt;&lt; &amp; | &#710; (bitwise)
</h2>
<p>These are used on int values at the bit level, often for bit masking.
</p>
<ul><li>&gt;&gt; : shift bits right ( 8 &gt;&gt;1 = 4 )</li>
  <li>&lt;&lt; : shift bits left ( 8 &lt;&lt;1 = 16 )</li>
  <li>&amp; : bitwise AND</li>
  <li>| : bitwise OR</li>
  <li>&#710; : bitwise XOR</li>
  <li>~ : bitwise invert</li>
</ul><h2>++ - - (inc / dec)
</h2>
<p>Integer values may be incremented or decremented by appending the ++ or -- operator respectively, to variable names.
</p>
<pre>4 =&gt; int foo;
foo++; // foo is now 5
foo--; // foo is 4 again
</pre>
<p>we can also prepend the operators to the variable. When appended the value is changed after it's returned, when prepended it's first adjusted, then returned. For example;
</p>
<pre>4 =&gt; int foo;
&lt;&lt;&lt; foo++&gt;&gt;&gt; //will print 4 as the change is made after the print
&lt;&lt;&lt;++foo&gt;&gt;&gt;; //willprint 6 as the second change is made before the second print
</pre>
<p>In case of doubt it's probably safer to make the change as a separate command, instead of as a part of a larger instruction.
</p>
<h2>@
</h2>
<p> The @ operator creates a named reference to a object of a given type without instantiating it. Later on a object isntance may be assigned to the reference (see below)
</p>
<pre>//let's create a reference to a gain
Gain @ mixer;
</pre>
<h2>new
</h2>
<p>The "new" keyword instantiates a new, nameless, object of the provided type. It may then be assigned to a named reference, appended to a array or returned from a function.
  <br></p>
<pre>// instantiate object and assign it to a reference
new Object @=&gt; Object @ bar;

//function that returns a new object
fun Gain gainMaker()
{
  return new Gain;
}

//use this to create a Gain to assign a instance to the reference we create above
gainMaker() @=&gt; mixer;

</pre>

</body></html>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

