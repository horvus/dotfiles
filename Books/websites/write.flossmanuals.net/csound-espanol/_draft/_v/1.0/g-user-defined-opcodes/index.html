
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: G-User-Defined-Opcodes / CSOUND Español</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for CSOUND Español" href="/feeds/rss/book/csound-espanol/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for CSOUND Español" href="/feeds/atom/book/csound-espanol/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter G. USER DEFINED OPCODES" href="/feeds/rss/chapter/csound-espanol/csound-espanol/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter G. USER DEFINED OPCODES" href="/feeds/atom/chapter/csound-espanol/csound-espanol/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/csound-espanol/_draft/_v/1.0/g-user-defined-opcodes/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>CSOUND Español</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><b>INTRODUCCIÓN</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/preface/">PREFACIO</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/how-to-use-this-manual/">CÓMO USAR ESTE MANUAL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/on-this-release/">ACERCA DE ESTE LANZAMIENTO</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/credits/">CRÉDITOS</a></li>
    
   
    
      <li><b>01 CUESTIONES BÁSICAS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-digital-audio/">A. AUDIO DIGITAL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-pitch-and-frequency/">B. ALTURA Y FRECUENCIA</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-intensities/">C. INTENSIDADES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-random/">D. ALEATORIEDAD</a></li>
    
   
    
      <li><b>02 INICIO RÁPIDO</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-make-csound-run/">A. CORRIENDO CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-csound-syntax/">B. SINTÁXIS DE CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-configuring-midi/">C. CONFIGURACIÓN MIDI</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-live-audio/">D. AUDIO EN VIVO</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-rendering-to-file/">E. SALIDA A UN ARCHIVO</a></li>
    
   
    
      <li><b>03 EL LENGUAJE DE CSOUND</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-initialization-and-performance-pass/">A. PASADAS DE INICIALIZACIÓN Y EJECUCIÓN</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-local-and-global-variables/">B. LOCAL AND GLOBAL VARIABLES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-control-structures/">C. CONTROL STRUCTURES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-function-tables/">D. FUNCTION TABLES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-arrays/">E. ARRAYS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-live-events/">F. LIVE EVENTS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-user-defined-opcodes/">G. USER DEFINED OPCODES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-macros/">H. MACROS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/i-functional-syntax/">I. FUNCTIONAL SYNTAX</a></li>
    
   
    
      <li><b>04 SOUND SYNTHESIS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-additive-synthesis/">A. ADDITIVE SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-subtractive-synthesis/">B. SUBTRACTIVE SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-amplitude-and-ring-modulation/">C. AMPLITUDE AND RING MODULATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-frequency-modulation/">D. FREQUENCY MODULATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-waveshaping/">E. WAVESHAPING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-granular-synthesis/">F. GRANULAR SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-physical-modelling/">G. PHYSICAL MODELLING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-scanned-synthesis/">H. SCANNED SYNTHESIS</a></li>
    
   
    
      <li><b>05 SOUND MODIFICATION</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-envelopes/">A. ENVELOPES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-panning-and-spatialization/">B. PANNING AND SPATIALIZATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-filters/">C. FILTERS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-delay-and-feedback/">D. DELAY AND FEEDBACK</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-reverberation/">E. REVERBERATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-am-rm-waveshaping/">F. AM / RM / WAVESHAPING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-granular-synthesis/">G. GRANULAR SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-convolution/">H. CONVOLUTION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/i-fourier-analysis-spectral-processing/">I. FOURIER ANALYSIS / SPECTRAL PROCESSING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/k-ats-resynthesis/">K. ATS RESYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/l-amplitude-and-pitch-tracking/">L. AMPLITUDE AND PITCH TRACKING</a></li>
    
   
    
      <li><b>06 SAMPLES</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-record-and-play-soundfiles/">A. RECORD AND PLAY SOUNDFILES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-record-and-play-buffers/">B. RECORD AND PLAY BUFFERS</a></li>
    
   
    
      <li><b>07 MIDI</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-receiving-events-by-midiin/">A. RECEIVING EVENTS BY MIDIIN</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-triggering-instrument-instances/">B. TRIGGERING INSTRUMENT INSTANCES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-working-with-controllers/">C. WORKING WITH CONTROLLERS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-reading-midi-files/">D. READING MIDI FILES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-midi-output/">E. MIDI OUTPUT</a></li>
    
   
    
      <li><b>08 OTHER COMMUNICATION</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-open-sound-control/">A. OPEN SOUND CONTROL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-csound-and-arduino/">B. CSOUND AND ARDUINO</a></li>
    
   
    
      <li><b>09 CSOUND IN OTHER APPLICATIONS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-csound-in-pd/">A. CSOUND IN PD</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-csound-in-maxmsp/">B. CSOUND IN MAXMSP</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-csound-in-ableton-live/">C. CSOUND IN ABLETON LIVE</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-csound-as-a-vst-plugin/">D. CSOUND AS A VST PLUGIN</a></li>
    
   
    
      <li><b>10 CSOUND FRONTENDS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/csoundqt/">CSOUNDQT</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/cabbage/">CABBAGE</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/blue/">BLUE</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/winxound/">WINXOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/csound-via-terminal/">CSOUND VIA TERMINAL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/web-based-csound/">WEB BASED CSOUND</a></li>
    
   
    
      <li><b>11 CSOUND UTILITIES</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/csound-utilities/">CSOUND UTILITIES</a></li>
    
   
    
      <li><b>12 CSOUND AND OTHER PROGRAMMING LANGUAGES</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-the-csound-api/">A. THE CSOUND API</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-python-inside-csound/">B. PYTHON INSIDE CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-python-in-csoundqt/">C. PYTHON IN CSOUNDQT</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-lua-in-csound/">D. LUA IN CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-csound-in-ios/">E. CSOUND IN iOS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-csound-on-android/">F. CSOUND ON ANDROID</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-csound-and-haskell/">G. CSOUND AND HASKELL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-csound-and-html/">H. CSOUND AND HTML</a></li>
    
   
    
      <li><b>13 EXTENDING CSOUND</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/extending-csound/">EXTENDING CSOUND</a></li>
    
   
    
      <li><b>OPCODE GUIDE</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/overview/">OVERVIEW</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/signal-processing-i/">SIGNAL PROCESSING I</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/signal-processing-ii/">SIGNAL PROCESSING II</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/data/">DATA</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/realtime-interaction/">REALTIME INTERACTION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/instrument-control/">INSTRUMENT CONTROL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/maths-pythonsystem-plugins/">MATHS, PYTHON/SYSTEM, PLUGINS</a></li>
    
   
    
      <li><b>APPENDIX</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/methods-of-writing-csound-scores/">METHODS OF WRITING CSOUND SCORES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/glossary/">GLOSSARY</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/links/">LINKS</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <div id="yass_top_edge_dummy" style="width: 1px; height: 1px; padding: 0px; margin: -9px 0px 0px; border-width: 0px; display: block;">&nbsp;</div>
<div id="yass_top_edge" style="background-image: url('chrome://yass/content/edgebgtop.png'); background-attachment: scroll; background-position: center bottom; padding: 0px; margin: 0px 0px 0px -8px; border-width: 0px; height: 0px; display: block; width: 1px;">&nbsp;</div>
<p style="margin-top: 8px;">Csound: Userdefinedopcodes</p>
<h1>USER DEFINED OPCODES</h1>
<p>Opcodes are the core units of everything that Csound does. They are like little machines that do a job, and programming is akin to connecting these little machines to perform a larger job. An opcode usually has something which goes into it: the inputs or arguments, and usually it has something which comes out of it: the output which is stored in one or more variables. Opcodes are written in the programming language C (that is where the name "Csound" comes from). If you want to create a new opcode in Csound, you must write it in C. How to do this is described in the Extending Csound chapter of this manual, and is also described in the relevant chapter of the Canonical Csound Reference Manual.</p>
<p>Opcodes son las unidades centrales de todo lo que Csound hace. Son como peque&ntilde;as m&aacute;quinas que hacen un trabajo, y la programaci&oacute;n es similar a conectar estas peque&ntilde;as m&aacute;quinas para realizar un trabajo m&aacute;s grande. Un opcode suele tener algo que entra en &eacute;l: las entradas o argumentos, y por lo general tiene algo que sale de ella: la salida que se almacena en una o m&aacute;s variables. Los c&oacute;digos de operaci&oacute;n se escriben en el lenguaje de programaci&oacute;n C (de donde proviene el nombre Csound). Si desea crear un nuevo c&oacute;digo de operaci&oacute;n en Csound, debe escribirlo en C. C&oacute;mo hacerlo se describe en el cap&iacute;tulo Extending Csound de este manual y tambi&eacute;n se describe en el cap&iacute;tulo correspondiente del Canonical Csound Reference Manual.</p>
<p>&nbsp;</p>
<p>There is, however, a way of writing your own opcodes in the Csound Language itself. The opcodes which are written in this way, are called User Defined Opcodes or "UDO"s. A UDO behaves in the same way as a standard opcode: it has input arguments, and usually one or more output variables. They run at i-time or at k-time. You use them as part of the Csound Language after you have defined and loaded them.</p>
<p>Hay, sin embargo, una manera de escribir sus propios opcodes en el propio lenguaje Csound. Los opcodes que se escriben de esta forma, se llaman Opcodes o UDOs definidos por el usuario. Un UDO se comporta de la misma manera que un c&oacute;digo de operaci&oacute;n est&aacute;ndar: tiene argumentos de entrada, y generalmente una o m&aacute;s variables de salida. Funcionan en el tiempo-i o en el k-tiempo. Los usa como parte del lenguaje Csound despu&eacute;s de haberlos definido y cargado.</p>
<p>&nbsp;</p>
<p>User Defined Opcodes have many valuable properties. They make your instrument code clearer because they allow you to create abstractions of blocks of code. Once a UDO has been defined it can be recalled and repeated many times within an orchestra, each repetition requiring only a single line of code. UDOs allow you to build up your own library of functions you need and return to frequently in your work. In this way, you build your own Csound dialect within the Csound Language. UDOs also represent a convenient format with which to share your work in Csound with other users.</p>
<p>Las Opcodes definidas por el usuario tienen muchas propiedades valiosas. Hacen que su c&oacute;digo de instrumento sea m&aacute;s claro porque le permiten crear abstracciones de bloques de c&oacute;digo. Una vez que se ha definido un UDO, puede ser recordado y repetido muchas veces dentro de una orquesta, cada repetici&oacute;n requiere solo una sola l&iacute;nea de c&oacute;digo. UDOs le permiten construir su propia biblioteca de funciones que necesita y volver a con frecuencia en su trabajo. De esta manera, usted construye su propio dialecto de Csound dentro del lenguaje Csound. UDOs tambi&eacute;n representan un formato conveniente con el que compartir su trabajo en Csound con otros usuarios.</p>
<p>&nbsp;</p>
<p>This chapter explains, initially with a very basic example, how you can build your own UDOs, and what options they offer. Following this, the practice of loading UDOs in your .csd file is shown, followed by some tips in regard to some unique capabilities of UDOs. Before the "Links And Related Opcodes" section at the end, some examples are shown for different User Defined Opcode definitions and applications.</p>
<p>Este cap&iacute;tulo explica, inicialmente con un ejemplo muy b&aacute;sico, c&oacute;mo puede construir sus propios UDO y qu&eacute; opciones ofrecen. Despu&eacute;s de esto, se muestra la pr&aacute;ctica de cargar UDOs en su archivo .csd, seguido de algunos consejos con respecto a algunas capacidades &uacute;nicas de UDOs. Antes de la secci&oacute;n Enlaces y Opcodes relacionados al final, se muestran algunos ejemplos para diferentes definiciones y aplicaciones de Opcode definidos por el usuario.</p>
<p>&nbsp;</p>
<p>If you want to write a User Defined Opcode in Csound6 which uses arrays, have a look at the end of chapter 03E to see their usage and naming conventions.</p>
<p>Si desea escribir un Opcode definido por el usuario en Csound6 que utiliza matrices, eche un vistazo al final del cap&iacute;tulo 03E para ver su uso y las convenciones de nomenclatura.</p>
<p>&nbsp;</p>
<p>Transforming Csound Instrument Code To A User Defined Opcode</p>
<p>Writing a User Defined Opcode is actually very easy and straightforward. It mainly means to extract a portion of usual Csound instrument code, and put it in the frame of a UDO. Let's start with the instrument code:</p>
<p>Escribir un c&oacute;digo de usuario definido por el usuario es en realidad muy f&aacute;cil y sencillo. Significa principalmente extraer una porci&oacute;n del c&oacute;digo de instrumento habitual de Csound, y ponerlo en el marco de un UDO. Comencemos con el c&oacute;digo del instrumento:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G01_Pre_UDO.csd</strong></em>&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

giSine    ftgen     0, 0, 2^10, 10, 1
          seed      0

  instr 1
aDel      init      0; initialize delay signal
iFb       =         .7; feedback multiplier
aSnd      rand      .2; white noise
kdB       randomi   -18, -6, .4; random movement between -18 and -6
aSnd      =         aSnd * ampdb(kdB); applied as dB to noise
kFiltFq   randomi   100, 1000, 1; random movement between 100 and 1000
aFilt     reson    aSnd, kFiltFq, kFiltFq/5; applied as filter center frequency
aFilt     balance   aFilt, aSnd; bring aFilt to the volume of aSnd
aDelTm    randomi   .1, .8, .2; random movement between .1 and .8 as delay time
aDel      vdelayx   aFilt + iFb*aDel, aDelTm, 1, 128; variable delay
kdbFilt   randomi   -12, 0, 1; two random movements between -12 and 0 (dB) ...
kdbDel    randomi   -12, 0, 1; ... for the filtered and the delayed signal
aOut      =         aFilt*ampdb(kdbFilt) + aDel*ampdb(kdbDel); mix it
          outs      aOut, aOut
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 60
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>This is a filtered noise, and its delay, which is fed back again into the delay line at a certain ratio iFb. The filter is moving as kFiltFq randomly between 100 and 1000 Hz. The volume of the filtered noise is moving as kdB randomly between -18 dB and -6 dB. The delay time moves between 0.1 and 0.8 seconds, and then both signals are mixed together.</p>
<p>Se trata de un ruido filtrado, y su retardo, que se devuelve de nuevo a la l&iacute;nea de retardo con una determinada relaci&oacute;n iFb. El filtro se mueve como kFiltFq aleatoriamente entre 100 y 1000 Hz. El volumen del ruido filtrado se mueve como kdB aleatoriamente entre -18 dB y -6 dB. El tiempo de retardo se mueve entre 0,1 y 0,8 segundos, y luego ambas se&ntilde;ales se mezclan entre s&iacute;.</p>
<p>&nbsp;</p>
<p>Basic Example</p>
<p>If this signal processing unit is to be transformed into a User Defined Opcode, the first question is about the extend of the code that will be encapsulated: where the UDO code will begin and end? The first solution could be a radical, and possibly bad, approach: to transform the whole instrument into a UDO.</p>
<p>Si esta unidad de procesamiento de se&ntilde;ales se va a transformar en un Opcode definido por el usuario, la primera pregunta es acerca de la extensi&oacute;n del c&oacute;digo que se encapsular&aacute;: &iquest;d&oacute;nde comenzar&aacute; y terminar&aacute; el c&oacute;digo UDO? La primera soluci&oacute;n podr&iacute;a ser un enfoque radical, y posiblemente malo: transformar todo el instrumento en un UDO.</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G02_All_to_UDO.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

giSine    ftgen     0, 0, 2^10, 10, 1
          seed      0

  opcode FiltFb, 0, 0
aDel      init      0; initialize delay signal
iFb       =         .7; feedback multiplier
aSnd      rand      .2; white noise
kdB       randomi   -18, -6, .4; random movement between -18 and -6
aSnd      =         aSnd * ampdb(kdB); applied as dB to noise
kFiltFq   randomi   100, 1000, 1; random movement between 100 and 1000
aFilt     reson    aSnd, kFiltFq, kFiltFq/5; applied as filter center frequency
aFilt     balance   aFilt, aSnd; bring aFilt to the volume of aSnd
aDelTm    randomi   .1, .8, .2; random movement between .1 and .8 as delay time
aDel      vdelayx   aFilt + iFb*aDel, aDelTm, 1, 128; variable delay
kdbFilt   randomi   -12, 0, 1; two random movements between -12 and 0 (dB) ...
kdbDel    randomi   -12, 0, 1; ... for the filtered and the delayed signal
aOut      =         aFilt*ampdb(kdbFilt) + aDel*ampdb(kdbDel); mix it
          outs      aOut, aOut
  endop

instr 1
          FiltFb
endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 60
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;&nbsp;
</pre>
<p>Before we continue the discussion about the quality of this transformation, we should have a look at the syntax first. The general syntax for a User Defined Opcode is:</p>
<p>Antes de continuar la discusi&oacute;n sobre la calidad de esta transformaci&oacute;n, deber&iacute;amos echar un vistazo primero a la sintaxis. La sintaxis general para un Opcode definido por el usuario es:</p>
<p>&nbsp;</p>
<p>opcode name, outtypes, intypes</p>
<pre>...
endop
</pre>
<p>Here, the name of the UDO is FiltFb. You are free to use any name, but it is suggested that you begin the name with a capital letter. By doing this, you avoid duplicating the name of most of the pre-existing opcodes1 which normally start with a lower case letter. As we have no input arguments and no output arguments for this first version of FiltFb, both outtypes and intypes are set to zero. Similar to the instr ... endin block of a normal instrument definition, for a UDO the opcode ... endop keywords begin and end the UDO definition block. In the instrument, the UDO is called like a normal opcode by using its name, and in the same line the input arguments are listed on the right and the output arguments on the left. In the previous a example, 'FiltFb' has no input and output arguments so it is called by just using its name:</p>
<p>Aqu&iacute;, el nombre de la UDO es FiltFb. Usted es libre de usar cualquier nombre, pero se sugiere que comience el nombre con una letra may&uacute;scula. Al hacer esto, evita duplicar el nombre de la mayor&iacute;a de los opcodes1 preexistentes que normalmente comienzan con una letra min&uacute;scula. Como no tenemos argumentos de entrada ni argumentos de salida para esta primera versi&oacute;n de FiltFb, tanto outtypes como intypes se ponen a cero. Similar a la instr ... endin bloque de una definici&oacute;n de instrumento normal, para un UDO las palabras clave opcode ... endop comienzan y terminan el bloque de definici&oacute;n UDO. En el instrumento, el UDO se llama como un opcode normal usando su nombre, y en la misma l&iacute;nea los argumentos de entrada se enumeran a la derecha y los argumentos de salida a la izquierda. En el ejemplo anterior, FiltFb no tiene argumentos de entrada y salida, por lo que se llama simplemente usando su nombre:</p>
<p>instr 1</p>
<pre>          FiltFb
endin
</pre>
<p>Now - why is this UDO more or less useless? It achieves nothing, when compared to the original non UDO version, and in fact looses some of the advantages of the instrument defined version. Firstly, it is not advisable to include this line in the UDO:</p>
<p>Ahora - &iquest;por qu&eacute; este UDO es m&aacute;s o menos in&uacute;til? No alcanza nada, en comparaci&oacute;n con la versi&oacute;n original no UDO, y de hecho pierde algunas de las ventajas de la versi&oacute;n definida por el instrumento. En primer lugar, no es aconsejable incluir esta l&iacute;nea en el UDO:</p>
<p>&nbsp;</p>
<p>outs aOut, aOut</p>
<p>This statement writes the audio signal aOut from inside the UDO to the output device. Imagine you want to change the output channels, or you want to add any signal modifier after the opcode. This would be impossible with this statement. So instead of including the 'outs' opcode, we give the FiltFb UDO an audio output:</p>
<p>Esta sentencia escribe la se&ntilde;al de audio aDa desde el interior del UDO al dispositivo de salida. Imagine que desea cambiar los canales de salida, o desea agregar cualquier modificador de se&ntilde;al despu&eacute;s del c&oacute;digo de operaci&oacute;n. Esto ser&iacute;a imposible con esta declaraci&oacute;n. As&iacute; que en lugar de incluir el opcode de salida, le damos al FiltFb UDO una salida de audio:</p>
<p>&nbsp;</p>
<p>xout aOut</p>
<p>The xout statement of a UDO definition works like the "outlets" in PD or Max, sending the result(s) of an opcode back to the caller instrument.</p>
<p>La sentencia xout de una definici&oacute;n UDO funciona como las salidas en PD o Max, enviando los resultados de un opcode al instrumento que llama.</p>
<p>&nbsp;</p>
<p>Now let us consider the UDO's input arguments, choose which processes should be carried out within the FiltFb unit, and what aspects would offer greater flexibility if controllable from outside the UDO. First, the aSnd parameter should not be restricted to a white noise with amplitude 0.2, but should be an input (like a "signal inlet" in PD/Max). This is implemented using the line:</p>
<p>Ahora consideremos los argumentos de entrada de UDOs, elijamos qu&eacute; procesos se deben llevar a cabo dentro de la unidad de FiltFb, y qu&eacute; aspectos ofrecer&iacute;a una mayor flexibilidad si es controlable desde fuera del UDO. En primer lugar, el par&aacute;metro aSnd no debe limitarse a un ruido blanco con amplitud 0,2, sino que debe ser una entrada (como una entrada de se&ntilde;al en PD / Max). Esto se implementa usando la l&iacute;nea:</p>
<p>&nbsp;</p>
<p>aSnd xin</p>
<p>Both the output and the input type must be declared in the first line of the UDO definition, whether they are i-, k- or a-variables. So instead of "opcode FiltFb, 0, 0" the statement has changed now to "opcode FiltFb, a, a", because we have both input and output as a-variable.</p>
<p>Tanto la salida como el tipo de entrada deben declararse en la primera l&iacute;nea de la definici&oacute;n de UDO, ya sean variables i, k o a. As&iacute; que en lugar de opcode FiltFb, 0, 0 la sentencia ha cambiado ahora a opcode FiltFb, a, a, porque tenemos entrada y salida como una variable.</p>
<p>The UDO is now much more flexible and logical: it takes any audio input, it performs the filtered delay and feedback processing, and returns the result as another audio signal. In the next example, instrument 1 does exactly the same as before. Instrument 2 has live input instead.</p>
<p>El UDO es ahora mucho m&aacute;s flexible y l&oacute;gico: toma cualquier entrada de audio, realiza el procesamiento de retardo y retroalimentaci&oacute;n filtrada y devuelve el resultado como otra se&ntilde;al de audio. En el ejemplo siguiente, el instrumento 1 hace exactamente lo mismo que antes. El instrumento 2 tiene entrada en vivo.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G03_UDO_more_flex.csd</strong></em>&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

giSine    ftgen     0, 0, 2^10, 10, 1
          seed      0

  opcode FiltFb, a, a
aSnd      xin
aDel      init      0; initialize delay signal
iFb       =         .7; feedback multiplier
kdB       randomi   -18, -6, .4; random movement between -18 and -6
aSnd      =         aSnd * ampdb(kdB); applied as dB to noise
kFiltFq   randomi   100, 1000, 1; random movement between 100 and 1000
aFilt     reson    aSnd, kFiltFq, kFiltFq/5; applied as filter center frequency
aFilt     balance   aFilt, aSnd; bring aFilt to the volume of aSnd
aDelTm    randomi   .1, .8, .2; random movement between .1 and .8 as delay time
aDel      vdelayx   aFilt + iFb*aDel, aDelTm, 1, 128; variable delay
kdbFilt   randomi   -12, 0, 1; two random movements between -12 and 0 (dB) ...
kdbDel    randomi   -12, 0, 1; ... for the filtered and the delayed signal
aOut      =         aFilt*ampdb(kdbFilt) + aDel*ampdb(kdbDel); mix it
          xout      aOut
  endop

  instr 1; white noise input
aSnd      rand      .2
aOut      FiltFb    aSnd
          outs      aOut, aOut
  endin

  instr 2; live audio input
aSnd      inch      1; input from channel 1
aOut      FiltFb    aSnd
          outs      aOut, aOut
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 60 ;change to i 2 for live audio input
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h3>Is There an Optimal Design for a User Defined Opcode?</h3>
<p>Is this now the optimal version of the FiltFb User Defined Opcode? Obviously there are other parts of the opcode definiton which could be controllable from outside: the feedback multiplier iFb, the random movement of the input signal kdB, the random movement of the filter frequency kFiltFq, and the random movements of the output mix kdbSnd and kdbDel. Is it better to put them outside of the opcode definition, or is it better to leave them inside?</p>
<p>&iquest;Es esta la versi&oacute;n &oacute;ptima del Optcode Definido por el Usuario de FiltFb? Evidentemente hay otras partes de la definici&oacute;n del c&oacute;digo de operaci&oacute;n que podr&iacute;an ser controlables desde fuera: el multiplicador de realimentaci&oacute;n iFb, el movimiento aleatorio de la se&ntilde;al de entrada kdB, el movimiento aleatorio de la frecuencia de filtro kFiltFq y los movimientos aleatorios de la mezcla de salida kdbSnd y kdbDel . &iquest;Es mejor ponerlos fuera de la definici&oacute;n de c&oacute;digo de operaci&oacute;n, o es mejor dejarlos dentro?</p>
<p>&nbsp;</p>
<p>There is no general answer. It depends on the degree of abstraction you desire or you prefer to relinquish. If you are working on a piece for which all of the parameters settings are already defined as required in the UDO, then control from the caller instrument may not be necessary . The advantage of minimizing the number of input and output arguments is the simplification in using the UDO. The more flexibility you require from your UDO however, the greater the number of input arguments that will be required. Providing more control is better for a later reusability, but may be unnecessarily complicated.</p>
<p>No hay una respuesta general. Depende del grado de abstracci&oacute;n que usted desea o prefiere renunciar. Si est&aacute; trabajando en una pieza para la cual todos los ajustes de los par&aacute;metros ya est&aacute;n definidos como se requiere en la UDO, entonces el control desde el instrumento que llama no ser&aacute; necesario. La ventaja de minimizar el n&uacute;mero de argumentos de entrada y salida es la simplificaci&oacute;n en el uso de la UDO. Cuanto mayor sea la flexibilidad que necesite de su UDO sin embargo, mayor ser&aacute; el n&uacute;mero de argumentos de entrada que ser&aacute; necesario. Proporcionar m&aacute;s control es mejor para una reutilizaci&oacute;n posterior, pero puede ser innecesariamente complicado.</p>
<p>Perhaps it is the best solution to have one abstract definition which performs one task, and to create a derivative - also as UDO - fine tuned for the particular project you are working on. The final example demonstrates the definition of a general and more abstract UDO FiltFb, and its various applications: instrument 1 defines the specifications in the instrument itself; instrument 2 uses a second UDO Opus123_FiltFb for this purpose; instrument 3 sets the general FiltFb in a new context of two varying delay lines with a buzz sound as input signal.</p>
<p>Quiz&aacute;s sea la mejor soluci&oacute;n tener una definici&oacute;n abstracta que realice una tarea, y crear un derivado - tambi&eacute;n como UDO - afinado para el proyecto particular que usted est&aacute; trabajando encendido. El &uacute;ltimo ejemplo demuestra la definici&oacute;n de un UDO FiltFb general y m&aacute;s abstracto, y sus diversas aplicaciones: el instrumento 1 define las especificaciones en el propio instrumento; El instrumento 2 utiliza un segundo UDO Opus123_FiltFb para este prop&oacute;sito; El instrumento 3 ajusta el FiltFb general en un nuevo contexto de dos l&iacute;neas de retardo variables con un sonido de zumbido como se&ntilde;al de entrada.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G04_UDO_calls_UDO.csd</strong></em>&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

giSine    ftgen     0, 0, 2^10, 10, 1
          seed      0

  opcode FiltFb, aa, akkkia
; -- DELAY AND FEEDBACK OF A BAND FILTERED INPUT SIGNAL --
;input: aSnd = input sound
; kFb = feedback multiplier (0-1)
; kFiltFq: center frequency for the reson band filter (Hz)
; kQ = band width of reson filter as kFiltFq/kQ
; iMaxDel = maximum delay time in seconds
; aDelTm = delay time
;output: aFilt = filtered and balanced aSnd
; aDel = delay and feedback of aFilt

aSnd, kFb, kFiltFq, kQ, iMaxDel, aDelTm xin
aDel      init      0
aFilt     reson     aSnd, kFiltFq, kFiltFq/kQ
aFilt     balance   aFilt, aSnd
aDel      vdelayx   aFilt + kFb*aDel, aDelTm, iMaxDel, 128; variable delay
          xout      aFilt, aDel
  endop

  opcode Opus123_FiltFb, a, a
;;the udo FiltFb here in my opus 123 :)
;input = aSnd
;output = filtered and delayed aSnd in different mixtures
aSnd      xin
kdB       randomi   -18, -6, .4; random movement between -18 and -6
aSnd      =         aSnd * ampdb(kdB); applied as dB to noise
kFiltFq   randomi   100, 1000, 1; random movement between 100 and 1000
iQ        =         5
iFb       =         .7; feedback multiplier
aDelTm    randomi   .1, .8, .2; random movement between .1 and .8 as delay time
aFilt, aDel FiltFb    aSnd, iFb, kFiltFq, iQ, 1, aDelTm
kdbFilt   randomi   -12, 0, 1; two random movements between -12 and 0 (dB) ...
kdbDel    randomi   -12, 0, 1; ... for the noise and the delay signal
aOut      =         aFilt*ampdb(kdbFilt) + aDel*ampdb(kdbDel); mix it
          xout      aOut
  endop

  instr 1; well known context as instrument
aSnd      rand      .2
kdB       randomi   -18, -6, .4; random movement between -18 and -6
aSnd      =         aSnd * ampdb(kdB); applied as dB to noise
kFiltFq   randomi   100, 1000, 1; random movement between 100 and 1000
iQ        =         5
iFb       =         .7; feedback multiplier
aDelTm    randomi   .1, .8, .2; random movement between .1 and .8 as delay time
aFilt, aDel FiltFb    aSnd, iFb, kFiltFq, iQ, 1, aDelTm
kdbFilt   randomi   -12, 0, 1; two random movements between -12 and 0 (dB) ...
kdbDel    randomi   -12, 0, 1; ... for the noise and the delay signal
aOut      =         aFilt*ampdb(kdbFilt) + aDel*ampdb(kdbDel); mix it
aOut      linen     aOut, .1, p3, 3
          outs      aOut, aOut
  endin

  instr 2; well known context UDO which embeds another UDO
aSnd      rand      .2
aOut      Opus123_FiltFb aSnd
aOut      linen     aOut, .1, p3, 3
          outs      aOut, aOut
  endin

  instr 3; other context: two delay lines with buzz
kFreq     randomh   200, 400, .08; frequency for buzzer
aSnd      buzz      .2, kFreq, 100, giSine; buzzer as aSnd
kFiltFq   randomi   100, 1000, .2; center frequency
aDelTm1   randomi   .1, .8, .2; time for first delay line
aDelTm2   randomi   .1, .8, .2; time for second delay line
kFb1      randomi   .8, 1, .1; feedback for first delay line
kFb2      randomi   .8, 1, .1; feedback for second delay line
a0, aDel1 FiltFb    aSnd, kFb1, kFiltFq, 1, 1, aDelTm1; delay signal 1
a0, aDel2 FiltFb    aSnd, kFb2, kFiltFq, 1, 1, aDelTm2; delay signal 2
aDel1     linen     aDel1, .1, p3, 3
aDel2     linen     aDel2, .1, p3, 3
          outs      aDel1, aDel2
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 30
i 2 31 30
i 3 62 120
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>The good thing about the different possibilities of writing a more specified UDO, or a more generalized: You needn't decide this at the beginning of your work. Just start with any formulation you find useful in a certain situation. If you continue and see that you should have some more parameters accessible, it should be easy to rewrite the UDO. Just be careful not to confuse the different versions you create. Use names like Faulty1, Faulty2 etc. instead of overwriting Faulty. Making use of extensive commenting when you initially create the UDO will make it easier to adapt the UDO at a later time. What are the inputs (including the measurement units they use such as Hertz or seconds)? What are the outputs? - How you do this, is up to you and depends on your style and your preference.</p>
<p>Lo bueno de las diferentes posibilidades de escribir un UDO m&aacute;s espec&iacute;fico, o un m&aacute;s generalizado: No necesitas decidir esto al principio de tu trabajo. Comience con cualquier formulaci&oacute;n que considere &uacute;til en una situaci&oacute;n determinada. Si contin&uacute;a y ve que deber&iacute;a tener algunos par&aacute;metros m&aacute;s accesibles, deber&iacute;a ser f&aacute;cil de reescribir el UDO. S&oacute;lo tenga cuidado de no confundir las diferentes versiones que cree. Utilice nombres como Faulty1, Faulty2 etc. en lugar de sobrescribir Faulty. Haciendo uso de comentarios extensos al crear inicialmente el UDO, ser&aacute; m&aacute;s f&aacute;cil adaptar el UDO en un momento posterior. &iquest;Cu&aacute;les son las entradas (incluyendo las unidades de medida que usan como Hertz o segundos)? &iquest;Cu&aacute;les son las salidas? - &iquest;C&oacute;mo hacer esto, depende de usted y depende de su estilo y su preferencia.</p>
<p>&nbsp;</p>
<p>How to Use the User Defined Opcode Facility in Practice</p>
<p>In this section, we will address the main points of using UDOs: what you must bear in mind when loading them, what special features they offer, what restrictions you must be aware of and how you can build your own language with them.</p>
<p>En esta secci&oacute;n, abordaremos los principales puntos del uso de UDO: lo que debe tener en cuenta al cargarlos, qu&eacute; caracter&iacute;sticas especiales ofrecen, qu&eacute; restricciones debe tener en cuenta y c&oacute;mo puede construir su propio idioma con ellos.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Loading User Defined Opcodes in the Orchestra Header</p>
<p>As can be seen from the examples above, User Defined Opcodes must be defined in the orchestra header (which is sometimes called "instrument 0").</p>
<p>Como se puede ver en los ejemplos anteriores, las Opcodes definidas por el usuario deben definirse en el encabezado de la orquesta (que a veces se denomina instrumento 0).</p>
<p>You can load as many User Defined Opcodes into a Csound orchestra as you wish. As long as they do not depend on each other, their order is arbitrarily. If UDO Opus123_FiltFb uses the UDO FiltFb for its definition (see the example above), you must first load FiltFb, and then Opus123_FiltFb. If not, you will get an error like this:</p>
<p>Puede cargar tantas Opcodes definidas por el usuario en una orquesta Csound como desee. Mientras no dependan el uno del otro, su orden es arbitraria. Si UDO Opus123_FiltFb utiliza la UDO FiltFb para su definici&oacute;n (vea el ejemplo anterior), primero debe cargar FiltFb, y luego Opus123_FiltFb. Si no es as&iacute;, obtendr&aacute; un error como este:</p>
<p>&nbsp;</p>
<p>orch compiler:</p>
<pre>	opcode	Opus123_FiltFb	a	a	
error:  no legal opcode, line 25:
aFilt, aDel FiltFb    aSnd, iFb, kFiltFq, iQ, 1, aDelTm
</pre>
<h3>Loading By An #include File</h3>
<p>Definitions of User Defined Opcodes can also be loaded into a .csd file by an "#include" statement. What you must do is the following:</p>
<p>Las definiciones de Opcodes definidos por el usuario tambi&eacute;n se pueden cargar en un archivo .csd</p>
<p>&nbsp;</p>
<p>Save your opcode definitions in a plain text file, for instance "MyOpcodes.txt".</p>
<p>Guarde sus definiciones de c&oacute;digo de operaci&oacute;n en un archivo de texto plano, por ejemplo MyOpcodes.txt.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>If this file is in the same directory as your .csd file, you can just call it by the statement:</p>
<p>Si este archivo se encuentra en el mismo directorio que el archivo .csd, s&oacute;lo puede llamarlo por la instrucci&oacute;n:</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre>#include "MyOpcodes.txt"
</pre>
<p>If "MyOpcodes.txt" is in a different directory, you must call it by the full path name, for instance: #include "/Users/me/Documents/Csound/UDO/MyOpcodes.txt"</p>
<p>Si MyOpcodes.txt est&aacute; en un directorio diferente, debe llamarlo por el nombre completo de la ruta de acceso, por ejemplo:</p>
<p>As always, make sure that the "#include" statement is the last one in the orchestra header, and that the logical order is accepted if one opcode depends on another.</p>
<p>Como siempre, aseg&uacute;rese de que el #include es la &uacute;ltima en el encabezado de la orquesta, y que el orden l&oacute;gico se acepta si un c&oacute;digo de operaci&oacute;n depende de otro.</p>
<p>&nbsp;</p>
<p>If you work with User Defined Opcodes a lot, and build up a collection of them, the #include feature allows you easily import several or all of them to your .csd file.</p>
<p>Si trabaja mucho con las Opcodes definidas por el usuario y crea una colecci&ograve;n de ellos, el #include le permite importar f&aacute;cilmente varios o todos ellos a su archivo .csd.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>The setksmps Feature</p>
<p>The ksmps assignment in the orchestra header cannot be changed during the performance of a .csd file. But in a User Defined Opcode you have the unique possibility of changing this value by a local assignment. If you use a setksmps statement in your UDO, you can have a locally smaller value for the number of samples per control cycle in the UDO. In the following example, the print statement in the UDO prints ten times compared to one time in the instrument, because ksmps in the UDO is 10 times smaller:</p>
<p>La asignaci&oacute;n de ksmps en el encabezado de orquesta no se puede cambiar durante la ejecuci&oacute;n de un archivo .csd. Pero en un Opcode definido por el usuario tiene la posibilidad &uacute;nica de cambiar este valor mediante una asignaci&oacute;n local. Si utiliza una sentencia setksmps en su UDO, puede tener un valor localmente menor para el n&uacute;mero de muestras por ciclo de control en el UDO. En el siguiente ejemplo, la declaraci&oacute;n de impresi&oacute;n en el UDO imprime diez veces en comparaci&oacute;n con una vez en el instrumento, porque ksmps en el UDO es 10 veces menor:</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G06_UDO_setksmps.csd</strong></em>&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 44100 ;very high because of printing

  opcode Faster, 0, 0
setksmps 4410 ;local ksmps is 1/10 of global ksmps
printks "UDO print!%n", 0
  endop

  instr 1
printks "Instr print!%n", 0 ;print each control period (once per second)
Faster ;print 10 times per second because of local ksmps
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 2
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p id="alexbreak">&nbsp;</p>
<h3>Default Arguments</h3>
<p>For i-time arguments, you can use a simple feature to set default values:</p>
<p>Para los argumentos de tiempo-i, puede utilizar una funci&oacute;n simple para establecer valores predeterminados:</p>
<p>"o" (instead of "i") defaults to 0</p>
<ul>
<li>"p" (instead of "i") defaults to 1</li>
<li>"j" (instead of "i") defaults to -1</li>
</ul>
<p>For k-time arguments, you can use since Csound 5.18 these default values:</p>
<p>Para los argumentos k-time, puede utilizar desde Csound 5.18 estos valores predeterminados:</p>
<p>&nbsp;</p>
<p>"O" (instead of "k") defaults to 0</p>
<ul>
<li>"P" (instead of "k") defaults to 1</li>
<li>"V" (instead of "k") defaults to 0.5</li>
</ul>
<p>So you can omit these arguments - in this case the default values will be used. If you give an input argument instead, the default value will be overwritten:</p>
<p>As&iacute; que puede omitir estos argumentos - en este caso los valores por defecto se utilizar&aacute;n. Si da un argumento de entrada, el valor por defecto ser&aacute; sobrescrito:</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G07_UDO_default_args.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz

  opcode Defaults, iii, opj
ia, ib, ic xin
xout ia, ib, ic
  endop

instr 1
ia, ib, ic Defaults
           print     ia, ib, ic
ia, ib, ic Defaults  10
           print     ia, ib, ic
ia, ib, ic Defaults  10, 100
           print     ia, ib, ic
ia, ib, ic Defaults  10, 100, 1000
           print     ia, ib, ic
endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 0
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h3>Recursive User Defined Opcodes</h3>
<p>Recursion means that a function can call itself. This is a feature which can be useful in many situations. Also User Defined Opcodes can be recursive. You can do many things with a recursive UDO which you cannot do in any other way; at least not in a simliarly simple way. This is an example of generating eight partials by a recursive UDO. See the last example in the next section for a more musical application of a recursive UDO.</p>
<p>Recursi&oacute;n significa que una funci&oacute;n puede llamarse a s&iacute; misma. Esta es una caracter&iacute;stica que puede ser &uacute;til en muchas situaciones. Tambi&eacute;n las Opcodes definidas por el usuario pueden ser recursivas. Puedes hacer muchas cosas con un UDO recursivo que no puedes hacer de ninguna otra manera; Al menos no de una manera sencillamente simple. Este es un ejemplo de generar ocho partiales por un UDO recursivo. Vea el &uacute;ltimo ejemplo en la siguiente secci&oacute;n para una aplicaci&oacute;n m&aacute;s musical de un UDO recursivo.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G08_Recursive_UDO.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

  opcode Recursion, a, iip
;input: frequency, number of partials, first partial (default=1)
ifreq, inparts, istart xin
iamp      =         1/inparts/istart ;decreasing amplitudes for higher partials
 if istart &lt; inparts then ;if inparts have not yet reached
acall     Recursion ifreq, inparts, istart+1 ;call another instance of this UDO
 endif
aout      oscils    iamp, ifreq*istart, 0 ;execute this partial
aout      =         aout + acall ;add the audio signals
          xout      aout
  endop

  instr 1
amix      Recursion 400, 8 ;8 partials with a base frequency of 400 Hz
aout      linen     amix, .01, p3, .1
          outs      aout, aout
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 1
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h2>Examples</h2>
<p>We will focus here on some examples which will hopefully show the wide range of User Defined Opcodes. Some of them are adaptions of examples from previous chapters about the Csound Syntax. Much more examples can be found in the User-Defined Opcode Database, editied by Steven Yi.</p>
<p>Nos centraremos aqu&iacute; en algunos ejemplos que esperamos mostrar la amplia gama de Opcodes definidos por el usuario. Algunos de ellos son adaptaciones de ejemplos de cap&iacute;tulos anteriores sobre la Sintaxis Csound. Pueden encontrarse muchos m&aacute;s ejemplos en la base de datos Opcode definida por el usuario, editada por Steven Yi.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Play A Mono Or Stereo Soundfile</p>
<p>Csound is often very strict and gives errors where other applications might 'turn a blind eye'. This is also the case if you read a soundfile using one of Csound's opcodes: soundin, diskin or diskin2. If your soundfile is mono, you must use the mono version, which has one audio signal as output. If your soundfile is stereo, you must use the stereo version, which outputs two audio signals. If you want a stereo output, but you happen to have a mono soundfile as input, you will get the error message:</p>
<p>Csound es a menudo muy estricto y da errores donde otras aplicaciones podr&iacute;an hacer la vista gorda. Este es tambi&eacute;n el caso si usted lee un archivo de sonido usando uno de Csounds opcodes: soundin, diskin o diskin2. Si su archivo de sonido es mono, debe usar la versi&oacute;n mono, que tiene una se&ntilde;al de audio como salida. Si su archivo de sonido es est&eacute;reo, debe utilizar la versi&oacute;n est&eacute;reo, que emite dos se&ntilde;ales de audio. Si desea una salida est&eacute;reo, pero tiene un archivo de sonido mono como entrada, obtendr&aacute; el mensaje de error:</p>
<p>INIT ERROR in ...: number of output args inconsistent with number</p>
<pre>of file channels
</pre>
<p>It may be more useful to have an opcode which works for both, mono and stereo files as input. This is a ideal job for a UDO. Two versions are possible: FilePlay1 returns always one audio signal (if the file is stereo it uses just the first channel), FilePlay2 returns always two audio signals (if the file is mono it duplicates this to both channels). We can use the default arguments to make this opcode behave exactly as diskin2:</p>
<p>Puede ser m&aacute;s &uacute;til tener un opcode que funcione tanto para archivos mono como est&eacute;reo como entrada. Este es un trabajo ideal para un UDO. Dos versiones son posibles: FilePlay1 devuelve siempre una se&ntilde;al de audio (si el archivo es est&eacute;reo usa s&oacute;lo el primer canal), FilePlay2 devuelve siempre dos se&ntilde;ales de audio (si el archivo es mono, se duplica esto a ambos canales). Podemos usar los argumentos por defecto para hacer que este c&oacute;digo de operaci&oacute;n se comporte exactamente como diskin2:</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G09_UDO_FilePlay.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

  opcode FilePlay1, a, Skoooooo
;gives mono output regardless your soundfile is mono or stereo
;(if stereo, just the first channel is used)
;see diskin2 page of the csound manual for information about the input arguments
Sfil, kspeed, iskip, iloop, iformat, iwsize, ibufsize, iskipinit xin
ichn      filenchnls Sfil
 if ichn == 1 then
aout      diskin2   Sfil, kspeed, iskip, iloop, iformat, iwsize,\
                    ibufsize, iskipinit
 else
aout, a0  diskin2   Sfil, kspeed, iskip, iloop, iformat, iwsize,\
                    ibufsize, iskipinit
 endif
          xout      aout
  endop

  opcode FilePlay2, aa, Skoooooo
;gives stereo output regardless your soundfile is mono or stereo
;see diskin2 page of the csound manual for information about the input arguments
Sfil, kspeed, iskip, iloop, iformat, iwsize, ibufsize, iskipinit xin
ichn      filenchnls Sfil
 if ichn == 1 then
aL        diskin2    Sfil, kspeed, iskip, iloop, iformat, iwsize,\
                     ibufsize, iskipinit
aR        =          aL
 else
aL, aR	    diskin2    Sfil, kspeed, iskip, iloop, iformat, iwsize,\
                      ibufsize, iskipinit
 endif
          xout       aL, aR
  endop

  instr 1
aMono     FilePlay1  "fox.wav", 1
          outs       aMono, aMono
  endin

  instr 2
aL, aR    FilePlay2  "fox.wav", 1
          outs       aL, aR
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 4
i 2 4 4
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h3>Change the Content of a Function Table</h3>
<p>In example 03C11_Table_random_dev.csd, a function table has been changed at performance time, once a second, by random deviations. This can be easily transformed to a User Defined Opcode. It takes the function table variable, a trigger signal, and the random deviation in percent as input. In each control cycle where the trigger signal is "1", the table values are read. The random deviation is applied, and the changed values are written again into the table. Here, the tab/tabw opcodes are used to make sure that also non-power-of-two tables can be used.</p>
<p>En el ejemplo 03C11_Table_random_dev.csd, una tabla de funciones ha sido cambiada en tiempo de ejecuci&oacute;n, una vez por segundo, por desviaciones aleatorias. Esto se puede transformar f&aacute;cilmente en un Opcode definido por el usuario. Se toma la variable de tabla de funciones, una se&ntilde;al de disparo y la desviaci&oacute;n aleatoria en porcentaje como entrada. En cada ciclo de control en el que la se&ntilde;al de disparo es 1, se leen los valores de la tabla. Se aplica la desviaci&oacute;n aleatoria y los valores cambiados se escriben de nuevo en la tabla. Aqu&iacute;, los opcodes tab / tabw se utilizan para asegurarse de que tambi&eacute;n se pueden usar tablas que no sean de potencia de dos.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G10_UDO_rand_dev.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 441
nchnls = 2
0dbfs = 1

giSine    ftgen     0, 0, 256, 10, 1; sine wave
          seed      0; each time different seed

  opcode TabDirtk, 0, ikk
;"dirties" a function table by applying random deviations at a k-rate trigger
;input: function table, trigger (1 = perform manipulation),
;deviation as percentage
ift, ktrig, kperc xin
 if ktrig == 1 then ;just work if you get a trigger signal
kndx      =         0
loop:
krand     random    -kperc/100, kperc/100
kval      tab       kndx, ift; read old value
knewval   =         kval + (kval * krand); calculate new value
          tabw      knewval, kndx, giSine; write new value
          loop_lt   kndx, 1, ftlen(ift), loop; loop construction
 endif
  endop

  instr 1
kTrig     metro     1, .00001 ;trigger signal once per second
          TabDirtk  giSine, kTrig, 10
aSig      poscil    .2, 400, giSine
          outs      aSig, aSig
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 10
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>Of course you can also change the content of a function table at init-time. The next example permutes a series of numbers randomly each time it is called. For this purpose, first the input function table iTabin is copied as iCopy. This is necessary because we do not want to change iTabin in any way. Next a random index in iCopy is created and the value at this location in iTabin is written at the beginning of iTabout, which contains the permuted results. At the end of this cycle, each value in iCopy which has a larger index than the one which has just been read, is shifted one position to the left. So now iCopy has become one position smaller - not in table size but in the number of values to read. This procedure is continued until all values from iCopy are reflected in iTabout:</p>
<p>Por supuesto, tambi&eacute;n puede cambiar el contenido de una tabla de funciones en init-time. El ejemplo siguiente permuta una serie de n&uacute;meros aleatoriamente cada vez que se llama. Para ello, primero se copia la funci&oacute;n de entrada iTabin como iCopy. Esto es necesario porque no queremos cambiar iTabin de ninguna manera. A continuaci&oacute;n se crea un &iacute;ndice aleatorio en iCopy y el valor en esta ubicaci&oacute;n en iTabin se escribe al principio de iTabout, que contiene los resultados permutados. Al final de este ciclo, cada valor en iCopy que tiene un &iacute;ndice mayor que el que acaba de ser le&iacute;do, se desplaza una posici&oacute;n hacia la izquierda. As&iacute; que ahora iCopy se ha convertido en una posici&oacute;n m&aacute;s peque&ntilde;a - no en el tama&ntilde;o de la tabla, sino en el n&uacute;mero de valores a leer. Este procedimiento se contin&uacute;a hasta que todos los valores de iCopy se reflejan en iTabout:</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G11_TabPermRnd.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz

giVals ftgen 0, 0, -12, -2, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
          seed      0; each time different seed

  opcode TabPermRand_i, i, i
;permuts randomly the values of the input table
;and creates an output table for the result
iTabin    xin
itablen   =         ftlen(iTabin)
iTabout   ftgen     0, 0, -itablen, 2, 0 ;create empty output table
iCopy     ftgen     0, 0, -itablen, 2, 0 ;create empty copy of input table
          tableicopy iCopy, iTabin ;write values of iTabin into iCopy
icplen    init      itablen ;number of values in iCopy
indxwt    init      0 ;index of writing in iTabout
loop:
indxrd    random    0, icplen - .0001; random read index in iCopy
indxrd    =         int(indxrd)
ival      tab_i     indxrd, iCopy; read the value
          tabw_i    ival, indxwt, iTabout; write it to iTabout
; -- shift values in iCopy larger than indxrd one position to the left
 shift:
 if indxrd &lt; icplen-1 then ;if indxrd has not been the last table value
ivalshft  tab_i     indxrd+1, iCopy ;take the value to the right ...
          tabw_i    ivalshft, indxrd, iCopy ;...and write it to indxrd position
indxrd    =         indxrd + 1 ;then go to the next position
          igoto     shift ;return to shift and see if there is anything left to do
 endif
indxwt    =         indxwt + 1 ;increase the index of writing in iTabout
          loop_gt   icplen, 1, 0, loop ;loop as long as there is ;
                                       ;a value in iCopy
          ftfree    iCopy, 0 ;delete the copy table
          xout      iTabout ;return the number of iTabout
  endop

instr 1
iPerm     TabPermRand_i giVals ;perform permutation
;print the result
indx      =         0
Sres      =         "Result:"
print:
ival      tab_i     indx, iPerm
Sprint    sprintf   "%s %d", Sres, ival
Sres      =         Sprint
          loop_lt   indx, 1, 12, print
          puts      Sres, 1
endin

instr 2; the same but performed ten times
icnt      =         0
loop:
iPerm     TabPermRand_i giVals ;perform permutation
;print the result
indx      =         0
Sres      =         "Result:"
print:
ival      tab_i     indx, iPerm
Sprint    sprintf   "%s %d", Sres, ival
Sres      =         Sprint
          loop_lt   indx, 1, 12, print
          puts      Sres, 1
          loop_lt   icnt, 1, 10, loop
endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 0
i 2 0 0
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h3>Print the Content of a Function Table</h3>
<p>There is no opcode in Csound for printing the contents of a function table, but one can be created as a UDO.2 Again a loop is needed for checking the values and putting them into a string which can then be printed. In addition, some options can be given for the print precision and for the number of elements in a line.</p>
<p>No hay c&oacute;digo de operaci&oacute;n en Csound para imprimir el contenido de una tabla de funciones, pero se puede crear como UDO.2 De nuevo se necesita un bucle para comprobar los valores y colocarlos en una cadena que luego se puede imprimir. Adem&aacute;s, se pueden dar algunas opciones para la precisi&oacute;n de la impresi&oacute;n y para el n&uacute;mero de elementos en una l&iacute;nea.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G12_TableDumpSimp.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-ndm0 -+max_str_len=10000
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz

gitab     ftgen     1, 0, -7, -2, 0, 1, 2, 3, 4, 5, 6
gisin     ftgen     2, 0, 128, 10, 1


  opcode TableDumpSimp, 0, ijo
;prints the content of a table in a simple way
;input: function table, float precision while printing (default = 3),
;parameters per row (default = 10, maximum = 32)
ifn, iprec, ippr xin
iprec     =         (iprec == -1 ? 3 : iprec)
ippr      =         (ippr == 0 ? 10 : ippr)
iend      =         ftlen(ifn)
indx      =         0
Sformat   sprintf   "%%.%df\t", iprec
Sdump     =         ""
loop:
ival      tab_i     indx, ifn
Snew      sprintf   Sformat, ival
Sdump     strcat    Sdump, Snew
indx      =         indx + 1
imod      =         indx % ippr
 if imod == 0 then
          puts      Sdump, 1
Sdump     =         ""
 endif
 if indx &lt; iend igoto loop
          puts      Sdump, 1
  endop
	
	
instr 1
          TableDumpSimp p4, p5, p6
          prints    "%n"
endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
;i1   st   dur   ftab   prec   ppr
i1    0    0     1      -1
i1    .    .     1       0
i1    .    .     2       3     10	
i1    .    .     2       6     32
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h3>A Recursive User Defined Opcode for Additive Synthesis</h3>
<p>In the last example of the chapter about Triggering Instrument Events a number of partials were synthesized, each with a random frequency deviation of up to 10% compared to precise harmonic spectrum frequencies and a unique duration for each partial. This can also be written as a recursive UDO. Each UDO generates one partial, and calls the UDO again until the last partial is generated. Now the code can be reduced to two instruments: instrument 1 performs the time loop, calculates the basic values for one note, and triggers the event. Then instrument 11 is called which feeds the UDO with the values and passes the audio signals to the output.</p>
<p>En el &uacute;ltimo ejemplo del cap&iacute;tulo acerca de los Eventos del Instrumento de Disparo se sintetizaron una serie de partiales, cada uno con una desviaci&oacute;n de frecuencia aleatoria de hasta 10% en comparaci&oacute;n con las frecuencias del espectro arm&oacute;nico preciso y una duraci&oacute;n &uacute;nica para cada parcial. Esto tambi&eacute;n se puede escribir como UDO recursivo. Cada UDO genera una parcial, y llama a la UDO de nuevo hasta que se genera el &uacute;ltimo parcial. Ahora el c&oacute;digo se puede reducir a dos instrumentos: el instrumento 1 realiza el bucle de tiempo, calcula los valores b&aacute;sicos de una nota y activa el evento. Entonces se llama al instrumento 11 que alimenta el UDO con los valores y pasa las se&ntilde;ales de audio a la salida.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03G13_UDO_Recursive_AddSynth.csd</strong></em></p>
<p>&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

giSine    ftgen     0, 0, 2^10, 10, 1
          seed      0

  opcode PlayPartials, aa, iiipo
;plays inumparts partials with frequency deviation and own envelopes and
;durations for each partial
;ibasfreq: base frequency of sound mixture
;inumparts: total number of partials
;ipan: panning
;ipartnum: which partial is this (1 - N, default=1)
;ixtratim: extra time in addition to p3 needed for this partial (default=0)

ibasfreq, inumparts, ipan, ipartnum, ixtratim xin
ifreqgen  =         ibasfreq * ipartnum; general frequency of this partial
ifreqdev  random    -10, 10; frequency deviation between -10% and +10%
ifreq     =         ifreqgen + (ifreqdev*ifreqgen)/100; real frequency
ixtratim1 random    0, p3; calculate additional time for this partial
imaxamp   =         1/inumparts; maximum amplitude
idbdev    random    -6, 0; random deviation in dB for this partial
iamp      =        imaxamp * ampdb(idbdev-ipartnum); higher partials are softer
ipandev   random    -.1, .1; panning deviation
ipan      =         ipan + ipandev
aEnv      transeg   0, .005, 0, iamp, p3+ixtratim1-.005, -10, 0; envelope
aSine     poscil    aEnv, ifreq, giSine
aL1, aR1  pan2      aSine, ipan
 if ixtratim1 &gt; ixtratim then
ixtratim  =  ixtratim1 ;set ixtratim to the ixtratim1 if the latter is larger
 endif
 if ipartnum &lt; inumparts then ;if this is not the last partial
; -- call the next one
aL2, aR2  PlayPartials ibasfreq, inumparts, ipan, ipartnum+1, ixtratim
 else               ;if this is the last partial
p3        =         p3 + ixtratim; reset p3 to the longest ixtratim value
 endif
          xout      aL1+aL2, aR1+aR2
  endop

  instr 1; time loop with metro
kfreq     init      1; give a start value for the trigger frequency
kTrig     metro     kfreq
 if kTrig == 1 then ;if trigger impulse:
kdur      random    1, 5; random duration for instr 10
knumparts random    8, 14
knumparts =         int(knumparts); 8-13 partials
kbasoct   random    5, 10; base pitch in octave values
kbasfreq  =         cpsoct(kbasoct) ;base frequency
kpan      random    .2, .8; random panning between left (0) and right (1)
          event     "i", 11, 0, kdur, kbasfreq, knumparts, kpan; call instr 11
kfreq     random    .25, 1; set new value for trigger frequency
 endif
  endin

  instr 11; plays one mixture with 8-13 partials
aL, aR    PlayPartials p4, p5, p6
          outs      aL, aR
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 300
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h3>Using Strings as Arrays</h3>
<p>For some situations it can be very useful to use strings in Csound as a collection of single strings or numbers. This is what programming languages call a list or an array. Csound does not provide opcodes for this purpose, but you can define these opcodes as UDOs. A set of these UDOs can then be used like this:</p>
<p>Para algunas situaciones puede ser muy &uacute;til usar cadenas en Csound como una colecci&oacute;n de cadenas o n&uacute;meros individuales. Esto es lo que los lenguajes de programaci&oacute;n llaman una lista o una matriz. Csound no proporciona opcodes para este prop&oacute;sito, pero puede definir estos opcodes como UDOs. Un conjunto de estos UDOs se puede utilizar de esta manera:</p>
<p>&nbsp;</p>
<p>ilen StrayLen "a b c d e"</p>
<pre> ilen -&gt; 5
Sel        StrayGetEl   "a b c d e", 0
 Sel -&gt; "a"
inum       StrayGetNum  "1 2 3 4 5", 0
 inum -&gt; 1
ipos       StrayElMem   "a b c d e", "c"
 ipos -&gt; 2
ipos       StrayNumMem  "1 2 3 4 5", 3
 ipos -&gt; 2
Sres       StraySetEl   "a b c d e", "go", 0
 Sres -&gt; "go a b c d e"
Sres       StraySetNum  "1 2 3 4 5", 0, 0
 Sres -&gt; "0 1 2 3 4 5"
Srev       StrayRev     "a b c d e"
 Srev -&gt; "e d c b a"
Sub        StraySub     "a b c d e", 1, 3
 Sub -&gt; "b c"
Sout       StrayRmv     "a b c d e", "b d"
 Sout -&gt; "a c e"
Srem       StrayRemDup  "a b a c c d e e"
 Srem -&gt; "a b c d e"
ift,iftlen StrayNumToFt "1 2 3 4 5", 1
 ift -&gt; 1 (same as f 1 0 -5 -2 1 2 3 4 5)
 iftlen -&gt; 5
</pre>
<p>You can find an article about defining such a sub-language here, and the up to date UDO code here (or at the UDO repository).</p>
<p>Aqu&iacute; puede encontrar un art&iacute;culo sobre la definici&oacute;n de este sub-lenguaje y el c&oacute;digo UDO actualizado aqu&iacute; (o en el repositorio UDO).</p>
<p>&nbsp;</p>
<p>Links And Related Opcodes</p>
<h3>Links</h3>
<p>This is the page in the Canonical Csound Reference Manual about the definition of UDOs.</p>
<p>Esta es la p&aacute;gina en el Canonical Csound Reference Manual sobre la definici&oacute;n de UDOs.</p>
<p>&nbsp;</p>
<p>The most important resource of User Defined Opcodes is the User-Defined Opcode Database, editied by Steven Yi.</p>
<p>El recurso m&aacute;s importante de las Opcodes definidas por el usuario es la base de datos Opcode definida por el usuario, editada por Steven Yi.</p>
<p>&nbsp;</p>
<p>Also by Steven Yi, read the second part of his article about control flow in Csound in the Csound Journal (summer 2006).</p>
<p>Tambi&eacute;n por Steven Yi, leer la segunda parte de su art&iacute;culo sobre el flujo de control en Csound en el Csound Journal (verano de 2006).</p>
<p>&nbsp;</p>
<p>Related Opcodes</p>
<p><a href="http://www.csounds.com/manual/html/opcode.html">opcode</a>: The opcode used to begin a User Defined Opcode definition.</p>
<p><a href="http://www.csounds.com/manual/html/include.html">#include</a>: Useful to include any loadable Csound code, in this case definitions of User Defined Opcodes.</p>
<p><a href="http://www.csounds.com/manual/html/setksmps.html">setksmps</a>: Lets you set a smaller ksmps value locally in a User Defined Opcode.</p>
<p>&nbsp;</p>
<ol id="InsertNote_NoteList">
<li id="InsertNoteID_6">Only the FLTK and STK opcodes begin with capital letters.<span id="InsertNoteID_6_LinkBacks"><sup><a href="g-user-defined-opcodes/f-user-defined-opcodes#InsertNoteID_6_marker7">^</a></sup></span></li>
<li id="InsertNoteID_8">See<a href="g-user-defined-opcodes/f-user-defined-opcodes/%20https:/github.com/joachimheintz/judo"> https://github.com/joachimheintz/judo</a> for more and more recent versions.<span id="InsertNoteID_8_LinkBacks"><sup><a href="g-user-defined-opcodes/f-user-defined-opcodes#InsertNoteID_8_marker9">^</a></sup></span></li>
</ol>
<div id="yass_bottom_edge" style="background-image: url('chrome://yass/content/edgebgbot.png'); background-position: 0px 0px; position: absolute; margin: 0px; padding: 0px; border-width: 0px; height: 0px; left: 0px; top: 0px; width: 100%; display: block;">&nbsp;</div>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

