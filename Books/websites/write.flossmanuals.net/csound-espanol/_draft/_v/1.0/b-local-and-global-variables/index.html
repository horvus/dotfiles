
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: B-Local-And-Global-Variables / CSOUND Español</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for CSOUND Español" href="/feeds/rss/book/csound-espanol/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for CSOUND Español" href="/feeds/atom/book/csound-espanol/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter B. LOCAL AND GLOBAL VARIABLES" href="/feeds/rss/chapter/csound-espanol/csound-espanol/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter B. LOCAL AND GLOBAL VARIABLES" href="/feeds/atom/chapter/csound-espanol/csound-espanol/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/csound-espanol/_draft/_v/1.0/b-local-and-global-variables/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>CSOUND Español</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><b>INTRODUCCIÓN</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/preface/">PREFACIO</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/how-to-use-this-manual/">CÓMO USAR ESTE MANUAL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/on-this-release/">ACERCA DE ESTE LANZAMIENTO</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/credits/">CRÉDITOS</a></li>
    
   
    
      <li><b>01 CUESTIONES BÁSICAS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-digital-audio/">A. AUDIO DIGITAL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-pitch-and-frequency/">B. ALTURA Y FRECUENCIA</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-intensities/">C. INTENSIDADES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-random/">D. ALEATORIEDAD</a></li>
    
   
    
      <li><b>02 INICIO RÁPIDO</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-make-csound-run/">A. CORRIENDO CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-csound-syntax/">B. SINTÁXIS DE CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-configuring-midi/">C. CONFIGURACIÓN MIDI</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-live-audio/">D. AUDIO EN VIVO</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-rendering-to-file/">E. SALIDA A UN ARCHIVO</a></li>
    
   
    
      <li><b>03 EL LENGUAJE DE CSOUND</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-initialization-and-performance-pass/">A. PASADAS DE INICIALIZACIÓN Y EJECUCIÓN</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-local-and-global-variables/">B. LOCAL AND GLOBAL VARIABLES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-control-structures/">C. CONTROL STRUCTURES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-function-tables/">D. FUNCTION TABLES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-arrays/">E. ARRAYS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-live-events/">F. LIVE EVENTS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-user-defined-opcodes/">G. USER DEFINED OPCODES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-macros/">H. MACROS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/i-functional-syntax/">I. FUNCTIONAL SYNTAX</a></li>
    
   
    
      <li><b>04 SOUND SYNTHESIS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-additive-synthesis/">A. ADDITIVE SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-subtractive-synthesis/">B. SUBTRACTIVE SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-amplitude-and-ring-modulation/">C. AMPLITUDE AND RING MODULATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-frequency-modulation/">D. FREQUENCY MODULATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-waveshaping/">E. WAVESHAPING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-granular-synthesis/">F. GRANULAR SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-physical-modelling/">G. PHYSICAL MODELLING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-scanned-synthesis/">H. SCANNED SYNTHESIS</a></li>
    
   
    
      <li><b>05 SOUND MODIFICATION</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-envelopes/">A. ENVELOPES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-panning-and-spatialization/">B. PANNING AND SPATIALIZATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-filters/">C. FILTERS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-delay-and-feedback/">D. DELAY AND FEEDBACK</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-reverberation/">E. REVERBERATION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-am-rm-waveshaping/">F. AM / RM / WAVESHAPING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-granular-synthesis/">G. GRANULAR SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-convolution/">H. CONVOLUTION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/i-fourier-analysis-spectral-processing/">I. FOURIER ANALYSIS / SPECTRAL PROCESSING</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/k-ats-resynthesis/">K. ATS RESYNTHESIS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/l-amplitude-and-pitch-tracking/">L. AMPLITUDE AND PITCH TRACKING</a></li>
    
   
    
      <li><b>06 SAMPLES</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-record-and-play-soundfiles/">A. RECORD AND PLAY SOUNDFILES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-record-and-play-buffers/">B. RECORD AND PLAY BUFFERS</a></li>
    
   
    
      <li><b>07 MIDI</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-receiving-events-by-midiin/">A. RECEIVING EVENTS BY MIDIIN</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-triggering-instrument-instances/">B. TRIGGERING INSTRUMENT INSTANCES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-working-with-controllers/">C. WORKING WITH CONTROLLERS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-reading-midi-files/">D. READING MIDI FILES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-midi-output/">E. MIDI OUTPUT</a></li>
    
   
    
      <li><b>08 OTHER COMMUNICATION</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-open-sound-control/">A. OPEN SOUND CONTROL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-csound-and-arduino/">B. CSOUND AND ARDUINO</a></li>
    
   
    
      <li><b>09 CSOUND IN OTHER APPLICATIONS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-csound-in-pd/">A. CSOUND IN PD</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-csound-in-maxmsp/">B. CSOUND IN MAXMSP</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-csound-in-ableton-live/">C. CSOUND IN ABLETON LIVE</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-csound-as-a-vst-plugin/">D. CSOUND AS A VST PLUGIN</a></li>
    
   
    
      <li><b>10 CSOUND FRONTENDS</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/csoundqt/">CSOUNDQT</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/cabbage/">CABBAGE</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/blue/">BLUE</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/winxound/">WINXOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/csound-via-terminal/">CSOUND VIA TERMINAL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/web-based-csound/">WEB BASED CSOUND</a></li>
    
   
    
      <li><b>11 CSOUND UTILITIES</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/csound-utilities/">CSOUND UTILITIES</a></li>
    
   
    
      <li><b>12 CSOUND AND OTHER PROGRAMMING LANGUAGES</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/a-the-csound-api/">A. THE CSOUND API</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/b-python-inside-csound/">B. PYTHON INSIDE CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/c-python-in-csoundqt/">C. PYTHON IN CSOUNDQT</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/d-lua-in-csound/">D. LUA IN CSOUND</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/e-csound-in-ios/">E. CSOUND IN iOS</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/f-csound-on-android/">F. CSOUND ON ANDROID</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/g-csound-and-haskell/">G. CSOUND AND HASKELL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/h-csound-and-html/">H. CSOUND AND HTML</a></li>
    
   
    
      <li><b>13 EXTENDING CSOUND</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/extending-csound/">EXTENDING CSOUND</a></li>
    
   
    
      <li><b>OPCODE GUIDE</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/overview/">OVERVIEW</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/signal-processing-i/">SIGNAL PROCESSING I</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/signal-processing-ii/">SIGNAL PROCESSING II</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/data/">DATA</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/realtime-interaction/">REALTIME INTERACTION</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/instrument-control/">INSTRUMENT CONTROL</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/maths-pythonsystem-plugins/">MATHS, PYTHON/SYSTEM, PLUGINS</a></li>
    
   
    
      <li><b>APPENDIX</b></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/methods-of-writing-csound-scores/">METHODS OF WRITING CSOUND SCORES</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/glossary/">GLOSSARY</a></li>
    
   
    
      <li><a href="/csound-espanol/_draft/_v/1.0/links/">LINKS</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <h1>VARIABLES LOCALES Y GLOBALES</h1>
<h2>Tipos de Variables</h2>
<p>&nbsp;</p>
<p>En Csound, hay varios tipos de variables. Es importante entender las diferencias entre estos tipos. Existen:</p>
<ul>
<li><strong>Variables de inicializaci&oacute;n</strong>, que se actualizan en cada pasada de inicializaci&oacute;n, es decir, al principio de cada nota o evento en la partitura. Empiezan con el caracter <strong>i</strong>. A este grupo tambi&eacute;n partenecen los campos de par&aacute;metros de la partitura, que siempre empiezan con la letra <strong>p</strong>, y luego un n&uacute;mero: <em>p1</em> se refiere al primer campo de par&aacute;metro en la partitura, <em>p2</em> al segundo, y as&iacute; sucesivamente.</li>
<li><strong>Variables de control</strong>, que se actualizan en cada ciclo de control durante la ejecuci&oacute;n de un instrumento. Empiezan con el car&aacute;cter <strong>k</strong>.</li>
<li><strong>Variables de audio</strong>, que tambi&eacute;n se actualizan en cada ciclo de control, pero en lugar de un solo n&uacute;mero (como las variables de control) consisten en un vector (una colecci&oacute;n de n&uacute;meros), teniendo de esta manera un n&uacute;mero para cada muestra. Empiezan con el caracter <strong>a</strong>.</li>
<li><strong>Variables de texto</strong>, que se actualizan durante el ciclo-i o el ciclo-k (dependiendo del opcode que produce el texto). Empiezan con el caracter<strong> S</strong>.</li>
</ul>
<p>Excepto estos cuatro tipos est&aacute;ndar, hay otros dos tipos de variables que se utilizan para el procesamiento espectral:</p>
<ul>
<li><strong></strong>
<p><strong>Las variables f</strong> se usan para los opcodes de vocoder de fase de streaming (todos comienzan con los caracteres <strong>pvs</strong>), que son muy importantes para hacer FFT (Transformada R&aacute;pida de Fourier) en tiempo real. Se actualizan durante el ciclo-k, pero sus valores dependen tambi&eacute;n de los par&aacute;metros FFT como el <em>frame size</em> y el&nbsp;<em>overlap</em>.</p>
</li>
<li>
<p><strong>Las variables w</strong> se usan en algunos opcodes de procesamiento espectral m&aacute;s antiguos.</p>
</li>
</ul>
<p>&nbsp;</p>
<p>El ejemplo siguiente ejemplifica todos los tipos de variables (excepto el tipo w):</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B01_Variable_types.csd</strong></em>&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-o dac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
0dbfs = 1
nchnls = 2

          seed      0; random seed each time different

  instr 1; i-time variables
iVar1     =         p2; second parameter in the score
iVar2     random    0, 10; random value between 0 and 10
iVar      =         iVar1 + iVar2; do any math at i-rate
          print     iVar1, iVar2, iVar
  endin

  instr 2; k-time variables
kVar1     line       0, p3, 10; moves from 0 to 10 in p3
kVar2     random     0, 10; new random value each control-cycle
kVar      =          kVar1 + kVar2; do any math at k-rate
; --- print each 0.1 seconds
printks   "kVar1 = %.3f, kVar2 = %.3f, kVar = %.3f%n", 0.1, kVar1, kVar2, kVar
  endin

  instr 3; a-variables
aVar1     oscils     .2, 400, 0; first audio signal: sine
aVar2     rand       1; second audio signal: noise
aVar3     butbp      aVar2, 1200, 12; third audio signal: noise filtered
aVar      =          aVar1 + aVar3; audio variables can also be added
          outs       aVar, aVar; write to sound card
  endin

  instr 4; S-variables
iMyVar    random     0, 10; one random value per note
kMyVar    random     0, 10; one random value per each control-cycle
 ;S-variable updated just at init-time
SMyVar1   sprintf   "This string is updated just at init-time:
                     kMyVar = %d\n", iMyVar
          printf_i  "%s", 1, SMyVar1
 ;S-variable updates at each control-cycle
          printks   "This string is updated at k-time:
                     kMyVar = %.3f\n", .1, kMyVar
  endin

  instr 5; f-variables
aSig      rand       .2; audio signal (noise)
; f-signal by FFT-analyzing the audio-signal
fSig1     pvsanal    aSig, 1024, 256, 1024, 1
; second f-signal (spectral bandpass filter)
fSig2     pvsbandp   fSig1, 350, 400, 400, 450
aOut      pvsynth    fSig2; change back to audio signal
          outs       aOut*20, aOut*20
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
; p1    p2    p3
i 1     0     0.1
i 1     0.1   0.1
i 2     1     1
i 3     2     1
i 4     3     1
i 5     4     1
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;</pre>
<p>Puede pensar en las variables como conectores con nombres entre opcodes. Puede conectar la salida de un opcode a la entrada de otro. El tipo de conector (audio, control, etc.) est&aacute; determinado por la primera letra de su nombre.</p>
<p>Para una discusi&oacute;n m&aacute;s detallada, vea el art&iacute;culo <a href="http://www.csounds.com/journal/issue10/CsoundRates.html"><em>An overview Of Csound Variable Types</em></a> por Andr&eacute;s Cabrera en el <a href="http://www.csounds.com/journal/articleIndex.html"><em>Csound Journal</em></a>, y el sitio sobre <a href="http://www.csounds.com/manual/html/OrchKvar.html"><em>Types, Constants and Variables</em></a> en el <a href="http://www.csounds.com/manual/html/index.html"><em>Canonical Csound Manual</em></a>. </p>
<h2>&Aacute;mbito local</h2>
<p>El <strong>&aacute;mbito</strong> de estas variables suele ser el <strong>instrumento</strong> en el que se definen. Son variables <strong>locales</strong>. En el siguiente ejemplo, las variables en el instrumento 1 y en el instrumento 2 tienen los mismos nombres, pero diferentes valores.</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B02_Local_scope.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 4410; very high because of printing
nchnls = 2
0dbfs = 1

  instr 1
;i-variable
iMyVar    init      0
iMyVar    =         iMyVar + 1
          print     iMyVar
;k-variable
kMyVar    init      0
kMyVar    =         kMyVar + 1
          printk    0, kMyVar
;a-variable
aMyVar    oscils    .2, 400, 0
          outs      aMyVar, aMyVar
;S-variable updated just at init-time
SMyVar1   sprintf   "This string is updated just at init-time:
                     kMyVar = %d\n", i(kMyVar)
          printf    "%s", kMyVar, SMyVar1
;S-variable updated at each control-cycle
SMyVar2   sprintfk  "This string is updated at k-time:
                     kMyVar = %d\n", kMyVar
          printf    "%s", kMyVar, SMyVar2
  endin

  instr 2
;i-variable
iMyVar    init      100
iMyVar    =         iMyVar + 1
          print     iMyVar
;k-variable
kMyVar    init      100
kMyVar    =         kMyVar + 1
          printk    0, kMyVar
;a-variable
aMyVar    oscils    .3, 600, 0
          outs      aMyVar, aMyVar
;S-variable updated just at init-time
SMyVar1   sprintf   "This string is updated just at init-time:
                     kMyVar = %d\n", i(kMyVar)
          printf    "%s", kMyVar, SMyVar1
;S-variable updated at each control-cycle
SMyVar2   sprintfk  "This string is updated at k-time:
                     kMyVar = %d\n", kMyVar
          printf    "%s", kMyVar, SMyVar2
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 .3
i 2 1 .3
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>&nbsp;</p>
<p>Esta es la salida a consola (primero la salida durante el ciclo-i por el opcode print, luego en cada ciclo-k la salida de printk y de ambos opcodes printf): <br /><span style="font-family: courier new,courier,monospace; font-size: small;">new alloc for instr 1: <br />instr 1:&nbsp; iMyVar = 1.000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.10000:&nbsp;&nbsp;&nbsp;&nbsp; 1.00000 <br />This string is updated just at init-time: kMyVar = 0 <br />This string is updated at k-time: kMyVar = 1 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.20000:&nbsp;&nbsp;&nbsp;&nbsp; 2.00000 <br />This string is updated just at init-time: kMyVar = 0 <br />This string is updated at k-time: kMyVar = 2 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.30000:&nbsp;&nbsp;&nbsp;&nbsp; 3.00000 <br />This string is updated just at init-time: kMyVar = 0 <br />This string is updated at k-time: kMyVar = 3 <br />&nbsp;B&nbsp; 0.000 ..&nbsp; 1.000 T&nbsp; 1.000 TT&nbsp; 1.000 M:&nbsp; 0.20000&nbsp; 0.20000 <br />new alloc for instr 2: <br />instr 2:&nbsp; iMyVar = 101.000 <br />&nbsp;i&nbsp;&nbsp; 2 time&nbsp;&nbsp;&nbsp;&nbsp; 1.10000:&nbsp;&nbsp; 101.00000 <br />This string is updated just at init-time: kMyVar = 100 <br />This string is updated at k-time: kMyVar = 101 <br />&nbsp;i&nbsp;&nbsp; 2 time&nbsp;&nbsp;&nbsp;&nbsp; 1.20000:&nbsp;&nbsp; 102.00000 <br />This string is updated just at init-time: kMyVar = 100 <br />This string is updated at k-time: kMyVar = 102 <br />&nbsp;i&nbsp;&nbsp; 2 time&nbsp;&nbsp;&nbsp;&nbsp; 1.30000:&nbsp;&nbsp; 103.00000 <br />This string is updated just at init-time: kMyVar = 100 <br />This string is updated at k-time: kMyVar = 103 <br />B&nbsp; 1.000 ..&nbsp; 1.300 T&nbsp; 1.300 TT&nbsp; 1.300 M:&nbsp; 0.29998&nbsp; 0.29998 </span></p>
<p>&nbsp;</p>
<h2>&Aacute;mbito Global</h2>
<p>Si necesita variables que se reconozcan m&aacute;s all&aacute; del &aacute;mbito de un instrumento, debe definirlas como <strong>globales</strong>. Esto se hace prefijando el caracter <strong>g</strong> antes de los tipos <em>i</em>, <em>k</em>, <em>a</em> o <em>S</em>. Vea el siguiente ejemplo:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B03_Global_scope.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 4410; very high because of printing
nchnls = 2
0dbfs = 1

 ;global scalar variables should be inititalized in the header
giMyVar   init      0
gkMyVar   init      0

  instr 1
 ;global i-variable
giMyVar   =         giMyVar + 1
          print     giMyVar
 ;global k-variable
gkMyVar   =         gkMyVar + 1
          printk    0, gkMyVar
 ;global S-variable updated just at init-time
gSMyVar1  sprintf   "This string is updated just at init-time:
                     gkMyVar = %d\n", i(gkMyVar)
          printf    "%s", gkMyVar, gSMyVar1
 ;global S-variable updated at each control-cycle
gSMyVar2  sprintfk  "This string is updated at k-time:
                     gkMyVar = %d\n", gkMyVar
          printf    "%s", gkMyVar, gSMyVar2
  endin

  instr 2
 ;global i-variable, gets value from instr 1
giMyVar   =         giMyVar + 1
          print     giMyVar
 ;global k-variable, gets value from instr 1
gkMyVar   =         gkMyVar + 1
          printk    0, gkMyVar
 ;global S-variable updated just at init-time, gets value from instr 1
          printf    "Instr 1 tells: '%s'\n", gkMyVar, gSMyVar1
 ;global S-variable updated at each control-cycle, gets value from instr 1
          printf    "Instr 1 tells: '%s'\n\n", gkMyVar, gSMyVar2
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 .3
i 2 0 .3
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<h2>&nbsp;</h2>
<p>La salida a consola muestra el &aacute;mbito global, ya que el instrumento 2 utiliza los valores que han sido cambiados por el instrumento 1 en el mismo ciclo de control: new alloc for instr 1:</p>
<p><span style="font-family: courier new,courier,monospace; font-size: small;">instr 1:&nbsp; giMyVar = 1.000 <br />new alloc for instr 2: <br />instr 2:&nbsp; giMyVar = 2.000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.10000:&nbsp;&nbsp;&nbsp;&nbsp; 1.00000 <br />This string is updated just at init-time: gkMyVar = 0 <br />This string is updated at k-time: gkMyVar = 1 <br />&nbsp;i&nbsp;&nbsp; 2 time&nbsp;&nbsp;&nbsp;&nbsp; 0.10000:&nbsp;&nbsp;&nbsp;&nbsp; 2.00000 <br />Instr 1 tells: 'This string is updated just at init-time: gkMyVar = 0' <br />Instr 1 tells: 'This string is updated at k-time: gkMyVar = 1' <br /><br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.20000:&nbsp;&nbsp;&nbsp;&nbsp; 3.00000 <br />This string is updated just at init-time: gkMyVar = 0 <br />This string is updated at k-time: gkMyVar = 3 <br />&nbsp;i&nbsp;&nbsp; 2 time&nbsp;&nbsp;&nbsp;&nbsp; 0.20000:&nbsp;&nbsp;&nbsp;&nbsp; 4.00000 <br />Instr 1 tells: 'This string is updated just at init-time: gkMyVar = 0' <br />Instr 1 tells: 'This string is updated at k-time: gkMyVar = 3' <br /><br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.30000:&nbsp;&nbsp;&nbsp;&nbsp; 5.00000 <br />This string is updated just at init-time: gkMyVar = 0 <br />This string is updated at k-time: gkMyVar = 5 <br />&nbsp;i&nbsp;&nbsp; 2 time&nbsp;&nbsp;&nbsp;&nbsp; 0.30000:&nbsp;&nbsp;&nbsp;&nbsp; 6.00000 <br />Instr 1 tells: 'This string is updated just at init-time: gkMyVar = 0' <br />Instr 1 tells: 'This string is updated at k-time: gkMyVar = 5' </span> <br /><br /></p>
<h2>C&oacute;mo trabajar con Variables de Audio Globales</h2>
<p>Se deben tomar algunas consideraciones especiales si se trabaja con variables globales de audio. En realidad, Csound se comporta b&aacute;sicamente igual si se trabaja con una variable de audio local o global. Pero normalmente se trabaja con variables de audio globales cuando se desea a&ntilde;adir varias se&ntilde;ales de audio a una se&ntilde;al global, y eso implica una diferencia.</p>
<p>Los siguientes ejemplos van a ser un poco m&aacute;s detallados. Si s&oacute;lo desea ver el resultado (= el audio global normalmente debe "limpiarse"), puede omitir los siguientes ejemplos y pasar al &uacute;ltimo de esta secci&oacute;n.</p>
<p>Debe entenderse primero que una variable de audio global es tratada igual por Csound si se usa como una se&ntilde;al de audio local:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B04_Global_audio_intro.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-odac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

  instr 1; produces a 400 Hz sine
gaSig     oscils    .1, 400, 0
  endin

  instr 2; outputs gaSig
          outs      gaSig, gaSig
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 3
i 2 0 3
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;</pre>
<p>Por supuesto que no es necesario utilizar una variable global en este caso. Si lo hace, se arriesga a que el audio sea sobrescrito por un instrumento con un n&uacute;mero m&aacute;s alto usando el mismo nombre de variable. En el ejemplo siguiente, s&oacute;lo oir&aacute; un tono senoidal de 600 Hz, ya que la sinusoide de 400 Hz del instrumento 1 es sobrescrito por la sinusoide de 600 Hz del instrumento 2:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B05_Global_audio_overwritten.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-o dac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

  instr 1; produces a 400 Hz sine
gaSig     oscils    .1, 400, 0
  endin

  instr 2; overwrites gaSig with 600 Hz sine
gaSig     oscils    .1, 600, 0
  endin

  instr 3; outputs gaSig
          outs      gaSig, gaSig
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 3
i 2 0 3
i 3 0 3
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>En general, se utilizar&aacute; una variable de audio global como un bus al que se le puede a&ntilde;adir una se&ntilde;al de audio local. Es esta <strong>adici&oacute;n</strong> de una se&ntilde;al de audio global a su mismo estado anterior la que puede causar un cierto apuro. Primero veamos un simple ejemplo de una se&ntilde;al de control para entender lo que est&aacute; sucediendo:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B06_Global_audio_added.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 4410; very high because of printing
nchnls = 2
0dbfs = 1

  instr 1
kSum      init      0; sum is zero at init pass
kAdd      =         1; control signal to add
kSum      =         kSum + kAdd; new sum in each k-cycle
          printk    0, kSum; print the sum
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 1
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>En este caso, el "bus de suma" kSum se incrementa durante cada ciclo de control en 1, ya que se le a&ntilde;ade la se&ntilde;al kAdd (que siempre es igual a 1) a su estado anterior durante cada ciclo-k. No es diferente si esto es hecho por una se&ntilde;al-k local, como aqu&iacute;, o por una se&ntilde;al-k global, como en el siguiente ejemplo:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B07_Global_control_added.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 4410; very high because of printing
nchnls = 2
0dbfs = 1

gkSum     init      0; sum is zero at init

  instr 1
gkAdd     =         1; control signal to add
  endin

  instr 2
gkSum     =         gkSum + gkAdd; new sum in each k-cycle
          printk    0, gkSum; print the sum
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 1
i 2 0 1
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>&iquest;Qu&eacute; pasa cuando se trabaja con se&ntilde;ales de audio en lugar de se&ntilde;ales de control de esta manera, a&ntilde;adiendo repetidamente una se&ntilde;al a su estado anterior? Las se&ntilde;ales de audio en Csound son una colecci&oacute;n de n&uacute;meros (un vector). El tama&ntilde;o de este vector est&aacute; dado por las constante <em>ksmps</em>. Si la frecuencia de muestreo es de 44100, y ksmps = 100, se calcular&aacute; 441 veces por segundo un vector que consta de 100 n&uacute;meros, a su vez cada uno representando el valor de la amplitud para cada muestra.</p>
<p>Por lo tanto, si agrega una se&ntilde;al de audio a su estado anterior, pueden suceder cosas diferentes, dependiendo de los vectores presentes y de los estados anteriores. Si los estados anterior y actual (con ksmps = 9) son&nbsp;[0 0.1 0.2 0.1 0 -0.1 -0.2 -0.1 0] obtendr&aacute; una se&ntilde;al que es dos veces m&aacute;s intensa: [0 0.2 0.4 0.2 0 -0.2 -0.4 -0.2 0]. Pero si el estado actual es opuesto [0 -0.1 -0.2 -0.1 0 0.1 0.2 0.1 0], s&oacute;lo obtendr&aacute; ceros cuando realice la adici&oacute;n. Esto se muestra en el siguiente ejemplo con una variable de audio local y, a continuaci&oacute;n, en el ejemplo a continuaci&oacute;n con una variable de audio global.</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B08_Local_audio_add.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-o dac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 4410; very high because of printing
            ;(change to 441 to see the difference)
nchnls = 2
0dbfs = 1

  instr 1
 ;initialize a general audio variable
aSum      init      0
 ;produce a sine signal (change frequency to 401 to see the difference)
aAdd      oscils    .1, 400, 0
 ;add it to the general audio (= the previous vector)
aSum      =         aSum + aAdd
kmax      max_k     aSum, 1, 1; calculate maximum
          printk    0, kmax; print it out
          outs      aSum, aSum
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 1
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>&nbsp;prints: <br /><span style="font-family: courier new,courier,monospace; font-size: small;">&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.10000:&nbsp;&nbsp;&nbsp;&nbsp; 0.10000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.20000:&nbsp;&nbsp;&nbsp;&nbsp; 0.20000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.30000:&nbsp;&nbsp;&nbsp;&nbsp; 0.30000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.40000:&nbsp;&nbsp;&nbsp;&nbsp; 0.40000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.50000:&nbsp;&nbsp;&nbsp;&nbsp; 0.50000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.60000:&nbsp;&nbsp;&nbsp;&nbsp; 0.60000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.70000:&nbsp;&nbsp;&nbsp;&nbsp; 0.70000 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.80000:&nbsp;&nbsp;&nbsp;&nbsp; 0.79999 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 0.90000:&nbsp;&nbsp;&nbsp;&nbsp; 0.89999 <br />&nbsp;i&nbsp;&nbsp; 1 time&nbsp;&nbsp;&nbsp;&nbsp; 1.00000:&nbsp;&nbsp;&nbsp;&nbsp; 0.99999 </span></p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B09_Global_audio_add.csd</strong></em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-o dac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 4410; very high because of printing
            ;(change to 441 to see the difference)
nchnls = 2
0dbfs = 1

 ;initialize a general audio variable
gaSum     init      0

  instr 1
 ;produce a sine signal (change frequency to 401 to see the difference)
aAdd      oscils    .1, 400, 0
 ;add it to the general audio (= the previous vector)
gaSum     =         gaSum + aAdd
  endin

  instr 2
kmax      max_k     gaSum, 1, 1; calculate maximum
          printk    0, kmax; print it out
          outs      gaSum, gaSum
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 1
i 2 0 1
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p>En ambos casos, se obtiene una se&ntilde;al que aumenta cada 1/10 de segundo, ya que se tienen 10 ciclos de control por segundo (ksmps = 4410), y la frecuencia de 400 Hz se puede dividir por igual. Si cambia el valor de ksmps a 441, obtendr&aacute; una se&ntilde;al que aumenta mucho m&aacute;s r&aacute;pido y est&aacute; fuera de rango despu&eacute;s de 1/10 segundos. Si cambia la frecuencia a 401 Hz, obtendr&aacute; una se&ntilde;al que aumenta primero, y luego disminuye, ya que cada vector de audio tiene 40.1 ciclos de onda senoidal. De este modo las fases est&aacute;n cambiando; primero haci&eacute;ndose m&aacute;s intensas y luego m&aacute;s d&eacute;biles. Si cambia la frecuencia a 10 Hz, y luego a 15 Hz (con ksmps = 44100), no podr&aacute; o&iacute;r nada, pero si renderiza a un archivo, podr&aacute; observar todo el proceso de refuerzo como de borrado de manera muy evidente:</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="Add_Freq10Hz_1" src="static/Csound-Picts-03_CsLanguage-Add_Freq10Hz_1-en.png" alt="Add_Freq10Hz_1" width="771" height="299" /></p>
<p><em>&nbsp;Se&ntilde;al de audio global de auto-refuerzo debido a su estado en un ciclo de control que es el mismo que en el anterior </em></p>
<p>&nbsp;</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="Add_Freq15Hz_1" src="static/Csound-Picts-03_CsLanguage-Add_Freq15Hz_1-en.png" alt="Add_Freq15Hz_1" width="771" height="298" />&nbsp;</p>
<div align="center"><em>Se&ntilde;al de audio global parcialmente auto-borrada debido a inversiones de fase en dos ciclos de control consecutivos </em></div>
<p>&nbsp;</p>
<p>As&iacute; que en resumen: Si trabaja con variables de audio globales de tal manera que se agregan varias se&ntilde;ales de audio locales a la variable de audio global (es decir, que funciona como un bus), debe <strong>limpiar</strong> este bus global durante cada ciclo de control. Como en Csound todos los instrumentos se calculan en orden ascendente, debe hacerse ya sea al principio del <strong>primero</strong>, o al final del <strong>&uacute;ltimo</strong> instrumento. Tal vez la mejor idea sea declarar todas las variables de audio globales en el encabezado de la orquesta primero y luego borrarlas en un instrumento "siempre encendido" con el mayor n&uacute;mero respecto a todos los instrumentos utilizados. Este es un ejemplo de una situaci&oacute;n t&iacute;pica:</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B10_Global_with_clear.csd</strong></em></p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-o dac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

 ;initialize the global audio variables
gaBusL    init      0
gaBusR    init      0
 ;make the seed for random values each time different
          seed      0

  instr 1; produces short signals
 loop:
iDur      random    .3, 1.5
          timout    0, iDur, makenote
          reinit    loop
 makenote:
iFreq     random    300, 1000
iVol      random    -12, -3; dB
iPan      random    0, 1; random panning for each signal
aSin      oscil3    ampdb(iVol), iFreq, 1
aEnv      transeg   1, iDur, -10, 0; env in a-rate is cleaner
aAdd      =         aSin * aEnv
aL, aR    pan2      aAdd, iPan
gaBusL    =         gaBusL + aL; add to the global audio signals
gaBusR    =         gaBusR + aR
  endin

  instr 2; produces short filtered noise signals (4 partials)
 loop:
iDur      random    .1, .7
          timout    0, iDur, makenote
          reinit    loop
 makenote:
iFreq     random    100, 500
iVol      random    -24, -12; dB
iPan      random    0, 1
aNois     rand      ampdb(iVol)
aFilt     reson     aNois, iFreq, iFreq/10
aRes      balance   aFilt, aNois
aEnv      transeg   1, iDur, -10, 0
aAdd      =         aRes * aEnv
aL, aR    pan2      aAdd, iPan
gaBusL    =         gaBusL + aL; add to the global audio signals
gaBusR    =         gaBusR + aR
  endin

  instr 3; reverb of gaBus and output
aL, aR    freeverb  gaBusL, gaBusR, .8, .5
          outs      aL, aR
  endin

  instr 100; clear global audios at the end
          clear     gaBusL, gaBusR
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
f 1 0 1024 10 1 .5 .3 .1
i 1 0 20
i 2 0 20
i 3 0 20
i 100 0 20
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;
</pre>
<p id="alexbreak">&nbsp;</p>
<h2><strong>Los Opcodes chn para</strong> Variables Globales</h2>
<p>En lugar de utilizar las variables-g tradicionales para los valores o se&ntilde;ales que se van a transferir entre varios instrumentos, tambi&eacute;n es posible utilizar los opcodes <a href="http://www.csounds.com/manual/html/chn.html">chn</a>. Un Valor-i, -k, -a o -S, o una se&ntilde;al pueden ser establecidas por&nbsp;<a href="http://www.csounds.com/manual/html/chnset.html">chnset</a> y recibida por <a href="http://www.csounds.com/manual/html/chnget.html">chnget</a>. Una ventaja de este enfoque es tener cadenas de texto como nombres, de modo que pueda elegir nombres intuitivos.</p>
<p>Para las variables de audio, en lugar de realizar una adici&oacute;n, puede utilizar el opcode <a href="http://www.csounds.com/manual/html/chnmix.html">chnmix</a>. Para "limpiar" una variable de audio, se puede usar el opcode <a href="http://www.csounds.com/manual/html/chnclear.html">chnclear</a>.</p>
<p>&nbsp;&nbsp; <em><strong>EXAMPLE 03B11_Chn_demo.csd</strong></em>&nbsp;</p>
<pre>&lt;CsoundSynthesizer&gt;
&lt;CsOptions&gt;
-o dac
&lt;/CsOptions&gt;
&lt;CsInstruments&gt;
;Example by Joachim Heintz
sr = 44100
ksmps = 32
nchnls = 2
0dbfs = 1

  instr 1; send i-values
          chnset    1, "sio"
          chnset    -1, "non"
  endin

  instr 2; send k-values
kfreq     randomi   100, 300, 1
          chnset    kfreq, "cntrfreq"
kbw       =         kfreq/10
          chnset    kbw, "bandw"
  endin

  instr 3; send a-values
anois     rand      .1
          chnset    anois, "noise"
 loop:
idur      random    .3, 1.5
          timout    0, idur, do
          reinit    loop
 do:
ifreq     random    400, 1200
iamp      random    .1, .3
asig      oscils    iamp, ifreq, 0
aenv      transeg   1, idur, -10, 0
asine     =         asig * aenv
          chnset    asine, "sine"
  endin

  instr 11; receive some chn values and send again
ival1     chnget    "sio"
ival2     chnget    "non"
          print     ival1, ival2
kcntfreq  chnget    "cntrfreq"
kbandw    chnget    "bandw"
anoise    chnget    "noise"
afilt     reson     anoise, kcntfreq, kbandw
afilt     balance   afilt, anoise
          chnset    afilt, "filtered"
  endin

  instr 12; mix the two audio signals
amix1     chnget     "sine"
amix2     chnget     "filtered"
          chnmix     amix1, "mix"
          chnmix     amix2, "mix"
  endin

  instr 20; receive and reverb
amix      chnget     "mix"
aL, aR    freeverb   amix, amix, .8, .5
          outs       aL, aR
  endin

  instr 100; clear
          chnclear   "mix"
  endin

&lt;/CsInstruments&gt;
&lt;CsScore&gt;
i 1 0 20
i 2 0 20
i 3 0 20
i 11 0 20
i 12 0 20
i 20 0 20
i 100 0 20
&lt;/CsScore&gt;
&lt;/CsoundSynthesizer&gt;

</pre>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

