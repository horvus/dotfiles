
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: Create-A-Game-Space / Learn JavaScript with Phaser</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for Learn JavaScript with Phaser" href="/feeds/rss/book/learn-javascript-with-phaser/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for Learn JavaScript with Phaser" href="/feeds/atom/book/learn-javascript-with-phaser/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter Create a Game Space" href="/feeds/rss/chapter/learn-javascript-with-phaser/learn-javascript-with-phaser/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter Create a Game Space" href="/feeds/atom/chapter/learn-javascript-with-phaser/learn-javascript-with-phaser/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/learn-javascript-with-phaser/_draft/_v/1.0/create-a-game-space/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>Learn JavaScript with Phaser</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><b>OPENING SCENE</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/introduction/">Introduction</a></li>
    
   
    
      <li><b>Jumping Right In</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/jumping-right-in/">Jumping Right In</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/about-adding-game-mechanics/">Choose your own Adventure</a></li>
    
   
    
      <li><b>Getting Started</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/building-a-world/">Building a World</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/adding-movement/">Adding Movement</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/create-a-game-space/">Create a Game Space</a></li>
    
   
    
      <li><b>Making Things Happen</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/adding-a-reward/">Adding a Reward</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/hazards-and-enemies/">Hazards and Enemies</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/changing-game-states/">Adding Game States</a></li>
    
   
    
      <li><b>GAME MECHANICS</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-add-a-countdown-timer/">Game Mechanic: Add a Countdown Timer</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-jumping-on-enemies/">Game Mechanic: Jumping on Enemies</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-player-health/">Game Mechanic: Player Health</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-longer-jumps-if-holding-jump-down/">Game Mechanic: Longer Jumps if Holding Jump Down</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-changing-collision-boxes/">Game Mechanic: Smaller Sprite Collision Boxes</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-extending-the-game-size/">Game Mechanic: Extending the Game Size</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/adding-other-levels/">Game Mechanic: Adding Levels </a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-keys-and-doors/">Game Mechanic: Keys and Doors</a></li>
    
   
    
      <li><b>ADDING POLISH</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-character-animations-when-dying/">Polish: Animate Sprite when Zapped</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polishing-our-game/">Polish: Scaling our Game and Sprites</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-screen-shake/">Polish: Screen Shake</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-add-soundtrack-music/">Polish: Add Soundtrack Music</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-dramatic-endings/">Polish: Explosions using Particles</a></li>
    
   
    
      <li><b>Appendix</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/how-we-learn-javascript-in-this-book/">Summary of our approach to learning Game Making</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/how-we-approach-coding/">How we approach Coding </a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/playful-reflective-activities/">Playful and Reflective Approaches</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <h1>Create a Game Space</h1>
<p>Now let's add some elements to make a more realistic game space. We will chose the platform game genre as that is easy to recognise and to create code for.</p>
<p>We create some platforms for our player to jump onto and some coins to collect.</p>
<h2>Have a Play: with Platforms</h2>
<h3><strong>Challenge One: Fix those Platforms</strong></h3>
<p>Click here for this chapter's Code Playground - <a title="https://create-game-space-broken.glitch.me/" href="https://create-game-space-broken.glitch.me/">https://create-game-space-broken.glitch.me/</a></p>
<p>Play the game and see what is wrong. Hit the fishes to remix the code and see if you can fix it. Clue look for the keyword immovable</p>
<p><strong>Challenge One Answer:</strong> You will notice some of the platforms are not working correctly they fly away when you jump on them.-</p>
<p>Unhide the lines which make the platforms move. The line below is an example.</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //platform1.body.immovable = true;</pre>
<p>To unhide the lines and make them active remove the // marks at the start of the code.</p>
<h3><strong>Challenge Two: Increase the difficulty</strong></h3>
<p>At the moment it is very easy to move between platforms.</p>
<p>Can you alter the code to change where they appear in the game to make it harder to jump between them?</p>
<p><img src="static/arrow_platforms.jpg" alt="" width="534" height="401" /></p>
<p><strong>Challenge Two Answer:</strong> Find this code below&nbsp;</p>
<pre style="padding-left: 30px;">platform1 = platforms.create(75, 100, 'grass:4x1');</pre>
<p>The numbers 75 and 100 here represent x and y coordinates on the screen. Change the numbers for the platforms and you wil be able to make them higher or lower or further apart horizontally to make it harder to jump between them.</p>
<h2>Hands on: Creating a Group for our Platforms and Ground</h2>
<p>We already know how to add images to our game but when we add our platforms we are going to do it in a way that allows us to change the properties of all the platforms at once. You will see how this will be useful in a bit.</p>
<p>To do this we will first create a group, and then when we create each platform we will add them to that group.&nbsp;</p>
<p>To add specific platforms we now need to follow this pattern.</p>
<ul>
<li>load images in preload</li>
<li>add images in create</li>
<li>add them to the platforms group</li>
<li>add code to make the player stand on the platform</li>
</ul>
<p>First let's add the variable platforms to the start of our code. We can actually put it on the same line as our player. This is a javascript short cut, so let's do that. Change the line.</p>
<pre>    var player;</pre>
<p>so that it now reads</p>
<pre>    var player;<br />&nbsp;   var platforms;</pre>
<p>In the <strong>preload</strong> function let's load up an image for ground and a platform from an artist called Kenny taken from his Platformer pack and converted to phaser sprites by Belen Albeza.</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; game.load.image('ground', 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/1171931/ground.png');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; game.load.image('grass:4x1', 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/1171931/grass_4x1.png');</pre>
<p>In <strong>create</strong> we are going to use a few variables here that we don't need to share with the other functions so put them at the start of the create() code. Again we can put them all on one line.</p>
<pre>    var ground;<br />    var platform1;<br />    var platform2; <br />    var platform3;</pre>
<p>At the end of our the existing code in <strong>create()</strong> let's add the code which creates a group in our game called platforms and enables body so that it can interact with other elements in the game.</p>
<pre>&nbsp;&nbsp;&nbsp; platforms = game.add.group();<br />&nbsp;&nbsp;&nbsp; platforms.enableBody = true;</pre>
<p>Now let's add this code after the above to create a ground for our player to stand on</p>
<pre>&nbsp;&nbsp;&nbsp; ground = platforms.create(0, 275, 'ground');</pre>
<p>Try running your code at this point. You will see that when the player sinks down behind the floor.</p>
<p>To avoid this in <strong>update:</strong> add this code</p>
<pre>&nbsp;&nbsp;&nbsp; game.physics.arcade.collide(player, platforms);</pre>
<p>Try again and this time the player bumps the platform down out of sight.</p>
<p>To avoid this add another line after your last one added to <strong>create:</strong>.</p>
<pre>&nbsp;&nbsp;&nbsp; ground = platforms.create(0, 275, 'ground');<br />&nbsp;&nbsp;&nbsp; ground.body.immovable = true;</pre>
<p>Follow this pattern to add more platforms for the player to jump on<strong>.</strong></p>
<pre>&nbsp;&nbsp;&nbsp; platform1 = platforms.create(150, 220, 'grass:4x1');<br />&nbsp;&nbsp;&nbsp; platform1.body.immovable = true;<br />&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp;&nbsp; platform2 = platforms.create(250, 150, 'grass:4x1');<br />&nbsp;&nbsp;&nbsp; platform2.body.immovable = true;<br /><br />&nbsp;&nbsp;&nbsp; platform3 = platforms.create(75, 100, 'grass:4x1');<br />&nbsp;&nbsp;&nbsp; platform3.body.immovable = true;<strong><br /></strong></pre>
<p>As with the starting <strong>have a play</strong> activity, feel free to change the location of your three platforms to make them more challenging.</p>
<h2>Can We Glitch It?: Debugging Jumping</h2>
<p><img src="static/yeswecan_800_2.JPG" alt="" width="800" height="450" /></p>
<p>This game actually starts with a Glitch at this point that we have to fix.</p>
<p>There is something not right about jumping here. We can jump when ever we want. This means we can jump right up to the top of the screen as if we were flying. This isn't what we want.</p>
<p>We should only be able to jump when we are touching the ground. This will be is one the rules of our game and it is common to a lot of platform games.</p>
<p>To make this happen we can use a conditional statement using <strong>if</strong>.&nbsp;</p>
<p>Change the code which controls the up keyboard key to change the statement condition in the first line to be:</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (game.input.keyboard.isDown(Phaser.Keyboard.UP) === true &amp;&amp; player.body.touching.down === true) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     player.body.velocity.y = -300;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</pre>
<p>This if statement now has has two conditions that need to be true before the code in brackets will run. Theruser must be pressing the UP key and the player character must be touching down on one of the platforms. If they are already jumping they will be in the air, and the player.body.touching.down property will be false and the code in the conditional block won't run. There is a more detailed look at this later in this chapter.</p>
<p>If we really wanted to glitch this game again then we could add another line of code which makes our player dive back to earth if the up arrow was pressed when the player was in the air. Try this to Glitch! You can play this glitch here <a title="https://create-game-space-broken.glitch.me/" href="https://slow-quality.glitch.me/">https://slow-quality.glitch.me/</a></p>
<pre>&nbsp;&nbsp;&nbsp; if (game.input.keyboard.isDown(Phaser.Keyboard.UP) === true &amp;&amp; player.body.touching.down === true) {<br />&nbsp;&nbsp;&nbsp;&nbsp;    player.body.velocity.y = -300;<br />&nbsp;&nbsp;&nbsp; }<br />    else if (game.input.keyboard.isDown(Phaser.Keyboard.UP){<br />        player.body.velocity.y = 300;<br />    }</pre>
<h2>Checking our Code<strong><br /></strong></h2>
<p>Have a look at the following Code area to check your code against what we think you should have. <a title="https://create-game-space-broken.glitch.me/" href="https://glitch.com/edit/#!/create-game-space-chapter?path=game.js">https://glitch.com/edit/#!/create-game-space-chapter?path=game.js</a></p>
<!-- Copy and Paste Me -->
<div class="glitch-embed-wrap" style="height: 455px; width: 100%;"><iframe style="height: 100%; width: 100%; border: 0;" src="https://glitch.com/embed/#!/embed/create-game-space-chapter?path=game.js&amp;previewSize=100&amp;previewFirst=true" width="320" height="240"></iframe></div>
<h2>Under the Hood: More on conditionals<strong><br /></strong></h2>
<p>As we can see in the code controlling jumping, there can be more conditions that needs to be true or false before a certain piece of code can run. In the last chapter we saw how the three options of<strong> if, if else </strong>and<strong> else</strong> provide a flexible way of providing different options of code to run depending on different user input and other conditions. Now let's look at the <strong>(condition)</strong> part of the statement.</p>
<p>The process for this is known as True / False or Boolean Logic and even though we are dealing only with different options which are all true or false it can quickly get confusing. If you get lost reading this explaination then there is one which is probably a bit better and more complete here. <a title="https://create-game-space-broken.glitch.me/" href="https://www.w3schools.com/js/js_comparisons.asp">https://www.w3schools.com/js/js_comparisons.asp</a></p>
<p>Let's take a simple example where were are testing if something is true. We can use the === comparison operator to check this in our conditional testing statement. Let's say we are testing to see if it is raining.</p>
<pre style="padding-left: 30px;">if (isRaining === true){<br />&nbsp; wearCoat();<br />}</pre>
<p>But imagine a situation where we want to check if it is raining <strong>OR</strong> if the clouds are dark. If <strong>either</strong> is true then take a coat out. This could be checked using the <strong>||</strong> logical operator to check both conditions.</p>
<pre style="padding-left: 30px;">if (isRaining === true <strong>||</strong> isDark === true){<br />&nbsp; wearCoat();<br />}</pre>
<p>Hower, if we want to check if it raining <strong>AND</strong> the clouds are dark and we will only then take a coat out if <strong>both</strong> are true. This might be structured like this.</p>
<pre style="padding-left: 30px;">if (isRaining === true <strong>&amp;&amp;</strong> isDark === true){<br />&nbsp; wearCoat();<br />}</pre>
<p>Let's look at a table from the above resource of the logical operators used here to help understand them.</p>
<table class="w3-table-all notranslate" border="1" cellpadding="5">
<tbody>
<tr><th style="width: 12%;"><strong>Operator&nbsp;</strong></th><th>Description</th><th>
<p>Example</p>
</th></tr>
<tr><th style="width: 12%;">&amp;&amp;</th><th>and</th><th>
<p>(x &lt; 10 &amp;&amp; y &gt; 1) is true</p>
</th></tr>
<tr><th style="width: 12%;">||</th><th>or</th><th>(x === 5 || y === 5) is false</th></tr>
<tr><th style="width: 12%;">!</th><th>not</th><th>!(x === y) is true</th></tr>
</tbody>
</table>
<div class="w3-responsive">&nbsp;</div>
<p>This is a subject that suits learning through doing, through experimenting and getting things a bit wrong and trying out different options until you get the one you want. As mentioned previously, there is a resource which is more complete here. <a title="https://create-game-space-broken.glitch.me/" href="https://www.w3schools.com/js/js_comparisons.asp">https://www.w3schools.com/js/js_comparisons.asp</a></p>
<p>&nbsp;</p>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

