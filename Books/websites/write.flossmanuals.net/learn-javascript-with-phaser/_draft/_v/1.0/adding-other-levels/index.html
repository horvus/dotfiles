
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: Adding-Other-Levels / Learn JavaScript with Phaser</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for Learn JavaScript with Phaser" href="/feeds/rss/book/learn-javascript-with-phaser/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for Learn JavaScript with Phaser" href="/feeds/atom/book/learn-javascript-with-phaser/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter Game Mechanic: Adding Levels " href="/feeds/rss/chapter/learn-javascript-with-phaser/learn-javascript-with-phaser/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter Game Mechanic: Adding Levels " href="/feeds/atom/chapter/learn-javascript-with-phaser/learn-javascript-with-phaser/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/learn-javascript-with-phaser/_draft/_v/1.0/adding-other-levels/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>Learn JavaScript with Phaser</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><b>OPENING SCENE</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/introduction/">Introduction</a></li>
    
   
    
      <li><b>Jumping Right In</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/jumping-right-in/">Jumping Right In</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/about-adding-game-mechanics/">Choose your own Adventure</a></li>
    
   
    
      <li><b>Getting Started</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/building-a-world/">Building a World</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/adding-movement/">Adding Movement</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/create-a-game-space/">Create a Game Space</a></li>
    
   
    
      <li><b>Making Things Happen</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/adding-a-reward/">Adding a Reward</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/hazards-and-enemies/">Hazards and Enemies</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/changing-game-states/">Adding Game States</a></li>
    
   
    
      <li><b>GAME MECHANICS</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-add-a-countdown-timer/">Game Mechanic: Add a Countdown Timer</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-jumping-on-enemies/">Game Mechanic: Jumping on Enemies</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-player-health/">Game Mechanic: Player Health</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-longer-jumps-if-holding-jump-down/">Game Mechanic: Longer Jumps if Holding Jump Down</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-changing-collision-boxes/">Game Mechanic: Smaller Sprite Collision Boxes</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-extending-the-game-size/">Game Mechanic: Extending the Game Size</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/adding-other-levels/">Game Mechanic: Adding Levels </a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/game-mechanic-keys-and-doors/">Game Mechanic: Keys and Doors</a></li>
    
   
    
      <li><b>ADDING POLISH</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-character-animations-when-dying/">Polish: Animate Sprite when Zapped</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polishing-our-game/">Polish: Scaling our Game and Sprites</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-screen-shake/">Polish: Screen Shake</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-add-soundtrack-music/">Polish: Add Soundtrack Music</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/polish-dramatic-endings/">Polish: Explosions using Particles</a></li>
    
   
    
      <li><b>Appendix</b></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/how-we-learn-javascript-in-this-book/">Summary of our approach to learning Game Making</a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/how-we-approach-coding/">How we approach Coding </a></li>
    
   
    
      <li><a href="/learn-javascript-with-phaser/_draft/_v/1.0/playful-reflective-activities/">Playful and Reflective Approaches</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <h1>Game Mechanic: Adding More Levels</h1>
<p>&nbsp;To allow our game to be playable more than one screen and keep the player coming back for more we can add levels get harder and harder.</p>
<p>Here we will add the ability to use more than one level layout and have complete control over where we place our enemies, platforms and rewards (coins). We will do this in two ways. Firstly we will create separate functions to load those elements, and then we'll explore a way to load in platforms and coins to collelct from data objects in the json format.</p>
<p><img src="static/gameMechanics_more_levels.jpg" alt="" /></p>
<p>&nbsp;</p>
<h2>Check the Code: what we need to know and do</h2>
<p>There is some background knowledge in this book that will be useful for us in getting this mechanic to work;</p>
<ul>
<li>Adding Sprites in Groups - see <a href="http://write.flossmanuals.net/learn-javascript-with-phaser/create-a-game-space/">Create a Game Space</a></li>
<li>Working with Loops - see <a title="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" href="http://write.flossmanuals.net/learn-javascript-with-phaser/adding-a-reward/">Adding a Reward</a></li>
</ul>
<div>The code for a minimal example of the Adding More Levels game mechanic is shown here - <a title="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" href="https://game-mechanic-more-levels.glitch.me/">https://game-mechanic-more-levels.glitch.me/</a></div>
<div>&nbsp;</div>
<!-- Copy and Paste Me -->
<div class="glitch-embed-wrap" style="height: 455px; width: 100%;"><iframe style="height: 100%; width: 100%; border: 0;" src="https://glitch.com/embed/#!/embed/game-mechanic-more-levels?path=game.js&amp;previewFirst=true" width="320" height="240"></iframe></div>
<h3>Going over the code:</h3>
<p>Note these variables at the start of our code that are located here as they are needed by more than one function;</p>
<pre style="padding-left: 30px;">var player;<br />var platforms;<br />var coins;<br />var wlevel = 1;<br />var leveldata;<br /><br /></pre>
<p>&nbsp;Next we should create an init() function</p>
<pre>playState.init = function (wlevel) {<br />&nbsp;&nbsp;&nbsp; wlevel = wlevel;<br />};</pre>
<p>This wlevel variable keeps a track of what level we are on. It is set to one to start off with.</p>
<p>Then create some data in the json style format. We could have these in external files but we'll keep them in our game.js file to reduce the complexity of this example. All we need to know right now is we are using this approach to store the data for where our coins and platforms are. The json format is explained in more detail here <a title="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON</a>.&nbsp;</p>
<p>We can have a look at our entry for level one below.</p>
<pre>&nbsp;&nbsp;&nbsp; var level1 = {"platforms":[{"image":"ground","x":0,"y":325},{"image":"grass:4x1","x":150,"y":240},{"image":"grass:4x1","x":250,"y":160}],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "coins":[{"image":"coin","x":0,"y":225},{"image":"coin","x":150,"y":200}]&nbsp;&nbsp;&nbsp; </pre>
<p>This contains two main parts, one for platforms and one for coins. Within those parts there is an entry for the image name (from preload), and where it will appear on the screen.There is one for each level we want.</p>
<p>When generating the game area in create we have added a two loops to loop through&nbsp; each of lists of sprites, add them to the screen and add them to the relavant group. Here is the example for the platforms, but the one for the coins is similar.</p>
<pre>&nbsp;&nbsp;&nbsp; for (var i = 0; i &lt; leveldata.platforms.length; i++) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var platform = platforms.create(leveldata.platforms[i].x, leveldata.platforms[i].y, leveldata.platforms[i].image);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; platform.body.immovable = true;<br />&nbsp;&nbsp;&nbsp; }</pre>
<p>Then when the play is happening. We then need to check if there are any coins left and if there aren't then increase our level by one. There is a check coins function that we created in&nbsp;<a title="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" href="http://write.flossmanuals.net/learn-javascript-with-phaser/adding-a-reward/">Adding a Reward</a> that we can add to.</p>
<pre>&nbsp;&nbsp;&nbsp; if (count_alive === 0 &amp;&amp; wlevel &lt; 3) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wlevel = wlevel + 1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; game.state.start("play", true, false, wlevel);<br />&nbsp;&nbsp;&nbsp; } else if (count_alive === 0 &amp;&amp; wlevel === 3) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //normally game over but loop back here to start <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wlevel = 1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; game.state.start("play", true, false, wlevel);<br />&nbsp;&nbsp;&nbsp; }</pre>
<p>We also have an option here to return to level one if we have played out all the levels, in this example we have three levels. You might want to change that to create a game over state.</p>
<p>That's it. We hope you enjoy adding this game dynamic to your game to jump on enemies.</p>
<p>&nbsp;</p>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

