
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: Code-Example-Command-Plugin / Contributors Guide to BRL-CAD</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for Contributors Guide to BRL-CAD" href="/feeds/rss/book/contributors-guide-to-brl-cad/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for Contributors Guide to BRL-CAD" href="/feeds/atom/book/contributors-guide-to-brl-cad/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter Code Example: Command Plugin" href="/feeds/rss/chapter/contributors-guide-to-brl-cad/contributors-guide-to-brl-cad/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter Code Example: Command Plugin" href="/feeds/atom/chapter/contributors-guide-to-brl-cad/contributors-guide-to-brl-cad/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/contributors-guide-to-brl-cad/_draft/_v/1.0/code-example-command-plugin/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>Contributors Guide to BRL-CAD</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><b>Getting Started</b></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/a-call-to-arms/">A Call to Arms</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/feature-overview/">Feature Overview</a></li>
    
   
    
      <li><b>Developers</b></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/working-with-our-code/">Working with Our Code</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/what-code-to-work-on/">What Code to Work On</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/contributing-code/">Contributing Code</a></li>
    
   
    
      <li><b>Documenters</b></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/working-with-our-documentation/">Working with Our Documentation</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/types-of-documentation-we-maintain/">Types of Documentation We Maintain</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/what-documentation-to-work-on/">What Documentation to Work On</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/contributing-documentation/">Contributing Documentation</a></li>
    
   
    
      <li><b>Other Contributors</b></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/you-can-help-too/">You Can Help Too</a></li>
    
   
    
      <li><b>Appendix: Resources and Examples</b></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/further-references-and-resources/">Further References and Resources</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/doc-template-new-mged-command/">Doc Template: New MGED Command</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/code-example-shooting-rays/">Code Example: Shooting Rays</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/code-example-walking-geometry/">Code Example: Walking Geometry</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/code-example-command-plugin/">Code Example: Command Plugin</a></li>
    
   
    
      <li><a href="/contributors-guide-to-brl-cad/_draft/_v/1.0/code-example-root-solving/">Code Example: Root Solving</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <html><body><h1>Code Example: Command Plugin
</h1>
<p>The Geometry Editing Library (libged) defines commands for working with BRL-CAD models. The following code illustrates how individual commands are defined within the library.
</p>
<pre>#include "common.h"
#include "bio.h"
#include "bu.h"
#include "ged.h"
</pre>
<pre>HIDDEN int
zoom(struct ged *gedp, double sf)
{
    gedp-&gt;ged_gvp-&gt;gv_scale /= sf;
    if (gedp-&gt;ged_gvp-&gt;gv_scale &lt; RT_MINVIEWSCALE)
        gedp-&gt;ged_gvp-&gt;gv_scale = RT_MINVIEWSCALE;
    gedp-&gt;ged_gvp-&gt;gv_size = 2.0 * gedp-&gt;ged_gvp-&gt;gv_scale;
    gedp-&gt;ged_gvp-&gt;gv_isize = 1.0 / gedp-&gt;ged_gvp-&gt;gv_size;
    ged_view_update(gedp-&gt;ged_gvp);

    return GED_OK;
}</pre>
<pre>int
ged_zoom(struct ged *gedp, int argc, const char *argv[])
{
    int ret;
    double sf = 1.0;

    GED_CHECK_VIEW(gedp, GED_ERROR);
    GED_CHECK_ARGC_GT_0(gedp, argc, GED_ERROR);

    /* must be wanting help */
    if (argc != 2) {
        bu_vls_printf(gedp-&gt;ged_result_str, "Usage: %s scale_factor", argv[0]);
        return (argc == 1) ? GED_HELP : GED_ERROR;
    }

    /* get the scale factor */
    ret = bu_sscanf(argv[1], "%lf", &amp;sf);
    if (ret != 1 || sf &lt; SMALL_FASTF || sf &gt; INFINITY) {
        bu_vls_printf(gedp-&gt;ged_result_str, "ERROR: bad scale factor [%s]", argv[1]);
        return GED_ERROR;
    }

    return zoom(gedp, sf);
}</pre></body></html>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

