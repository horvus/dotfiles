
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
 <title>/chapter: E-Csound-In-Ios / CSOUND</title>
 <link type="text/css" href="/site_static/css/draft.css" rel="Stylesheet" />

 <link rel="alternate" type="application/rss+xml" title="RSS feed for CSOUND" href="/feeds/rss/book/csound/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for CSOUND" href="/feeds/atom/book/csound/" /> 

 <link rel="alternate" type="application/rss+xml" title="RSS feed for chapter E. CSOUND IN iOS" href="/feeds/rss/chapter/csound/csound/" /> 
 <link rel="alternate" type="application/atom+xml" title="Atom feed for chapter E. CSOUND IN iOS" href="/feeds/atom/chapter/csound/csound/" /> 
 
 <script type="text/javascript" src="/site_static/js/draft.js"></script>


   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/csound/_draft/_v/1.1/e-csound-in-ios/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    

<h2>CSOUND</h2>
<div class="padded">
 <div id="bookmenu" style="background: url(/site_static/images/draft_bg.png) repeat !important;"> 
  <ul>
   
    
      <li><b>INTRODUCTION</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/preface/">PREFACE</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/how-to-use-this-manual/">HOW TO USE THIS MANUAL</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/on-this-release/">ON THIS RELEASE</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/credits/">CREDITS</a></li>
    
   
    
      <li><b>01 BASICS</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-digital-audio/">A. DIGITAL AUDIO</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-pitch-and-frequency/">B. PITCH AND FREQUENCY</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-intensities/">C. INTENSITIES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-random/">D. RANDOM</a></li>
    
   
    
      <li><b>02 QUICK START</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-make-csound-run/">A. MAKE CSOUND RUN</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-csound-syntax/">B. CSOUND SYNTAX</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-configuring-midi/">C. CONFIGURING MIDI</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-live-audio/">D. LIVE AUDIO</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/e-rendering-to-file/">E. RENDERING TO FILE</a></li>
    
   
    
      <li><b>03 CSOUND LANGUAGE</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-initialization-and-performance-pass/">A. INITIALIZATION AND PERFORMANCE PASS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-local-and-global-variables/">B. LOCAL AND GLOBAL VARIABLES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-control-structures/">C. CONTROL STRUCTURES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-function-tables/">D. FUNCTION TABLES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/e-arrays/">E. ARRAYS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/f-live-events/">F. LIVE EVENTS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/g-user-defined-opcodes/">G. USER DEFINED OPCODES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/h-macros/">H. MACROS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/i-functional-syntax/">I. FUNCTIONAL SYNTAX</a></li>
    
   
    
      <li><b>04 SOUND SYNTHESIS</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-additive-synthesis/">A. ADDITIVE SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-subtractive-synthesis/">B. SUBTRACTIVE SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-amplitude-and-ring-modulation/">C. AMPLITUDE AND RING MODULATION</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-frequency-modulation/">D. FREQUENCY MODULATION</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/e-waveshaping/">E. WAVESHAPING</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/f-granular-synthesis/">F. GRANULAR SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/g-physical-modelling/">G. PHYSICAL MODELLING</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/h-scanned-synthesis/">H. SCANNED SYNTHESIS</a></li>
    
   
    
      <li><b>05 SOUND MODIFICATION</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-envelopes/">A. ENVELOPES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-panning-and-spatialization/">B. PANNING AND SPATIALIZATION</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-filters/">C. FILTERS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-delay-and-feedback/">D. DELAY AND FEEDBACK</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/e-reverberation/">E. REVERBERATION</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/f-am-rm-waveshaping/">F. AM / RM / WAVESHAPING</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/g-granular-synthesis/">G. GRANULAR SYNTHESIS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/h-convolution/">H. CONVOLUTION</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/i-fourier-analysis-spectral-processing/">I. FOURIER ANALYSIS / SPECTRAL PROCESSING</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/k-ats-resynthesis/">K. ATS RESYNTHESIS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/l-amplitude-and-pitch-tracking/">L. AMPLITUDE AND PITCH TRACKING</a></li>
    
   
    
      <li><b>06 SAMPLES</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-record-and-play-soundfiles/">A. RECORD AND PLAY SOUNDFILES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-record-and-play-buffers/">B. RECORD AND PLAY BUFFERS</a></li>
    
   
    
      <li><b>07 MIDI</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-receiving-events-by-midiin/">A. RECEIVING EVENTS BY MIDIIN</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-triggering-instrument-instances/">B. TRIGGERING INSTRUMENT INSTANCES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-working-with-controllers/">C. WORKING WITH CONTROLLERS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-reading-midi-files/">D. READING MIDI FILES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/e-midi-output/">E. MIDI OUTPUT</a></li>
    
   
    
      <li><b>08 OTHER COMMUNICATION</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-open-sound-control/">A. OPEN SOUND CONTROL</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-csound-and-arduino/">B. CSOUND AND ARDUINO</a></li>
    
   
    
      <li><b>09 CSOUND IN OTHER APPLICATIONS</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-csound-in-pd/">A. CSOUND IN PD</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-csound-in-maxmsp/">B. CSOUND IN MAXMSP</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-csound-in-ableton-live/">C. CSOUND IN ABLETON LIVE</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-csound-as-a-vst-plugin/">D. CSOUND AS A VST PLUGIN</a></li>
    
   
    
      <li><b>10 CSOUND FRONTENDS</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/csoundqt/">CSOUNDQT</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/cabbage/">CABBAGE</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/blue/">BLUE</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/winxound/">WINXOUND</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/csound-via-terminal/">CSOUND VIA TERMINAL</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/web-based-csound/">WEB BASED CSOUND</a></li>
    
   
    
      <li><b>11 CSOUND UTILITIES</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/csound-utilities/">CSOUND UTILITIES</a></li>
    
   
    
      <li><b>12 CSOUND AND OTHER PROGRAMMING LANGUAGES</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/a-the-csound-api/">A. THE CSOUND API</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/b-python-inside-csound/">B. PYTHON INSIDE CSOUND</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/c-python-in-csoundqt/">C. PYTHON IN CSOUNDQT</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/d-lua-in-csound/">D. LUA IN CSOUND</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/e-csound-in-ios/">E. CSOUND IN iOS</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/f-csound-on-android/">F. CSOUND ON ANDROID</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/g-csound-and-haskell/">G. CSOUND AND HASKELL</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/h-csound-and-html/">H. CSOUND AND HTML</a></li>
    
   
    
      <li><b>13 EXTENDING CSOUND</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/extending-csound/">EXTENDING CSOUND</a></li>
    
   
    
      <li><b>OPCODE GUIDE</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/overview/">OVERVIEW</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/signal-processing-i/">SIGNAL PROCESSING I</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/signal-processing-ii/">SIGNAL PROCESSING II</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/data/">DATA</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/realtime-interaction/">REALTIME INTERACTION</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/instrument-control/">INSTRUMENT CONTROL</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/maths-pythonsystem-plugins/">MATHS, PYTHON/SYSTEM, PLUGINS</a></li>
    
   
    
      <li><b>APPENDIX</b></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/methods-of-writing-csound-scores/">METHODS OF WRITING CSOUND SCORES</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/glossary/">GLOSSARY</a></li>
    
   
    
      <li><a href="/csound/_draft/_v/1.1/links/">LINKS</a></li>
    
   
  </ul>
 </div>
 <div id="bookcontent"   style="background: url(/site_static/images/draft_bg.png) repeat !important;">
   

  <h1>CSOUND IN iOS</h1>
<p>Note: this chapter can be found in PDF form <a title="here" href="https://www.dropbox.com/s/319wxt38l9ncllx/CsoundiOS_AGuide.pdf?dl=0">here</a>&nbsp;and the Csound iOS SDK can be downloaded <a title="here" href="http://csound.github.io/download">here</a>.</p>
<h3><strong>1 Introduction</strong></h3>
<p>This guide aims to introduce and illustrate some of the power that the Csound language offers to iOS Developers. It assumes that the reader has a rudimentary background in Csound, and some experience and understanding of iOS development with either Swift or Objective-C.</p>
<p><strong>1.1 Csound for iOS</strong></p>
<p>Csound for iOS offers the developer a number of powerful tools have been created to aid in the development of audio software for Apple's iOS platform. Here we describe a promising avenue for audio programmers, and especially for those with some background in Csound: the Csound for iOS API. We hope that it will serve as a guide to those who hope to advance or diversify as audio programmers for iOS by harnessing the powerful synthesis, signal-processing, and other capabilities of Csound and the Csound API.</p>
<p>The Csound for iOS Manual (Lazzarini, Yi, Boulanger) that ships with the Csound for iOS API is intended to serve as a lighter reference for developers. This guide is distinct from it in that it is intended to be a more thorough, step-by-step approach to learning the API for the first time.</p>
<h3><strong>2 Getting Started</strong></h3>
<p>There are a number of ways in which one might begin to learn to work with the Csound for iOS API. Here, to aid in exploring it, we first describe how the project of examples that ships with the API is structured. We then talk about how to go about configuring a new iOS Xcode project to work with Csound from scratch.</p>
<p><strong>2.1 Csound for iOS Examples</strong></p>
<p>The Csound for iOS Examples project contains a number of simple examples (in both Objective-C and Swift) of how one might use Csound&rsquo;s synthesis and signal processing capabilities, and the communicative functionality of the API.</p>
<p>In the &rsquo;ViewControllers&rsquo; group, a number of subgroups exist to organize the various individual examples into a single application. This is done using the Master-Detail application layout paradigm, wherein a set of options, all of them listed in a &rsquo;master&rsquo; table, correlates to a single &rsquo;detail&rsquo; ViewController. Familiar examples of this design model, employed by Apple and provided with every iOS device, are the Settings app, and the Notes app &ndash; each of these contains a master table upon which the detail ViewController&rsquo;s content is predicated.</p>
<p>In each of these folders, you will find a unique example showcasing how one might use some of the features of the Csound for iOS API to communicate with Csound to produce and process sounds and make and play music. These are designed to introduce you to these features in a practical setting, and etch of these has a unifying theme that informs its content, interactions, and structure.</p>
<p><strong>2.2 Adding Csound to Your Project</strong></p>
<p>If you are working in Objective-C, adding Csound for iOS to your project is as simple as dragging the csound-iOS folder into your project. You should select "Groups" rather than "Folder References", and it is recommended that you elect to copy the csound-iOS folder into your project folder ("Copy Items if Needed").</p>
<p>Once you have successfully added this folder, including the CsoundObj class (the class that manages Csound on iOS) is as simple as adding an import statement to the class. For example:</p>
<pre><span style="font-family: 'courier new', courier;">//</span><br /><span style="font-family: 'courier new', courier;">// ViewController.h</span><br /><span style="font-family: 'courier new', courier;">//</span><br /><span style="font-family: 'courier new', courier;">#import "CsoundObj.h"</span></pre>
<p>Note that this only makes the CsoundObj class available, which provides an interface for Csound. There are other objects containing UI and CoreMotion bindings, as well as MIDI handling. These are discussed later in this document, and other files will need to be imported in order to access them.</p>
<p>For Swift users, the process is slightly different: you will need to first create a "bridging header": a .h header file that can import the Objective-C API for access in Swift. The naming convention is [YourProjectName]-Bridging Header.h and this file can be easily created manually in Xcode by choosing File &gt; New &gt; File &gt; Header File (Under &rsquo;Source&rsquo;), and using the naming convention described above. After this, you will need to navigate to your project build settings and add the path to this file (relative to your project&rsquo;s .xcodeproj project file).</p>
<p>Once this is done, navigate to the bridging header in Xcode and add your Objective-C #import statements here. For example:</p>
<pre><span style="font-family: 'courier new', courier;">//</span><br /><span style="font-family: 'courier new', courier;">// CsoundiOS_ExampleSwift-Bridging-Header.h</span><br /><span style="font-family: 'courier new', courier;">// CsoundiOS_ExampleSwift</span><br /><span style="font-family: 'courier new', courier;">//</span></pre>
<pre><span style="font-family: 'courier new', courier;">#ifndef CsoundiOS_ExampleSwift_Bridging_Header_h</span><br /><span style="font-family: 'courier new', courier;">#define CsoundiOS_ExampleSwift_Bridging_Header_h</span></pre>
<pre><span style="font-family: 'courier new', courier;">#import "CsoundObj.h"</span></pre>
<pre><span style="font-family: 'courier new', courier;">#endif /* CsoundiOS_ExampleSwift_Bridging_Header_h */</span></pre>
<p>You do not need to add any individual import statements to Swift files, CsoundObj&rsquo;s functionality should be accessible in your .swift files after this process is complete.</p>
<p><strong>2.3 Playing a .csd File</strong></p>
<p>The first thing we will do so that we can play a .csd file is add our .csd file to our project. In this case, we will add a simple .csd (in this case named test.csd) that plays a sine tone with a frequency of 440Hz for ten seconds. Sample Csound code for this is:</p>
<pre><span style="font-family: 'courier new', courier;">&lt;CsoundSynthesizer&gt;</span><br /><span style="font-family: 'courier new', courier;">&lt;CsOptions&gt;</span><br /><span style="font-family: 'courier new', courier;">-odac</span><br /><span style="font-family: 'courier new', courier;">&lt;/CsOptions&gt;</span><br /><span style="font-family: 'courier new', courier;">&lt;CsInstruments&gt;</span></pre>
<pre><br /><span style="font-family: 'courier new', courier;">sr = 44100</span><br /><span style="font-family: 'courier new', courier;">ksmps = 128</span><br /><span style="font-family: 'courier new', courier;">nchnls = 2</span><br /><span style="font-family: 'courier new', courier;">0dbfs = 1</span></pre>
<pre><br /><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">asig poscil 0.5 , 440</span><br /><span style="font-family: 'courier new', courier;">outs asig , asig</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<pre><br /><span style="font-family: 'courier new', courier;">&lt;/CsInstruments&gt;</span><br /><span style="font-family: 'courier new', courier;">&lt;CsScore&gt;</span><br /><span style="font-family: 'courier new', courier;">i1 0 10</span><br /><span style="font-family: 'courier new', courier;">&lt;/CsScore&gt;</span><br /><span style="font-family: 'courier new', courier;">&lt;/CsoundSynthesizer&gt;</span></pre>
<p>We will add this to our Xcode project by dragging and dropping it into our project&rsquo;s main folder, making sure to select "Copy items if needed" and to add it to our main target.</p>
<p>In order to play this .csd file, we must first create an instance of the CsoundObj class. We can do this by creating a property of our class as follows, in our .h file (for example, in ViewController.h):</p>
<pre><span style="font-family: 'courier new', courier;">//</span><br /><span style="font-family: 'courier new', courier;">// ViewController.h</span><br /><span style="font-family: 'courier new', courier;">// CsoundiOS_ExampleProject</span><br /><span style="font-family: 'courier new', courier;">//</span></pre>
<pre><span style="font-family: 'courier new', courier;">#import &lt;UIKit/UIKit.h&gt;</span><br /><span style="font-family: 'courier new', courier;">#import "CsoundObj.h"</span></pre>
<pre><br /><span style="font-family: 'courier new', courier;">@interface ViewController : UIViewController</span></pre>
<pre><span style="font-family: 'courier new', courier;">@property CsoundObj *csound;</span></pre>
<pre><span style="font-family: 'courier new', courier;">@end</span></pre>
<p>Once we&rsquo;ve done this, we can move over to the corresponding .m file (in this case, ViewController.m) and instantiate our Csound object. Here we will do this in our viewDidLoad method, that is called when our ViewController&rsquo;s view loads.</p>
<pre><span style="font-family: 'courier new', courier;">//</span><br /><span style="font-family: 'courier new', courier;">// ViewController.m</span><br /><span style="font-family: 'courier new', courier;">// CsoundiOS_ExampleProject</span><br /><span style="font-family: 'courier new', courier;">//</span></pre>
<pre><br /><span style="font-family: 'courier new', courier;">@interface ViewController()</span><br /><span style="font-family: 'courier new', courier;">@end</span><br /><span style="font-family: 'courier new', courier;">@implementation ViewController</span></pre>
<pre><br /><span style="font-family: 'courier new', courier;">- (void)viewDidLoad {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [super viewDidLoad];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; // Allocate memory for and initialize a CsoundObj</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; self.csound = [[CsoundObj alloc] init];</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>Note: in order to play our .csd file, we must first get a path to it that we can give Csound. Because part of this path can vary depending on certain factors (for example, the user&rsquo;s native language setting), we cannot pass a static or "hard-coded" path. Instead, we will access the file using the NSBundle class (or &rsquo;Bundle&rsquo; in Swift).</p>
<p>The .csd file is copied as a resource (you can see this under the &rsquo;Build Phases&rsquo; tab in your target&rsquo;s settings), and so we will access it and tell Csound to play it as follows:</p>
<pre><span style="font-family: 'courier new', courier;">- (void)viewDidLoad {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [super viewDidLoad];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; self.csound = [[CsoundObj alloc] init];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; //CsoundObj *csound is declared as a property in .h</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; NSString *pathToCsd = [[NSBundle mainBundle pathForResource: @"test"&nbsp;</span><span style="font-family: 'courier new', courier;">ofType:@ "csd"];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [self.csound play:pathToCsd];</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>Note that in Swift, this is a little easier and we can simply use:</p>
<pre><span style="font-family: 'courier new', courier;">import UIKit</span><br /><span style="font-family: 'courier new', courier;">class ViewController: UIViewController {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; var csound = CsoundObj()</span></pre>
<pre><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; override func viewDidLoad() {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; &nbsp; &nbsp; super.viewDidLoad()</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; &nbsp; &nbsp; let pathToCsd = Bundle.main.path(forResource: "test", ofType: "csd")</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; &nbsp; &nbsp; self.csound.play(pathToCsd)</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; }</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>With this, the test.csd file should load and play, and we should hear a ten-second long sine tone shortly after the application runs (i.e. when the main ViewController&rsquo;s main view loads).</p>
<h3><strong>3 Recording and Rendering</strong></h3>
<p><strong>3.1 Recording (Real-Time)</strong></p>
<p>To record the output of Csound in real-time, instead of the play method, use:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">NSURL *docsDirURL = [[[NSFileManager defaultManager]&nbsp;</span><span style="font-family: 'courier new', courier;">URLsForDirectory:NSDocumentDirectory&nbsp;</span><span style="font-family: 'courier new', courier;">inDomains:NSUserDomainMask]&nbsp;</span><span style="font-family: 'courier new', courier;">lastObject];</span><br /><span style="font-family: 'courier new', courier;">NSURL *file = [docsDirURL URLByAppendingPathComponent:@"outputFile.aif"]];</span><br /><span style="font-family: 'courier new', courier;">NSString *csdPath = [[NSBundle mainBundle] pathForResource:@"csdToRecord"&nbsp;</span><span style="font-family: 'courier new', courier;">ofType:@"csd"];</span><br /><span style="font-family: 'courier new', courier;">[self.csound record:csdPath toURL:file];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">let docsDirURL = FileManager.default.urls(for: .documentDirectory,&nbsp;</span><span style="font-family: 'courier new', courier;">in: .userDomainMask)[0]</span><br /><span style="font-family: 'courier new', courier;">let file = docsDirURL.appendingPathComponent("outFile.aif")</span><br /><span style="font-family: 'courier new', courier;">let csdPath = Bundle.main.path(forResource: "csdFile", ofType: "csd")</span><br /><span style="font-family: 'courier new', courier;">csound.record(csdPath, to: file)</span></pre>
<p>Alternatively, the recordToURL method can be used while Csound is already running to begin recording:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">NSURL *docsDirURL = [[[NSFileManager defaultManager]&nbsp;</span><span style="font-family: 'courier new', courier;">URLsForDirectory:NSDocumentDirectory&nbsp;</span><span style="font-family: 'courier new', courier;">inDomains:NSUserDomainMask]&nbsp;</span><span style="font-family: 'courier new', courier;">lastObject];</span><br /><span style="font-family: 'courier new', courier;">NSURL *file = [docsDirURL URLByAppendingPathComponent:@"outputFile.aif"]];</span><br /><span style="font-family: 'courier new', courier;">[self.csound recordToURL:file];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">let docsDirURL = FileManager.default.urls(for: .documentDirectory,&nbsp;</span><span style="font-family: 'courier new', courier;">in: .userDomainMask)[0]</span><br /><span style="font-family: 'courier new', courier;">let file = docsDirURL.appendingPathComponent("outFile.aif")</span><br /><span style="font-family: 'courier new', courier;">csound.record(to: file)</span></pre>
<p>Note: the stopRecording method is used to stop recording without also stopping Csound&rsquo;s real-time rendering.</p>
<p><strong>3.2 Rendering (Offline)</strong></p>
<p>You can also render a .csd to an audio file offline. To render Csound offline to disk, use the record:toFile: method, which takes a path rather than a URL as its second argument. For example:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">NSString *docsDir = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,&nbsp;</span><span style="font-family: 'courier new', courier;">NSUserDomainMask, YES)[0];</span><br /><span style="font-family: 'courier new', courier;">NSString *file = [docsDir stringByAppendingPathComponent:@"outFile.aif"];</span><br /><span style="font-family: 'courier new', courier;">NSString *csdPath = [[NSBundle mainBundle] pathForResource:@"csdFile"&nbsp;</span><span style="font-family: 'courier new', courier;">ofType:@"csd"];</span><br /><span style="font-family: 'courier new', courier;">[self record:csdPath toFile:file];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">let docsDir = NSSearchPathForDirectoriesInDomains(.documentDirectory,&nbsp;</span><span style="font-family: 'courier new', courier;">.userDomainMask, true)[0]</span><br /><span style="font-family: 'courier new', courier;">let file = docsDir.appending("/outFile.aif")</span><br /><span style="font-family: 'courier new', courier;">let csdPath = Bundle.main.path(forResource: "csdFile", ofType: "csd")</span><br /><span style="font-family: 'courier new', courier;">csound.record(csdPath, toFile: file)</span></pre>
<p>These demonstrations above save the audio files in the app&rsquo;s documents directory, which allows write access for file and subdirectory storage on iOS. Note that the -W and -A flags behave as usual on iOS: they will decide whether the file rendered is a WAV or an AIFF file. In the event that neither is provided, the latter will be used as a default.</p>
<h3><strong>4 The CsoundUI Class</strong></h3>
<p>The CsoundUI class provides for direct bindings between named Csound channels and commonly used objects from the UIKit iOS framework. While it is not necessary to use a CsoundUI object for this communication between iOS and Csound, it can, in many cases, abstract the process of setting up a UI object binding to a single line of code. To initialize a CsoundUI object, we must give it a reference to our Csound object:</p>
<pre><span style="font-family: 'courier new', courier;">//Objective-C</span><br /><span style="font-family: 'courier new', courier;">CsoundUI *csoundUI = [[CsoundUI alloc] initWithCsoundObj: self.csound];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">var csoundUI = CsoundUI(csoundObj: csound)</span></pre>
<p>Normally, however, these objects are declared as properties rather than locally in methods. As mentioned, CsoundUI uses named channels for communicating to and from Csound. Once set-up, values passed to these named channels are normally accessed through the chnget opcode, for example:</p>
<pre><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kfreq chnget " frequency "</span><br /><span style="font-family: 'courier new', courier;">asig oscil 0.5 , kfreq</span><br /><span style="font-family: 'courier new', courier;">outs asig , asig</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p>Conversely, in order to pass values from Csound, the chnset opcode is normally used with two arguments. The first is the variable, and it is followed by the channel name:</p>
<pre><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">krand randomi 300 , 2000 , 1 , 3</span><br /><span style="font-family: 'courier new', courier;">asig poscil 0.5 , krand</span><br /><span style="font-family: 'courier new', courier;">outs asig , asig</span><br /><span style="font-family: 'courier new', courier;">chnset krand , " randFreq "</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p><br /><strong>4.1 UIButton Binding</strong></p>
<p>The UIButton binding is predominantly contained within the CsoundButtonBinding class, which CsoundUI uses to create individual button bindings. To add a button binding, use:</p>
<pre><span style="font-family: 'courier new', courier;">//Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csoundUI addButton:self.button&nbsp;</span><span style="font-family: 'courier new', courier;">forChannelName:"channelName"];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundUI.add(button, forChannelName: "channelName")</span></pre>
<p>Where self.button is the button you would like to bind to, and the string "channelName" contains the name of the channel referenced by chnget in Csound.</p>
<p>The corresponding value in Csound will be equal to 1 while the button is touched, and reset to 0 when it is released. A simple example of how this might be used in Csound, based on the pvscross example by Joachim Heintz, is shown below:</p>
<pre><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kpermut chnget " crossToggle "</span><br /><span style="font-family: 'courier new', courier;">ain1 soundin " fox .wav"</span><br /><span style="font-family: 'courier new', courier;">ain2 soundin " wave .wav"</span></pre>
<pre><span style="font-family: 'courier new', courier;">;fft - analysis of file 1</span><br /><span style="font-family: 'courier new', courier;">fftin1 pvsanal ain1 , 1024 , 256 , 1024 , 1</span><br /><span style="font-family: 'courier new', courier;">;fft - analysis of file 2</span><br /><span style="font-family: 'courier new', courier;">fftin2 pvsanal ain2 , 1024 , 256 , 1024 , 1</span></pre>
<pre><span style="font-family: 'courier new', courier;">if kpermut == 1 then</span><br /><span style="font-family: 'courier new', courier;">fcross pvscross fftin2 , fftin1 , .5 , .5</span><br /><span style="font-family: 'courier new', courier;">else</span><br /><span style="font-family: 'courier new', courier;">fcross pvscross fftin1 , fftin2 , .5 , .5</span><br /><span style="font-family: 'courier new', courier;">endif</span></pre>
<pre><span style="font-family: 'courier new', courier;">aout pvsynth fcross</span><br /><span style="font-family: 'courier new', courier;">out aout</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p><strong>4.2 UISwitch Binding</strong></p>
<p>The UISwitch binding provides a connection between the UISwitch object and a named channel in Csound. This binding is managed in the CsoundSwitchBinding class and you can create a UISwitch binding by using:</p>
<pre><span style="font-family: 'courier new', courier;">//Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csoundUI addSwitch:self.uiSwitch&nbsp;</span><span style="font-family: 'courier new', courier;">forChannelName:"channelName"];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundUI.add(switch, forChannelName: "channelName")</span></pre>
<p>As in the case of the UIButton binding, the UISwitch binding provides an on-off state value (1 or 0 respectively) to Csound. Below we use it to turn on or off a simple note generator:</p>
<pre><span style="font-family: 'courier new', courier;">; Triggering instrument</span><br /><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kTrigFreq randomi gkTrigFreqMin , gkTrigFreqMax , 5</span><br /><span style="font-family: 'courier new', courier;">ktrigger metro kTrigFreq</span><br /><span style="font-family: 'courier new', courier;">kdur randomh .1 , 2 , 5</span><br /><span style="font-family: 'courier new', courier;">konoff chnget " instrToggle "</span><br /><span style="font-family: 'courier new', courier;">if konoff == 1 then</span><br /><span style="font-family: 'courier new', courier;">schedkwhen ktrigger , 0 , 0 , 2 , 0 , kdur</span><br /><span style="font-family: 'courier new', courier;">endif</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<pre><span style="font-family: 'courier new', courier;">; Sound generating instrument</span><br /><span style="font-family: 'courier new', courier;">instr 2</span><br /><span style="font-family: 'courier new', courier;">iamp random 0.03 ,0.5</span><br /><span style="font-family: 'courier new', courier;">ipan random 0 , 1</span><br /><span style="font-family: 'courier new', courier;">ipdx random 0 ,13</span><br /><span style="font-family: 'courier new', courier;">ipch table ipdx , 2+i( gkscale )</span><br /><span style="font-family: 'courier new', courier;">aenv expseg 1 , ( p3 ) , .001</span><br /><span style="font-family: 'courier new', courier;">asig oscil iamp * aenv , cpspch(ipch) , 1</span><br /><span style="font-family: 'courier new', courier;">outs asig * ipan , asig * (1 - ipan)</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p><strong>4.3 UILabel Binding</strong></p>
<p>The UILabel binding allows you to display any value from Csound in a UILabel object. This can often be a helpful way of providing feedback to the user. You can add a label binding with:</p>
<pre><span style="font-family: 'courier new', courier;">//Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csoundUI addLabel:self.label&nbsp;</span><span style="font-family: 'courier new', courier;">forChannelName:"channelName"];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundUI.add(label, forChannelName: "channelName")</span></pre>
<p>However, in this case the channel is an output channel. To demonstrate, let us add an output channel in Csound to display the frequency of the sound generating instrument&rsquo;s oscillator from the previous example (for UISwitch):</p>
<pre><span style="font-family: 'courier new', courier;">; Triggering instrument</span><br /><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kTrigFreq randomi gkTrigFreqMin , gkTrigFreqMax , 5</span><br /><span style="font-family: 'courier new', courier;">ktrigger metro kTrigFreq</span><br /><span style="font-family: 'courier new', courier;">kdur randomh .1 , 2 , 5</span><br /><span style="font-family: 'courier new', courier;">konoff chnget " instrToggle "</span><br /><span style="font-family: 'courier new', courier;">if konoff == 1 then</span><br /><span style="font-family: 'courier new', courier;">schedkwhen ktrigger , 0 , 0 , 2 , 0 , kdur</span><br /><span style="font-family: 'courier new', courier;">endif</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<pre><span style="font-family: 'courier new', courier;">; Sound generating instrument</span><br /><span style="font-family: 'courier new', courier;">instr 2</span><br /><span style="font-family: 'courier new', courier;">iamp random 0.03 ,0.5</span><br /><span style="font-family: 'courier new', courier;">ipan random 0 , 1</span><br /><span style="font-family: 'courier new', courier;">ipdx random 0 ,13</span><br /><span style="font-family: 'courier new', courier;">ipch table ipdx , 2+i( gkscale )</span><br /><span style="font-family: 'courier new', courier;">aenv expseg 1 , ( p3 ) , .001</span><br /><span style="font-family: 'courier new', courier;">asig oscil iamp * aenv , cpspch(ipch) , 1</span><br /><span style="font-family: 'courier new', courier;">chnset cpspch(ipch) , " pitchOut "</span><br /><span style="font-family: 'courier new', courier;">outs asig * ipan , asig * (1 - ipan)</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p>Note additionally that the desired precision of the value display can be set beforehand using the labelPrecision property of the CsoundUI object. For example:</p>
<pre><span style="font-family: 'courier new', courier;">self.csoundUI.labelPrecision = 4;</span></pre>
<p><strong>4.4 UISlider Binding</strong></p>
<p>The UISlider binding is possibly the most commonly used UI binding - it allows the value of a UISlider object to be passed to Csound whenever it changes. This is set up in the CsoundSliderBinding class and we access it via CsoundUI using:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csoundUI addSlider:self.slider</span><br /><span style="font-family: 'courier new', courier;">forChannelName:"channelName"];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundUI.add(slider, forChannelName: "channelName")</span></pre>
<p>Note that this restricts you to using the slider&rsquo;s actual value, rather than a rounded verion of it or some other variation, which would normally be best suited to a manual value binding, which is addressed later in this guide. An example is provided below of two simple such UISlider-bound values in Csound:</p>
<pre><span style="font-family: 'courier new', courier;">sr = 44100</span><br /><span style="font-family: 'courier new', courier;">ksmps = 128</span><br /><span style="font-family: 'courier new', courier;">nchnls = 2</span><br /><span style="font-family: 'courier new', courier;">0dbfs = 1</span></pre>
<pre><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kfreq chnget " frequency " ; input 0 - 1</span><br /><span style="font-family: 'courier new', courier;">kfreq expcurve kfreq , 500 ; exponential distribution</span><br /><span style="font-family: 'courier new', courier;">kfreq *= 19980 ; scale to range</span><br /><span style="font-family: 'courier new', courier;">kfreq += 20 ;add offset</span><br /><span style="font-family: 'courier new', courier;">kamp chnget " amplitude "</span><br /><span style="font-family: 'courier new', courier;">kamp port kamp , .001 ; smooth values</span><br /><span style="font-family: 'courier new', courier;">asig poscil kamp , kfreq</span><br /><span style="font-family: 'courier new', courier;">outs asig , asig</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p>Above we get &rsquo;around&rsquo; being restricted to the value of the UISlider by creating an exponential distribution in Csound. Of course we could simply make the minimum and maximum values of the UISlider 20 and 20000 respectively, but that would be a linear distribution by default. In both cases here, the UISlider&rsquo;s range of floating point values is set to be from 0 to 1.</p>
<p><strong>4.5 Momentary Button Binding</strong></p>
<p>The momentary button binding is similar to the normal UIButton binding in that it uses a UIButton, however it differs in how it uses this object. The UIButton binding passes a channel value of 1 for as long as the UIButton is held, whereas the momentary button binding sets the channel value to 1 for one Csound k-period (i.e. one k-rate sample). It does this by setting an intermediate value to 1 when the button is touched, passing this to Csound on the next k-cycle, and immediately resetting it to 0 after passing it. This is all occurring predominantly in the CsoundMomentaryButtonBinding class, which we access using:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csoundUI addMomentaryButton:self.triggerButton </span><span style="font-family: 'courier new', courier;">forChannelName:"channelName"];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundUI.addMomentaryButton(triggerButton, forChannelName: "channelName")</span></pre>
<p>Here&rsquo;s a simple usage example:</p>
<pre><span style="font-family: 'courier new', courier;">; Triggering instrument</span><br /><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">ktrigger chnget " noteTrigger "</span><br /><span style="font-family: 'courier new', courier;">schedkwhen ktrigger , 0 , 0 , 2 , 0 , kdur</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<pre><span style="font-family: 'courier new', courier;">; Sound generating instrument</span><br /><span style="font-family: 'courier new', courier;">instr 2</span><br /><span style="font-family: 'courier new', courier;">iamp random 0.03 ,0.5</span><br /><span style="font-family: 'courier new', courier;">ipan random 0 , 1</span><br /><span style="font-family: 'courier new', courier;">ipdx random 0 ,13</span><br /><span style="font-family: 'courier new', courier;">ipch table ipdx , 2+i( gkscale )</span><br /><span style="font-family: 'courier new', courier;">aenv expseg 1 , ( p3 ) , .001</span><br /><span style="font-family: 'courier new', courier;">asig oscil iamp * aenv , cpspch(ipch) , 1</span><br /><span style="font-family: 'courier new', courier;">chnset cpspch(ipch) , " pitchOut "</span><br /><span style="font-family: 'courier new', courier;">outs asig * ipan , asig * (1 - ipan)</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p>This replaces the automatic instrument triggering with a manual trigger. Every time the UIButton is touched, a note (by way of an instance of instr 2) will be triggered. This may seem like a more esoteric binding, but there are a variety of potential uses.</p>
<h3><strong>5 The CsoundMotion Class</strong></h3>
<p>The CsoundMotion class and its associated bindings allow information to be passed from a device&rsquo;s motion sensors, via the CoreMotion framework, to Csound. As with CsoundUI, it is possible to pass this data indirectly by writing code to mediate between CoreMotion and Csound, but CsoundMotion simplifies and greatly abstracts this process. Subsection 4.4 shows an example of how these values are accessed and might be used in Csound. Note that with CsoundMotion, you do not assign channel names: they are pre-assigned by the relevant objects (e.g. "AccelerometerX").</p>
<p>To declare and initialize a CsoundMotion object, use:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">CsoundMotion *csoundMotion = [[CsoundMotion alloc] </span><span style="font-family: 'courier new', courier;">initWithCsoundObj:self.csound];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">var csoundMotion = CsoundMotion(csoundObj: csound)</span></pre>
<p>As with CsoundUI, it may often be advantageous to declare the CsoundMotion object as a property rather than locally.</p>
<p><strong>5.1 Accelerometer Binding</strong></p>
<p>The acclerometer binding, implemented in the CsoundAccelerometerBinding class and enabled through the CsoundMotion class, allows access to an iOS device&rsquo;s accelerometer data along its three axes (X, Y, Z). The accelerometer is a device that measures acceleration, aiding in several basic interactions. To enable it, use:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[csoundMotion enableAccelerometer];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundMotion.enableAccelerometer()</span></pre>
<p><strong>5.2 Gyroscope Binding</strong></p>
<p>The gyroscope binding, implemented in the CsoundGyroscopeBinding class and enabled through the CsoundMotion class, allows access to an iOS device&rsquo;s gyroscope data along its three axes (X, Y, Z). The accelerometer is a device that allows rotational velocity to be determined, and together with the accelerometer forms a system with six degrees of freedom. To enable it, use:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[csoundMotion enableGyroscope];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundMotion.enableGyroscope()</span> </pre>
<p><strong>5.3 Attitude Binding</strong></p>
<p>Finally, the attitude binding, implemented in CsoundAttitudeBinding and enabled through CsoundMotion, allows access to an iOS device&rsquo;s &rsquo;attitude data&rsquo;. As the Apple reference notes, &rsquo;attitude&rsquo; refers to the orientation of a body relative to a given frame of reference. CsoundMotion enables this as three Euler angle valies: &rsquo;roll&rsquo;, &rsquo;pitch&rsquo;, and &rsquo;yaw&rsquo; (rotation around X, Y, and Z respectively). To enable the attitude binding, use:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[csoundMotion enableAttitude];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csoundMotion.enableAttitude()</span></pre>
<p>Together, these bindings enable control of Csound parameters with device motion in ways that are very simple and straightforward. In the following subsection, an example demonstrating each of the pre-set channel names as well as how some of this information might be used is provided.</p>
<p><strong>5.4 Motion Csound Example</strong></p>
<p>Here is an example of a Csound instrument that accesses all of the data, and demonstrates uses for some of it. This example is taken from the Csound for iOS Examples project.</p>
<pre><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kaccelX chnget " accelerometerX "</span><br /><span style="font-family: 'courier new', courier;">kaccelY chnget " accelerometerY "</span><br /><span style="font-family: 'courier new', courier;">kaccelZ chnget " accelerometerZ "</span></pre>
<pre><span style="font-family: 'courier new', courier;">kgyroX chnget " gyroX "</span><br /><span style="font-family: 'courier new', courier;">kgyroY chnget " gyroY "</span><br /><span style="font-family: 'courier new', courier;">kgyroZ chnget " gyroZ "</span></pre>
<pre><span style="font-family: 'courier new', courier;">kattRoll chnget " attitudeRoll "</span><br /><span style="font-family: 'courier new', courier;">kattPitch chnget " attitudePitch "</span><br /><span style="font-family: 'courier new', courier;">kattYaw chnget " attitudeYaw "</span></pre>
<pre><span style="font-family: 'courier new', courier;">kcutoff = 5000 + (4000 * kattYaw )</span><br /><span style="font-family: 'courier new', courier;">kresonance = .3 + (.3 * kattRoll )</span><br /><span style="font-family: 'courier new', courier;">kpch = 880 + ( kaccelX * 220)</span><br /><span style="font-family: 'courier new', courier;">a1 vco2 ( kattPitch + .5) * .2 , kpch</span><br /><span style="font-family: 'courier new', courier;">a1 moogladder a1 , kcutoff , kresonance</span><br /><span style="font-family: 'courier new', courier;">aL , aR reverbsc a1 , a1 , .72 , 5000</span><br /><span style="font-family: 'courier new', courier;">outs aL , aR</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p>Each of the channel names is shown here, and each corresponds to what is automatically set in the relevant binding. A little experimenting can be very helpful in determining what to use these values for in your particular application, and of course one is never under any obligation to use all of them. Regardless, they can be helpful and very straightforward ways to add now-familiar interactions.</p>
<h3><strong>6 The CsoundBinding Protocol</strong></h3>
<p>The CsoundBinding protocol allows you to read values from and write values to Csound using named channels that can be referenced in your .csd file using opcodes like chnget and chnset, as described in the earlier section on CsoundUI. The protocol definition from CsoundObj is:</p>
<pre><span style="font-family: 'courier new', courier;">@protocol CsoundBinding &lt;NSObject&gt;</span><br /><span style="font-family: 'courier new', courier;">- (void)setup:(CsoundObj*)csoundObj;</span><br /><span style="font-family: 'courier new', courier;">@optional</span><br /><span style="font-family: 'courier new', courier;">- (void)cleanup;</span><br /><span style="font-family: 'courier new', courier;">- (void)updateValuesFromCsound;</span><br /><span style="font-family: 'courier new', courier;">- (void)updateValuesToCsound;</span><br /><span style="font-family: 'courier new', courier;">@end</span></pre>
<p>In order to add a binding object to Csound, use CsoundObj&rsquo;s addBinding method:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csound addBinding:self];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csound.addBinding(self)</span> </pre>
<p>Note that you will need to conform to the CsoundBinding protocol, and implement. at minimum, the required setup method. The CsoundBinding setup method will be called on every object added as a binding, and the remaining methods, marked with the @optional directive will be called on any bindings that implement them.</p>
<p><strong>6.1 Channels and Channel Types</strong></p>
<p>Named channels allow us to pass data to and from Csound while it is running. These channels refer to memory locations that we can write to and Csound can read from, and vice-versa. The two most common channel types are:&nbsp;<span style="font-family: 'courier new', courier;">CSOUND_CONTROL_CHANNEL</span> refers to a floating point control channel, normally associated with a k-rate variable in Csound.&nbsp;<span style="font-family: 'courier new', courier;">CSOUND_AUDIO_CHANNEL</span> refers to an array of floating point audio samples of length ksmps.</p>
<p>Each of these can be an input or output channel depending on whether values are being passed to or from Csound.</p>
<p>Given below is an example of using named channels in a simplified Csound instrument. The polymorphic chnget and chnset opcodes are used, and the context here implies that kverb received its value from an input control channel named "verbMix", and that asig outputs to an audio channel named "samples".</p>
<pre><span style="font-family: 'courier new', courier;">giSqr ftgen 2 , 0 , 8192 , 10 , 1 , 0 , .33 , 0 , .2 , 0 , .14 ,&nbsp;</span><span style="font-family: 'courier new', courier;">0 , .11 , 0 , .09</span></pre>
<pre><span style="font-family: 'courier new', courier;">instr 1</span><br /><span style="font-family: 'courier new', courier;">kfreq = p4</span><br /><span style="font-family: 'courier new', courier;">kverb chnget " verbMix "</span><br /><span style="font-family: 'courier new', courier;">aosc poscil .5 , kfreq , 2</span><br /><span style="font-family: 'courier new', courier;">arvb reverb aosc , 1.5</span><br /><span style="font-family: 'courier new', courier;">asig = (aosc * (1 - kverb) ) + (arvb * kverb)</span><br /><span style="font-family: 'courier new', courier;">chnset asig , " samples "</span><br /><span style="font-family: 'courier new', courier;">outs asig , asig</span><br /><span style="font-family: 'courier new', courier;">endin</span></pre>
<p>The section that follows will describe how to set up and pass values to and from this instrument&rsquo;s channels in an iOS application.</p>
<h3><strong>6.2 The Setup Method</strong></h3>
<p>The setup method is called before Csound&rsquo;s first performance pass, and this is typically where channel references are created. For example:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">// verbPtr and samplesPtr are instance variables of type float*</span></pre>
<pre><span style="font-family: 'courier new', courier;">-(void)setup:(CsoundObj *)csoundObj {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; verbPtr = [csoundObj getInputChannelPtr:@"verbMix"&nbsp;</span><span style="font-family: 'courier new', courier;">channelType:CSOUND_CONTROL_CHANNEL];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; samplesPtr = [csoundObj getOutputChannelPtr:@"samples"&nbsp;</span><span style="font-family: 'courier new', courier;">channelType:CSOUND_AUDIO_CHANNEL];</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">var verbPtr: UnsafeMutablePointer&lt;Float&gt;?</span><br /><span style="font-family: 'courier new', courier;">var samplesPtr: UnsafeMutablePointer&lt;Float&gt;?</span></pre>
<pre><span style="font-family: 'courier new', courier;">func setup(_ csoundObj: CsoundObj) {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; verbPtr = csoundObj.getInputChannelPtr("verbMix",&nbsp;</span><span style="font-family: 'courier new', courier;">channelType: CSOUND_CONTROL_CHANNEL)</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; samplesPtr = csoundObj.getOutputChannelPtr("samples",&nbsp;</span><span style="font-family: 'courier new', courier;">channelType: CSOUND_AUDIO_CHANNEL)</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>The cleanup method from CsoundBinding, also optional, is intended for use in removing bindings once they are no longer active. This can be done using CsoundObj&rsquo;s removeBinding method:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">// verbPtr and samplesPtr are instance variables of type float*</span><br /><span style="font-family: 'courier new', courier;">-(void)cleanup {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [self.csound removeBinding:self];</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">func cleanup() {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; csound.removeBinding(self)</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<h3><strong>6.3 Communicating Values To and From Csound</strong></h3>
<p>Communicating values to Csound is normally handled in the updateValuesToCsound method. This method is called once per performance pass (i.e. at the k-rate). For example:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">-(void)updateValuesToCsound {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; *verbPtr = self.verbSlider.value;</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">func updateValuesToCsound() {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; verbPtr?.pointee = verbSlider.value</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>This updates the value at a memory location that Csound has already associated with a named channel (in the setup method). This process has essentially replicated the functionality of the CsoundUI API&rsquo;s slider binding. The advantage here is that we could perform any transformation on the slider value, or associate another value (that might not be associated with a UI object) with the channel altogether. To pass values back from Csound, we use the updateValuesFromCsound method.</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">-(void)updateValuesFromCsound {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; float *samps = samplesPtr;</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>Note that in Swift, we have do a little extra work in order to get an array of samples that we can easily index into:</p>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">func updateValuesFromCsound() {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; let samps = samplesPtr?.pointee</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; let sampsArray = [Float](UnsafeBufferPointer(start: audioPtr,</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; count: Int(csound.getKsmps())))</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>Note also that updateValuesToCsound is called before updateValuesFromCsound during each performance pass, with the Csound engine performance call in between the two.</p>
<h3><strong>7 The CsoundObjListener Protocol</strong></h3>
<p>The CsoundObjListener protocol allows objects in your program to be notified when Csound begins running, and when it completes running. The protocol definition from CsoundObj is:</p>
<pre><span style="font-family: 'courier new', courier;">@protocol CsoundObjListener &lt;NSObject&gt;</span><br /><span style="font-family: 'courier new', courier;">@optional</span><br /><span style="font-family: 'courier new', courier;">- (void)csoundObjStarted:(CsoundObj *)csoundObj;</span><br /><span style="font-family: 'courier new', courier;">- (void)csoundObjCompleted:(CsoundObj *)csoundObj;</span><br /><span style="font-family: 'courier new', courier;">@end</span> </pre>
<p>Note that there are no methods that an object is required to adopt in order to conform to this protocol. These methods simply allow an object to elect to be notified when Csound either begins, completes running, or both. Note that these methods are not called on the main thread, so any UI work must be explicitly run on the main thread. For example:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">-(void)viewDidLoad {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [super viewDidLoad];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [self.csound addListener:self];</span><br /><span style="font-family: 'courier new', courier;">}</span><br /><span style="font-family: 'courier new', courier;">- (void)csoundObjStarted:(CsoundObj *)csoundObj {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [self.runningLabel performSelectorOnMainThread:@selector(setText:)&nbsp;</span><span style="font-family: 'courier new', courier;">withObject:@"Csound Running"&nbsp;</span><span style="font-family: 'courier new', courier;">waitUntilDone:NO];</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">override func viewDidLoad() {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; super.viewDidLoad()</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; csound.add(self)</span><br /><span style="font-family: 'courier new', courier;">}</span><br /><span style="font-family: 'courier new', courier;">func csoundObjCompleted(_ csoundObj: CsoundObj) {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; DispatchQueue.main.async { [unowned self] in</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; &nbsp; &nbsp; self.runningLabel.text = "Csound Stopped"</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; }</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<h3><strong>8 Console Output</strong></h3>
<p>Console output from Csound is handled via a callback. You can set the method that handles console info using CsoundObj&rsquo;s setMessageCallbackSelector method, and passing in an appropriate selector, for instance:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">[self.csound setMessageCallbackSelector:@selector(printMessage:)];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">csound.setMessageCallbackSelector(#selector(printMessage(_:)))</span></pre>
<p>An object of type NSValue will be passed in. This object is acting as a wrapper for a C struct of type Message. The definition for Message in CsoundObj.h is:</p>
<pre><span style="font-family: 'courier new', courier;">typedef struct {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; CSOUND *cs;</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; int attr;</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; const char *format;</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; va_list valist;</span><br /><span style="font-family: 'courier new', courier;">} Message;</span> </pre>
<p>The two fields of interest to us for the purposes of console output are format and valist. The former is a format string, and the latter represents a list of arguments to match its format specifiers.</p>
<p>The process demonstrated in the code examples below can be described as:</p>
<ol>
<li>Declare an instance of a Message struct.</li>
<li>Unwrap the NSValue to store its contained Message value at the address of this instance.</li>
<li>Declare an empty C string, to act as a buffer.</li>
<li>Use the vsnprintf function to populate the buffer with the formatted output string.</li>
<li>Wrap this C string in an Objective-C NSString or Swift String.</li>
</ol>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">- (void)printMessage:(NSValue *)infoObj</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; Message info;</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; [infoObj getValue:&amp;info];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; char message[1024];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; vsnprintf(message, 1024, info.format, info.valist);</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; NSString *messageStr = [NSString stringWithFormat:@"%s", message];</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; NSLog(@"%@", messageStr);</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>Note that in Swift, we have to create a CVaListPointer (equivalent to a va_list* in C) for use with the vsnprintf() function:</p>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">func messageCallback(_ infoObj: NSValue) {</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; var info = Message()</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; infoObj.getValue(&amp;info)</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; let message = UnsafeMutablePointer&lt;Int8&gt;.allocate(capacity: 1024)</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; let va_ptr: CVaListPointer = CVaListPointer(_fromUnsafeMutablePointer:&nbsp;</span><span style="font-family: 'courier new', courier;">&amp;(info.valist))</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; vsnprintf(message, 1024, info.format, va_ptr)</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; let messageStr = String(cString: message)</span><br /><span style="font-family: 'courier new', courier;">&nbsp; &nbsp; print(messageStr)</span><br /><span style="font-family: 'courier new', courier;">}</span></pre>
<p>In both cases above, we are printing the resulting string objects to Xcode&rsquo;s console. This can be very useful for finding and addressing issues that have to do with Csound or with a .csd file you might be using.</p>
<p>We could also pass the resulting string object around in our program; for example, we could insert the contents of this string object into a UITextView for a simulated Csound console output.</p>
<h3><strong>9 Csound-iOS and MIDI</strong></h3>
<p><strong>9.1 CsoundObj and MIDI</strong></p>
<p>The Csound iOS API provides two possible ways of passing MIDI information to Csound. CsoundObj can receive MIDI events from CoreMIDI directly. By default, this functionality is disabled, but setting CsoundObj&rsquo;s midiInEnabled property to true (or YES on Objective-C) enables it. This must, however be done before Csound is run.</p>
<p>Note that you must also set the appropriate command-line flag in your csd, under CsOptions. For example, -M0. Additionally, the MIDI device must be connected before the application is started.</p>
<p><strong>9.2 MidiWidgetsManager</strong></p>
<p>The second way that is provided to communicate MIDI information to Csound is indirect, via the use of UI widgets and CsoundUI. In this case, the MidiWidgetsManager uses a MidiWidgetsWrapper to connect a MIDI CC to a UI object, and then CsoundUI can be used to connect this UI object&rsquo;s value to a named channel in Csound. For instance:</p>
<pre><span style="font-family: 'courier new', courier;">// Objective-C</span><br /><span style="font-family: 'courier new', courier;">MidiWidgetsManager *widgetsManager = [[MidiWidgetsManager alloc] init];</span><br /><span style="font-family: 'courier new', courier;">[widgetsManager addSlider:self.cutoffSlider forControllerNumber:5];</span><br /><span style="font-family: 'courier new', courier;">[csoundUI addSlider:self.cutoffSlider forChannelName:@"cutoff"];</span><br /><span style="font-family: 'courier new', courier;">[widgetsManager openMidiIn];</span></pre>
<pre><span style="font-family: 'courier new', courier;">// Swift</span><br /><span style="font-family: 'courier new', courier;">let widgetsManager = MidiWidgetsManager()</span><br /><span style="font-family: 'courier new', courier;">widgetsManager.add(cutoffSlider, forControllerNumber: 5)</span><br /><span style="font-family: 'courier new', courier;">csoundUI?.add(cutoffSlider, forChannelName: "cutoff")</span><br /><span style="font-family: 'courier new', courier;">widgetsManager.openMidiIn()</span></pre>
<p>An advantage of this variant is that MIDI connections to the UI widgets are active even when Csound is not running, so visual feedback can still be provided, for example. At the time of writing, support is only built-in for UISliders.</p>
<h3><strong>10 Other Functionality</strong></h3>
<p>This section describes a few methods of CsoundObj that are potentially helpful for more complex applications.</p>
<p><strong>10.1 getCsound</strong></p>
<pre><span style="font-family: 'courier new', courier;">(CSOUND *)getCsound;</span></pre>
<p>The getCsound method returns a pointer to a struct of type CSOUND, the underlying Csound instance in the C API that the iOS API wraps. Because the iOS API only wraps the most commonly needed functionality from the Csound C API, this method can be helpful for accessing it directly without needing to modify the Csound iOS API to do so.</p>
<p>Note that this returns an opaque pointer because the declaration of this struct type is not directly accessible. This should, however, still allow you to pass it into Csound C API functions in either Objective-C or Swift if you would like to access them.</p>
<p><strong>10.2 getAudioUnit</strong></p>
<pre><span style="font-family: 'courier new', courier;">(AudioUnit *)getAudioUnit;</span></pre>
<p>The getAudioUnit method returns a pointer to a CsoundObj instance&rsquo;s I/O AudioUnit, which provides audio input and output to Csound from iOS.</p>
<p>This can have several potential purposes. As a simple example, you can use the&nbsp;<span style="font-family: 'courier new', courier;">AudioOutputUnitStop()</span> function with the returned value&rsquo;s pointee to pause rendering, and <span style="font-family: 'courier new', courier;">AudioOutputUnitStart()</span> to resume.</p>
<p><strong>10.3 updateOrchestra</strong></p>
<pre><span style="font-family: 'courier new', courier;">(void)updateOrchestra:(NSString *)orchestraString;</span></pre>
<p>The updateOrchestra method allows you to supply a new Csound orchestra as a string.</p>
<p><strong>10.4 Other</strong></p>
<p>Additionally, getKsmps returns the current ksmps value, and getNumChannels returns the number of audio channels in use by the current Csound instance. These both act directly as wrappers to Csound C API functions.</p>
<h3><strong>11 Example Projects</strong></h3>
<p>The Csound iOS examples project, available in both Objective-C and Swift, is a collection of code that demonstrates common uses of and interactions with the Csound iOS API.</p>
<p>For documentation on the examples, refer to the Csound-iOS reference manual (Yi, Lazzarini, Boulanger), included with the API and examples.</p>
<p><strong>11.1 csoundSynthesizer</strong></p>
<p>csoundSynthesizer is a separate project that demonstrates building a small, simple iOS application that is usable as a rudimentary synthesizer. It is not intended to be an exhaustive reference, for which purpose the Csound iOS Examples projects are better suited, but to help a new user get up and running with Csound on iOS. The project is available in both Swift and Objective-C <a title="here" href="https://github.com/nikhilsinghmus/csoundSynthesizer">here.</a></p>
<h3><strong>12 Conclusion</strong></h3>
<p>This guide provides an outline of the Csound iOS API&rsquo;s functionality, and demonstrates some common applications of it, in order to aid those who have acquired even some background in Csound to develop powerful audio applications without worrying about the low-level intricacies of Apple&rsquo;s Core Audio.</p>
<p>We wish you all the best as you continue your journey into developing apps with the power and possibilities Csound has to offer.</p>
   
  </div>
 </div>


  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

