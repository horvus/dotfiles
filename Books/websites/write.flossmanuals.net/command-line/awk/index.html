
<!DOCTYPE HTML>
<html>
 <head>
   

<link type="text/css" href="/site_static/css/booki.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/base/jquery.ui.all.css" rel="Stylesheet" >
<link type="text/css" href="/site_static/js/jquery/themes/smoothness/jquery.ui.all.css" rel="Stylesheet" >
<script type="text/javascript" src="/site_static/js/jquery/jquery-1.4.4.js"></script>
<script type="text/javascript" src="/site_static/js/jquery/ui/jquery-ui-1.8.10.custom.js"></script>
<script type="text/javascript" src="/site_static/js/jquery.json-1.3.js"></script>
<script type="text/javascript" src="/site_static/js/booki.js"></script>
<script src="/site_static/js/messaging.js" type="text/javascript"></script>   
<script type="text/javascript" src="/site_static/js/general.js"></script>
<link href="/site_static/css/jquery.bubblepopup.v2.3.1.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="/site_static/css/jquery-ui_overrides.css" rel="Stylesheet" >
<script src="/site_static/js/jquery.bubblepopup.v2.3.1.min.js" type="text/javascript"></script>

<link rel="SHORTCUT ICON" href="http://write.flossmanuals.net/site_static/images/favicon.ico" type="image/x-icon">
<meta property="og:site_name" content="FLOSS Manuals"/><meta name="description" content="Free Manuals for Freedom"/>

<script type="text/javascript">
  $(function() {
      $.booki.sputnikDispatcherURL = "/_sputnik/";

      $("#dialog-sputnik-error").dialog({
          modal: true,
          autoOpen: false,
          buttons: {
            Ok: function() {
               $(this).dialog('close');
               window.location = '.';
            }
          }
      });
  
      $("FORM.messagefield").messagefield('init', {'view_post': '/messaging/post' });  
  });
</script>


   
<title>/chapter: Awk / COMMAND LINE</title>
<link type="text/css" href="/site_static/css/published.css" rel="Stylesheet" />

<link rel="alternate" type="application/rss+xml" title="RSS feed for COMMAND LINE" href="/feeds/rss/book/command-line/" /> 
<link rel="alternate" type="application/atom+xml" title="Atom feed for COMMAND LINE" href="/feeds/atom/book/command-line/" /> 

<link rel="alternate" type="application/rss+xml" title="RSS feed for chapter AWK" href="/feeds/rss/chapter/command-line/command-line/" /> 
<link rel="alternate" type="application/atom+xml" title="Atom feed for chapter AWK" href="/feeds/atom/chapter/command-line/command-line/" /> 


<style>
SPAN.bookicommentmarker {
  background-color: white;
}

SPAN.bookicommentmarker > IMG.markerimage { 
   display: none;
}


</style>



   <link type="text/css" href="/static/css/_user.css" rel="Stylesheet" >
 </head>
<body>

<div class="topbar"> 
  <div class="logotext"><a href="http://write.flossmanuals.net/">FLOSS Manuals</a> </div>

  <div class="meta-bar">
    
    <ul>
      <li>
        <a href="/accounts/signin/?redirect=/command-line/awk/">Sign In / Create Account</a>
      </li>
    </ul>
    
    <div style="padding-top: 10px; padding-right: 15px;">
      <br/>
      

<script>
  $(function() {
    var $frm = $("FORM[name=changelang]");
	
    $("A[href=#]", $frm).click(function() {
        var lang = $(this).attr("class").substr(4);
	
        $("INPUT[name=language]", $frm).val(lang);
        $frm.submit();
	
        return false;
    });
  });
 </script>

<form name="changelang" method="POST" action="/accounts/i18n/setlang/?language=en-us">
  <input type="hidden" name="language" value="en-us">
  
    &nbsp;English&nbsp;|
  
  
  
    &nbsp;<a class="langes" href="#">Español</a>&nbsp;|
  

  
    &nbsp;<a class="langfr" href="#">Français</a>&nbsp;|
  
	
  
    &nbsp;<a class="langit" href="#">Italiano</a>&nbsp;|
  
	
  
    &nbsp;<a class="langpt" href="#">Português</a>&nbsp;|
  
	
  
    &nbsp;<a class="langru" href="#">Русский</a>&nbsp;|
  
	
  
    &nbsp;<a class="langsq" href="#">Shqip</a>
  	
</form>

    </div>
    
    
  </div><!-- End of .meta-bar -->
</div><!-- End top bar -->

<div class="menubar shadow">
  
  
  <div class="navbox">
    <ul>
      <li><a href="/list-books/">Books</a></li>
      <li><a href="/list-groups/">Groups</a></li>
      <li><a href="/list-people/">People</a></li>
    </ul>      
  </div><!-- End of .navbox -->       
</div>

<div class="content-container">
  <div class="content shadow">
    <!-- Content box and the drop shadow-->
    
   <h2>COMMAND LINE</h2>

<div class="padded">
<div id="bookmenu">
<ul>

 
   <li><b>INTRODUCTION</b></li>
 

 
   <li><a href="/command-line/introduction/">INTRODUCTION</a></li>
 

 
   <li><a href="/command-line/about-this-manual/">ABOUT THIS  MANUAL</a></li>
 

 
   <li><b>BASICS</b></li>
 

 
   <li><a href="/command-line/getting-started/">GETTING STARTED</a></li>
 

 
   <li><a href="/command-line/beginning-syntax/">BEGINNING SYNTAX</a></li>
 

 
   <li><a href="/command-line/moving-around/">MOVING AROUND</a></li>
 

 
   <li><b>COMMANDS</b></li>
 

 
   <li><a href="/command-line/basic-commands/">BASIC COMMANDS</a></li>
 

 
   <li><a href="/command-line/standard-files/">STANDARD FILES</a></li>
 

 
   <li><a href="/command-line/cut-down-on-typing/">CUT DOWN ON TYPING</a></li>
 

 
   <li><a href="/command-line/superusers/">SUPERUSERS</a></li>
 

 
   <li><a href="/command-line/redirection/">REDIRECTION</a></li>
 

 
   <li><b>ADVANCED-ISH</b></li>
 

 
   <li><a href="/command-line/multiple-files/">MULTIPLE FILES</a></li>
 

 
   <li><a href="/command-line/searching-for-files/">SEARCHING FOR FILES</a></li>
 

 
   <li><a href="/command-line/piping/">PIPING</a></li>
 

 
   <li><a href="/command-line/processes/">PROCESSES</a></li>
 

 
   <li><a href="/command-line/file-structure/">FILE STRUCTURE</a></li>
 

 
   <li><a href="/command-line/command-history/">COMMAND HISTORY</a></li>
 

 
   <li><b>ADVANCED</b></li>
 

 
   <li><a href="/command-line/permissions/">PERMISSIONS</a></li>
 

 
   <li><a href="/command-line/interactive-editing/">INTERACTIVE EDITING</a></li>
 

 
   <li><a href="/command-line/checking-exit/">CHECKING EXIT</a></li>
 

 
   <li><a href="/command-line/sub-commands/">SUB COMMANDS</a></li>
 

 
   <li><a href="/command-line/moving-again/">MOVING AGAIN</a></li>
 

 
   <li><a href="/command-line/customisation/">CUSTOMISATION</a></li>
 

 
   <li><a href="/command-line/parameter-substitution/">PARAMETER SUBSTITUTION</a></li>
 

 
   <li><a href="/command-line/gnuscreen/">GNUSCREEN</a></li>
 

 
   <li><a href="/command-line/ssh/">SSH</a></li>
 

 
   <li><a href="/command-line/installing-software/">INSTALLING SOFTWARE</a></li>
 

 
   <li><a href="/command-line/making-your-own-interpreter/">MAKING YOUR OWN INTERPRETER</a></li>
 

 
   <li><b>TEXT EDITORS</b></li>
 

 
   <li><a href="/command-line/text-editors/">TEXT EDITORS</a></li>
 

 
   <li><a href="/command-line/nano/">NANO</a></li>
 

 
   <li><a href="/command-line/vim/">VIM</a></li>
 

 
   <li><a href="/command-line/emacs/">EMACS</a></li>
 

 
   <li><a href="/command-line/kedit/">KEDIT</a></li>
 

 
   <li><a href="/command-line/gedit/">GEDIT</a></li>
 

 
   <li><b>SCRIPTING</b></li>
 

 
   <li><a href="/command-line/scripting/">SCRIPTING</a></li>
 

 
   <li><a href="/command-line/maintaining-scripts/">MAINTAINING SCRIPTS</a></li>
 

 
   <li><a href="/command-line/other-languages/">OTHER LANGUAGES</a></li>
 

 
   <li><a href="/command-line/sed/">SED</a></li>
 

 
   <li><a href="/command-line/awk/">AWK</a></li>
 

 
   <li><a href="/command-line/regular-expressions/">REGULAR EXPRESSIONS</a></li>
 

 
   <li><b>SCRIPTING LANGUAGES</b></li>
 

 
   <li><a href="/command-line/perl/">PERL</a></li>
 

 
   <li><a href="/command-line/python/">PYTHON</a></li>
 

 
   <li><a href="/command-line/ruby/">RUBY</a></li>
 

 
   <li><a href="/command-line/gnu-octave/">GNU OCTAVE</a></li>
 

 
   <li><b>APPENDICES</b></li>
 

 
   <li><a href="/command-line/glossary/">GLOSSARY</a></li>
 

 
   <li><a href="/command-line/command-quickie/">COMMAND QUICKIE</a></li>
 

 
   <li><a href="/command-line/outline/">OUTLINE</a></li>
 

 
   <li><a href="/command-line/credits/">CREDITS</a></li>
 

</ul>
</div>
<div id="bookcontent">
   
<html><head><title>CommandLineIntro: Awk</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body><h1>Awk
</h1>
<p>AWK is a programming language designed for processing plain text data.  It is named after its founders, Alfred <strong>A</strong>ho, Peter <strong>W</strong>einberger and B<span></span>rian <strong>K</strong>ernighan.  AWK is quite a small language and easy to learn, making it the ideal tool for quick and easy text processing.  Its prime use is to extract data from table-like input.
  <br></p>
<p>Since programs written in AWK tend to be rather small, they are mostly entered directly on the command line.  Of course, saving larger scripts as text files is also possible.
</p>In the next paragraphs, we present the basics of AWK through three simple examples.  All of them will be run on the following text file (containing the five highest scores ever achieved in the video game Donkey Kong as of March 2009):
<br><pre>1050200 Billy Mitchell 2007
1049100 Steve Wiebe 2007
895400 Scott Kessler 2008
879200 Timothy Sczerby 2001
801700 Stephen Boyer 2007</pre>
<p>The file is a table organized into <em>fields</em>.  The first field of each row contains the respective score, the second and third fields contain the name of the person who has achieved it, and the fourth and last field of each row contains the year in which the score was set.  You should copy and paste the text above into a text file and name it something like <em>highscores.txt</em> so that you can try out the following examples.
</p>
<h2>Example 1
</h2>
<p> Let's say we want to print only those scores higher than 1,000,000 points. Also, we want only the first names of the persons who have achieved the scores.  By using AWK, it's easy to extract this information: 
</p>
<pre>$ <strong>awk '$1 &gt; 1000000 { print $2, $1 }' highscores.txt</strong>
Billy 1050200
Steve 1049100
</pre>
<p>Try it out!
</p>
<p>The little AWK program that we've just entered on the command line consists of two parts:
</p>
<ol><li>The part preceding the curly braces (<em>$1 &gt; 1000000</em>) says "Do this for all lines where the value of field no. 1 is greater than 1,000,000."</li>
  <li>The part inside the curly braces (<em>print $2, $1</em>) says "Print field no. 2, followed by field no. 1."
  <br></li>
</ol><p>What the combined program says is: "For all lines, if the value of the first field is greater than 1,000,000, print the second field of the line followed by the first field of the line."  (Note that AWK programs entered on the command line are usually enclosed in single quotation marks in order to prevent the shell from interpreting them.)
</p>
<p>As we have seen in the previous example, the structure of an AWK statement is as follows:
</p>
<pre><em>pattern</em> { <em>action</em> }
</pre>
<p>The expression <em>pattern</em> specifies a condition that has to be met for <em>action</em> to take effect. AWK programs consist of an arbitrary number of these statements.  (The program we have discussed above contains only a single statement.)  An AWK program basically does the following:
</p>
<ol><li>It reads its input (e.g. a file or a text stream from standard input) line by line.</li>
  <li>For each line, AWK carries out all statements whose condition/pattern is met.</li>
</ol><p>Simple, isn't it?
</p>
<h2>Example 2
</h2>
<p>Let's look at another example:
</p>
<pre>$ <strong>awk '$4 == 2007 { print "Rank", NR, "-", $3 }' highscores.txt</strong>
Rank 1 - Mitchell
Rank 2 - Wiebe
Rank 5 - Boyer
</pre>
<p>The program, again consisting of a single statement, may be paraphrased like this: "For each line, if the value of field no. 4 equals 2007, print the word 'Rank', followed by the value of the variable 'NR', followed by a dash ('-'), followed by field no. 3."
</p>
<p>So what this little program does is print the surnames of all high score holders having set their record in 2007 along with their respective ranks in the high score table.
</p>
<p>How does AWK know which ranks the individual high score holders occupy?  Since the table is sorted, the rank of each high score holder is equal to the row number of the entry.  And AWK can access the number of each row by means of the built-in variable NR (<strong>N</strong>umber of <strong>R</strong>ow).  AWK has quite a lot of useful built-in variables, which you can look up in its documentation.
  <br></p>
<h2>Example 3
</h2>
<p>The third and final example is a bit more complex than the other two, since it contains three AWK statements in total:
</p>
<pre>$ <strong>awk 'BEGIN {print "Together, the five best Donkey Kong players have achieved:"}\</strong>
<strong>{</strong><strong></strong><strong>total += $1} </strong><strong>END {print total, "points"}' highscores.txt</strong>
</pre>
<p>
</p>
<p>This will output the following:
  <br></p>
<pre>Together, the five best Donkey Kong players have achieved:
4675600 points</pre>
<p>Let's break up this program into its three parts/statements (which we have entered on a single command line): 
</p>
<h3><strong>First statement</strong>
</h3>
<p><em>pattern</em>: BEGIN
  <br><em>action</em>: print "Together, the five best Donkey Kong players have achieved:"
</p>
<h3><strong>Second statement</strong>
</h3>
<p><em>pattern:</em> none (= always execute <em>action</em>)
  <br><em>action</em>: add the value of field no. 1 to the variable <em>total</em>
</p>
<h3><strong>Third statement</strong>
</h3>
<p><em>pattern:</em> END
  <br><em>action</em>: print the value of the variable <em>total</em>, followed by the string "points"
</p>
<p>OK, now let's look at what is new in this short AWK program.
</p>
<p>First of all, the patterns BEGIN and END have a special meaning: the action following BEGIN is executed before any input is read and the action introduced by END is executed when AWK has finished reading the input.
</p>
<p>In the second statement, we can observe that an AWK statement does not need a pattern, only <em>action </em>is obligatory.  If a statement doesn't contain a pattern, the condition of the statement is always met and AWK executes the action for every single input line.
</p>
<p>Finally, we have used our own variable for the first time, which we have called <em>total</em>. AWK variables do not need to be declared explicitly; you can introduce new ones by simply using them.  In our example program, the value of the variable <em>total</em>, starting out at 0 (zero), is increased by the value of field no. 1 for each input line. The += operator means "add the math expression on the right to the variable on the left."
</p>
<p>So after all input lines have been read, <em>total</em> contains the sum of all field 1 values, that is, the sum of all high scores.  The END statement outputs the value of <em>total</em> followed by the string "points".
  <br></p>
<h2>Where to go from here?
  <br></h2>
<p>We have seen that AWK is a fun and easy to use little programming language that may be applied to a wide range of data extraction tasks.  This short introduction to AWK can of course be little more than an appetizer.  If you want to learn more, we recommend you have a look at GAWK, the GNU implementation of AWK.  It is one of the most feature-rich implementations of the language, and comes with a comprehensive and easy to read manual (see <a href="http://www.gnu.org/software/gawk/manual/">http://www.gnu.org/software/gawk/manual/</a>).
  <br></p></body></html>
   

</div>
</div>

  </div>
</div>
<!-- End of content -->



<!-- sputnik error page -->
<div id="dialog-sputnik-qrac" style="display: none"></div>
<div id="dialog-sputnik-error" title="Can't communicate with booktype">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    There has been error in communication with Booktype server.
    Not sure right now where is the problem.
  </p>
  <p>
    You should refresh this page.
  </p>
</div>


<ul class="strings template">
 <li class="ok">OK</li>
 <li class="back">Back</li>
 <li class="create">Create</li>
 <li class="cancel">Cancel</li>
 <li class="next">Next</li>
 <li class="import">Import</li>
 <li class="savechanges">Save changes</li>
 <li class="errorcreategroup">Couldn't create a group!</li>
 <li class="msgepub">enter epub URL</li>
 <li class="msgarchive">enter Archive.org ID</li>
 <li class="msgwiki">enter Wikibooks URL</li>
 <li class="msgbooktype">enter Booktype URL</li>
 <li class="deletebook">Delete book</li>
</ul>

</body>
</html>

